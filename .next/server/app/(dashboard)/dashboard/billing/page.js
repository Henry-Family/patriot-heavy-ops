(()=>{var e={};e.id=4281,e.ids=[4281],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},49700:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>p,routeModule:()=>h,tree:()=>d});var s=t(67096),i=t(16132),a=t(37284),n=t.n(a),o=t(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["(dashboard)",{children:["dashboard",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,24352)),"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/(dashboard)/dashboard/billing/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,96114)),"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/(dashboard)/dashboard/billing/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,52490)),"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/(dashboard)/dashboard/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,44014)),"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/(dashboard)/dashboard/loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,83735))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,61831)),"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[async e=>(await Promise.resolve().then(t.bind(t,83735))).default(e)],twitter:[],manifest:void 0}}],p=["/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/(dashboard)/dashboard/billing/page.tsx"],c="/(dashboard)/dashboard/billing/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(dashboard)/dashboard/billing/page",pathname:"/dashboard/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80285:(e,r,t)=>{Promise.resolve().then(t.bind(t,72694)),Promise.resolve().then(t.t.bind(t,6800,23))},35303:()=>{},72694:(e,r,t)=>{"use strict";t.r(r),t.d(r,{BillingForm:()=>BillingForm});var s=t(30784),i=t(9885),a=t(77764),n=t(95555),o=t(20599),l=t(12025),d=t(15482);function BillingForm({subscriptionPlan:e,className:r,...t}){let[p,c]=i.useState(!1);async function onSubmit(e){e.preventDefault(),c(!p);let r=await fetch("/api/users/stripe");if(!r?.ok)return(0,l.Am)({title:"Something went wrong.",description:"Please refresh the page and try again.",variant:"destructive"});let t=await r.json();t&&(window.location.href=t.url)}return s.jsx("form",{className:(0,a.cn)(r),onSubmit:onSubmit,...t,children:(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[s.jsx(o.ll,{children:"Subscription Plan"}),(0,s.jsxs)(o.SZ,{children:["You are currently on the ",s.jsx("strong",{children:e.name})," ","plan."]})]}),s.jsx(o.aY,{children:e.description}),(0,s.jsxs)(o.eW,{className:"flex flex-col items-start space-y-2 md:flex-row md:justify-between md:space-x-0",children:[(0,s.jsxs)("button",{type:"submit",className:(0,a.cn)((0,n.d)()),disabled:p,children:[p&&s.jsx(d.P.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),e.isPro?"Manage Subscription":"Upgrade to PRO"]}),e.isPro?(0,s.jsxs)("p",{className:"rounded-full text-xs font-medium",children:[e.isCanceled?"Your plan will be canceled on ":"Your plan renews on ",(0,a.p)(e.stripeCurrentPeriodEnd),"."]}):null]})]})})}},96114:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>DashboardBillingLoading});var s=t(4656),i=t(77567),a=t(51439),n=t(71941);function DashboardBillingLoading(){return(0,s.jsxs)(n.r,{children:[s.jsx(a.x,{heading:"Billing",text:"Manage billing and your subscription plan."}),s.jsx("div",{className:"grid gap-10",children:s.jsx(i.q,{})})]})}},24352:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>BillingPage,metadata:()=>q});var s=t(4656),i=t(41412),a=t(8192),n=t(23949),o=t(28761),l=t(15310),d=t(3542),p=t(9770),c=t(43935);let u=(0,p.j)("relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:text-foreground [&>svg]:left-4 [&>svg]:top-4 [&>svg+div]:translate-y-[-3px] [&:has(svg)]:pl-11",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive border-destructive/50 dark:border-destructive [&>svg]:text-destructive text-destructive"}},defaultVariants:{variant:"default"}}),h=d.forwardRef(({className:e,variant:r,...t},i)=>s.jsx("div",{ref:i,role:"alert",className:(0,c.cn)(u({variant:r}),e),...t}));h.displayName="Alert";let x=d.forwardRef(({className:e,...r},t)=>s.jsx("h5",{ref:t,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));x.displayName="AlertTitle";let m=d.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",e),...r}));m.displayName="AlertDescription";var g=t(95153);let b=(0,g.createProxy)(String.raw`/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/components/billing-form.tsx`),{__esModule:v,$$typeof:f}=b;b.default;let y=b.BillingForm;var P=t(51439),j=t(82309),_=t(71941);let q={title:"Billing",description:"Manage billing and your subscription plan."};async function BillingPage(){let e=await (0,n.t)();e||(0,i.redirect)(a.L?.pages?.signIn||"/login");let r=await (0,l.b)(e.id),t=!1;if(r.isPro&&r.stripeSubscriptionId){let e=await o.A.subscriptions.retrieve(r.stripeSubscriptionId);t=e.cancel_at_period_end}return(0,s.jsxs)(_.r,{children:[s.jsx(P.x,{heading:"Billing",text:"Manage billing and your subscription plan."}),(0,s.jsxs)("div",{className:"grid gap-8",children:[(0,s.jsxs)(h,{className:"!pl-14",children:[s.jsx(j.P.warning,{}),s.jsx(x,{children:"This is a demo app."}),(0,s.jsxs)(m,{children:["Taxonomy app is a demo app using a Stripe test environment. You can find a list of test card numbers on the"," ",s.jsx("a",{href:"https://stripe.com/docs/testing#cards",target:"_blank",rel:"noreferrer",className:"font-medium underline underline-offset-8",children:"Stripe docs"}),"."]})]}),s.jsx(y,{subscriptionPlan:{...r,isCanceled:t}})]})]})}},28761:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(80420),i=t(74658);let a=new s.Z(i.O.STRIPE_API_KEY||"",{apiVersion:"2022-11-15",typescript:!0})}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[6889,874,558,1323,4596,6914,7046,4284,1412,512,9770,420,488,4658,8202,8192,4212,6496,2285,5310,1451],()=>__webpack_exec__(49700));module.exports=t})();
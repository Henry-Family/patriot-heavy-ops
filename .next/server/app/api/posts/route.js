"use strict";(()=>{var e={};e.id=990,e.ids=[990],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},39177:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>y,requestAsyncStorage:()=>h,routeModule:()=>x,serverHooks:()=>w,staticGenerationAsyncStorage:()=>q,staticGenerationBailout:()=>m});var s={};r.r(s),r.d(s,{GET:()=>GET,POST:()=>POST}),r(78976);var o=r(10884),n=r(16132),i=r(40674),a=r(11729),u=r(41045),p=r(8192),c=r(69363);let RequiresProPlanError=class RequiresProPlanError extends Error{constructor(e="This action requires a pro plan"){super(e)}};var l=r(15310);let d=a.Ry({title:a.Z_(),content:a.Z_().optional()});async function GET(){try{let e=await (0,i.getServerSession)(p.L);if(!e)return new Response("Unauthorized",{status:403});let{user:t}=e,r=await c.db.post.findMany({select:{id:!0,title:!0,published:!0,createdAt:!0},where:{authorId:t.id}});return new Response(JSON.stringify(r))}catch(e){return new Response(null,{status:500})}}async function POST(e){try{let t=await (0,i.getServerSession)(p.L);if(!t)return new Response("Unauthorized",{status:403});let{user:r}=t,s=await (0,l.b)(r.id);if(!s?.isPro){let e=await c.db.post.count({where:{authorId:r.id}});if(e>=3)throw new RequiresProPlanError}let o=await e.json(),n=d.parse(o),a=await c.db.post.create({data:{title:n.title,content:n.content,authorId:t.user.id},select:{id:!0}});return new Response(JSON.stringify(a))}catch(e){if(e instanceof u.jm)return new Response(JSON.stringify(e.issues),{status:422});if(e instanceof RequiresProPlanError)return new Response("Requires Pro Plan",{status:402});return new Response(null,{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/posts/route",pathname:"/api/posts",filename:"route",bundlePath:"app/api/posts/route"},resolvedPagePath:"/Users/samhenry/patriot-heavy-ops/patriot-heavy-ops/app/api/posts/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:q,serverHooks:w,headerHooks:g,staticGenerationBailout:m}=x,y="/api/posts/route"},22601:(e,t,r)=>{r.d(t,{J:()=>s});let s={name:"Taxonomy",description:"An open source application built using the new router, server components and everything new in Next.js 13.",url:"https://tx.shadcn.com",ogImage:"https://tx.shadcn.com/og.jpg",links:{twitter:"https://twitter.com/shadcn",github:"https://github.com/shadcn/taxonomy"}}}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[6889,4596,6914,4933,4658,8192,5310],()=>__webpack_exec__(39177));module.exports=r})();
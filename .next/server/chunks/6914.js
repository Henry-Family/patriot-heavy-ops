exports.id=6914,exports.ids=[6914],exports.modules={28690:(t,r)=>{"use strict";r.N=void 0,r.N=function(t){return{createUser:r=>t.user.create({data:r}),getUser:r=>t.user.findUnique({where:{id:r}}),getUserByEmail:r=>t.user.findUnique({where:{email:r}}),async getUserByAccount(r){var s;let p=await t.account.findUnique({where:{provider_providerAccountId:r},select:{user:!0}});return null!==(s=null==p?void 0:p.user)&&void 0!==s?s:null},updateUser:({id:r,...s})=>t.user.update({where:{id:r},data:s}),deleteUser:r=>t.user.delete({where:{id:r}}),linkAccount:r=>t.account.create({data:r}),unlinkAccount:r=>t.account.delete({where:{provider_providerAccountId:r}}),async getSessionAndUser(r){let s=await t.session.findUnique({where:{sessionToken:r},include:{user:!0}});if(!s)return null;let{user:p,...u}=s;return{user:p,session:u}},createSession:r=>t.session.create({data:r}),updateSession:r=>t.session.update({where:{sessionToken:r.sessionToken},data:r}),deleteSession:r=>t.session.delete({where:{sessionToken:r}}),async createVerificationToken(r){let s=await t.verificationToken.create({data:r});return s.id&&delete s.id,s},async useVerificationToken(r){try{let s=await t.verificationToken.delete({where:{identifier_token:r}});return s.id&&delete s.id,s}catch(t){if("P2025"===t.code)return null;throw t}}}}},85808:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.hkdf=void 0;let p=s(72863);function normalizeUint8Array(t,r){if("string"==typeof t)return new TextEncoder().encode(t);if(!(t instanceof Uint8Array))throw TypeError(`"${r}"" must be an instance of Uint8Array or a string`);return t}async function hkdf(t,r,s,u,h){return(0,p.default)(function(t){switch(t){case"sha256":case"sha384":case"sha512":case"sha1":return t;default:throw TypeError('unsupported "digest" value')}}(t),function(t){let r=normalizeUint8Array(t,"ikm");if(!r.byteLength)throw TypeError('"ikm" must be at least one byte in length');return r}(r),normalizeUint8Array(s,"salt"),function(t){let r=normalizeUint8Array(t,"info");if(r.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return r}(u),function(t,r){if("number"!=typeof t||!Number.isInteger(t)||t<1)throw TypeError('"keylen" must be a positive integer');let s=parseInt(r.substr(3),10)>>3||20;if(t>255*s)throw TypeError('"keylen" too large');return t}(h,t))}r.hkdf=hkdf,r.default=hkdf},78308:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113);r.default=(t,r,s,u,h)=>{let w=parseInt(t.substr(3),10)>>3||20,E=(0,p.createHmac)(t,s.byteLength?s:new Uint8Array(w)).update(r).digest(),A=Math.ceil(h/w),R=new Uint8Array(w*A+u.byteLength+1),I=0,U=0;for(let r=1;r<=A;r++)R.set(u,U),R[U+u.byteLength]=r,R.set((0,p.createHmac)(t,E).update(R.subarray(I,U+u.byteLength+1)).digest(),U),I=U,U+=w;return R.slice(0,h)}},72863:(t,r,s)=>{"use strict";let p;Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),h=s(78308);"function"!=typeof u.hkdf||process.versions.electron||(p=async(...t)=>new Promise((r,s)=>{u.hkdf(...t,(t,p)=>{t?s(t):r(new Uint8Array(p))})})),r.default=async(t,r,s,u,w)=>(p||h.default)(t,r,s,u,w)},34612:(t,r,s)=>{"use strict";t.exports=s(78066)},93282:(t,r,s)=>{"use strict";var p=s(92274),u=s(83118),h=s(54507),w=s(83916),E=s(13685),A=s(95687),R=s(61602).http,I=s(61602).https,U=s(57310),N=s(59796),W=s(64238).version,J=s(86315),K=s(55605),G=s(67058),X=s(89128),Y=/https:?/;t.exports=function(t){return new Promise(function(r,s){function done(){t.cancelToken&&t.cancelToken.unsubscribe(Q),t.signal&&t.signal.removeEventListener("abort",Q)}var Q,Z,resolve=function(t){done(),r(t)},ee=!1,reject=function(t){done(),ee=!0,s(t)},et=t.data,er=t.headers,ei={};if(Object.keys(er).forEach(function(t){ei[t.toLowerCase()]=t}),"user-agent"in ei?er[ei["user-agent"]]||delete er[ei["user-agent"]]:er["User-Agent"]="axios/"+W,et&&!p.isStream(et)){if(Buffer.isBuffer(et));else if(p.isArrayBuffer(et))et=Buffer.from(new Uint8Array(et));else{if(!p.isString(et))return reject(J("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));et=Buffer.from(et,"utf-8")}if(t.maxBodyLength>-1&&et.length>t.maxBodyLength)return reject(J("Request body larger than maxBodyLength limit",t));ei["content-length"]||(er["Content-Length"]=et.length)}var en=void 0;t.auth&&(en=(t.auth.username||"")+":"+(t.auth.password||""));var eo=h(t.baseURL,t.url),ea=U.parse(eo),es=ea.protocol||"http:";if(!en&&ea.auth){var ec=ea.auth.split(":");en=(ec[0]||"")+":"+(ec[1]||"")}en&&ei.authorization&&delete er[ei.authorization];var el=Y.test(es),ep=el?t.httpsAgent:t.httpAgent,ed={path:w(ea.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:er,agent:ep,agents:{http:t.httpAgent,https:t.httpsAgent},auth:en};t.socketPath?ed.socketPath=t.socketPath:(ed.hostname=ea.hostname,ed.port=ea.port);var eu=t.proxy;if(!eu&&!1!==eu){var eh=es.slice(0,-1)+"_proxy",ef=process.env[eh]||process.env[eh.toUpperCase()];if(ef){var em=U.parse(ef),eg=process.env.no_proxy||process.env.NO_PROXY,ev=!0;if(eg&&(ev=!eg.split(",").map(function(t){return t.trim()}).some(function(t){return!!t&&("*"===t||"."===t[0]&&ea.hostname.substr(ea.hostname.length-t.length)===t||ea.hostname===t)})),ev&&(eu={host:em.hostname,port:em.port,protocol:em.protocol},em.auth)){var ey=em.auth.split(":");eu.auth={username:ey[0],password:ey[1]}}}}eu&&(ed.headers.host=ea.hostname+(ea.port?":"+ea.port:""),function setProxy(t,r,s){if(t.hostname=r.host,t.host=r.host,t.port=r.port,t.path=s,r.auth){var p=Buffer.from(r.auth.username+":"+r.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+p}t.beforeRedirect=function(t){t.headers.host=t.host,setProxy(t,r,t.href)}}(ed,eu,es+"//"+ea.hostname+(ea.port?":"+ea.port:"")+ed.path));var e_=el&&(!eu||Y.test(eu.protocol));t.transport?Z=t.transport:0===t.maxRedirects?Z=e_?A:E:(t.maxRedirects&&(ed.maxRedirects=t.maxRedirects),Z=e_?I:R),t.maxBodyLength>-1&&(ed.maxBodyLength=t.maxBodyLength),t.insecureHTTPParser&&(ed.insecureHTTPParser=t.insecureHTTPParser);var ex=Z.request(ed,function(r){if(!ex.aborted){var s=r,h=r.req||ex;if(204!==r.statusCode&&"HEAD"!==h.method&&!1!==t.decompress)switch(r.headers["content-encoding"]){case"gzip":case"compress":case"deflate":s=s.pipe(N.createUnzip()),delete r.headers["content-encoding"]}var w={status:r.statusCode,statusText:r.statusMessage,headers:r.headers,config:t,request:h};if("stream"===t.responseType)w.data=s,u(resolve,reject,w);else{var E=[],A=0;s.on("data",function(r){E.push(r),A+=r.length,t.maxContentLength>-1&&A>t.maxContentLength&&(ee=!0,s.destroy(),reject(J("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,h)))}),s.on("aborted",function(){ee||(s.destroy(),reject(J("error request aborted",t,"ERR_REQUEST_ABORTED",h)))}),s.on("error",function(r){ex.aborted||reject(K(r,t,null,h))}),s.on("end",function(){try{var r=1===E.length?E[0]:Buffer.concat(E);"arraybuffer"===t.responseType||(r=r.toString(t.responseEncoding),t.responseEncoding&&"utf8"!==t.responseEncoding||(r=p.stripBOM(r))),w.data=r}catch(r){reject(K(r,t,r.code,w.request,w))}u(resolve,reject,w)})}}});if(ex.on("error",function(r){ex.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==r.code||reject(K(r,t,null,ex))}),ex.on("socket",function(t){t.setKeepAlive(!0,6e4)}),t.timeout){var eb=parseInt(t.timeout,10);if(isNaN(eb)){reject(J("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",ex));return}ex.setTimeout(eb,function(){ex.abort();var r=t.transitional||G.transitional;reject(J("timeout of "+eb+"ms exceeded",t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ex))})}(t.cancelToken||t.signal)&&(Q=function(t){ex.aborted||(ex.abort(),reject(!t||t&&t.type?new X("canceled"):t))},t.cancelToken&&t.cancelToken.subscribe(Q),t.signal&&(t.signal.aborted?Q():t.signal.addEventListener("abort",Q))),p.isStream(et)?et.on("error",function(r){reject(K(r,t,null,ex))}).pipe(ex):ex.end(et)})}},82922:(t,r,s)=>{"use strict";var p=s(92274),u=s(83118),h=s(19245),w=s(83916),E=s(54507),A=s(34918),R=s(15094),I=s(86315),U=s(67058),N=s(89128);t.exports=function(t){return new Promise(function(r,s){var W,J=t.data,K=t.headers,G=t.responseType;function done(){t.cancelToken&&t.cancelToken.unsubscribe(W),t.signal&&t.signal.removeEventListener("abort",W)}p.isFormData(J)&&delete K["Content-Type"];var X=new XMLHttpRequest;if(t.auth){var Y=t.auth.username||"",Q=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";K.Authorization="Basic "+btoa(Y+":"+Q)}var Z=E(t.baseURL,t.url);function onloadend(){if(X){var p="getAllResponseHeaders"in X?A(X.getAllResponseHeaders()):null;u(function(t){r(t),done()},function(t){s(t),done()},{data:G&&"text"!==G&&"json"!==G?X.response:X.responseText,status:X.status,statusText:X.statusText,headers:p,config:t,request:X}),X=null}}if(X.open(t.method.toUpperCase(),w(Z,t.params,t.paramsSerializer),!0),X.timeout=t.timeout,"onloadend"in X?X.onloadend=onloadend:X.onreadystatechange=function(){X&&4===X.readyState&&(0!==X.status||X.responseURL&&0===X.responseURL.indexOf("file:"))&&setTimeout(onloadend)},X.onabort=function(){X&&(s(I("Request aborted",t,"ECONNABORTED",X)),X=null)},X.onerror=function(){s(I("Network Error",t,null,X)),X=null},X.ontimeout=function(){var r=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",p=t.transitional||U.transitional;t.timeoutErrorMessage&&(r=t.timeoutErrorMessage),s(I(r,t,p.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",X)),X=null},p.isStandardBrowserEnv()){var ee=(t.withCredentials||R(Z))&&t.xsrfCookieName?h.read(t.xsrfCookieName):void 0;ee&&(K[t.xsrfHeaderName]=ee)}"setRequestHeader"in X&&p.forEach(K,function(t,r){void 0===J&&"content-type"===r.toLowerCase()?delete K[r]:X.setRequestHeader(r,t)}),p.isUndefined(t.withCredentials)||(X.withCredentials=!!t.withCredentials),G&&"json"!==G&&(X.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&X.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&X.upload&&X.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(W=function(t){X&&(s(!t||t&&t.type?new N("canceled"):t),X.abort(),X=null)},t.cancelToken&&t.cancelToken.subscribe(W),t.signal&&(t.signal.aborted?W():t.signal.addEventListener("abort",W))),J||(J=null),X.send(J)})}},78066:(t,r,s)=>{"use strict";var p=s(92274),u=s(37724),h=s(51769),w=s(65491),E=function createInstance(t){var r=new h(t),s=u(h.prototype.request,r);return p.extend(s,h.prototype,r),p.extend(s,r),s.create=function(r){return createInstance(w(t,r))},s}(s(67058));E.Axios=h,E.Cancel=s(89128),E.CancelToken=s(34303),E.isCancel=s(27073),E.VERSION=s(64238).version,E.all=function(t){return Promise.all(t)},E.spread=s(2952),E.isAxiosError=s(32462),t.exports=E,t.exports.default=E},89128:t=>{"use strict";function Cancel(t){this.message=t}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,t.exports=Cancel},34303:(t,r,s)=>{"use strict";var p=s(89128);function CancelToken(t){if("function"!=typeof t)throw TypeError("executor must be a function.");this.promise=new Promise(function(t){r=t});var r,s=this;this.promise.then(function(t){if(s._listeners){var r,p=s._listeners.length;for(r=0;r<p;r++)s._listeners[r](t);s._listeners=null}}),this.promise.then=function(t){var r,p=new Promise(function(t){s.subscribe(t),r=t}).then(t);return p.cancel=function(){s.unsubscribe(r)},p},t(function(t){s.reason||(s.reason=new p(t),r(s.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]},CancelToken.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);-1!==r&&this._listeners.splice(r,1)}},CancelToken.source=function(){var t;return{token:new CancelToken(function(r){t=r}),cancel:t}},t.exports=CancelToken},27073:t=>{"use strict";t.exports=function(t){return!!(t&&t.__CANCEL__)}},51769:(t,r,s)=>{"use strict";var p=s(92274),u=s(83916),h=s(21065),w=s(4570),E=s(65491),A=s(57110),R=A.validators;function Axios(t){this.defaults=t,this.interceptors={request:new h,response:new h}}Axios.prototype.request=function(t,r){if("string"==typeof t?(r=r||{}).url=t:r=t||{},!r.url)throw Error("Provided config url is not valid");(r=E(this.defaults,r)).method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var s,p=r.transitional;void 0!==p&&A.assertOptions(p,{silentJSONParsing:R.transitional(R.boolean),forcedJSONParsing:R.transitional(R.boolean),clarifyTimeoutError:R.transitional(R.boolean)},!1);var u=[],h=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(r))&&(h=h&&t.synchronous,u.unshift(t.fulfilled,t.rejected))});var I=[];if(this.interceptors.response.forEach(function(t){I.push(t.fulfilled,t.rejected)}),!h){var U=[w,void 0];for(Array.prototype.unshift.apply(U,u),U=U.concat(I),s=Promise.resolve(r);U.length;)s=s.then(U.shift(),U.shift());return s}for(var N=r;u.length;){var W=u.shift(),J=u.shift();try{N=W(N)}catch(t){J(t);break}}try{s=w(N)}catch(t){return Promise.reject(t)}for(;I.length;)s=s.then(I.shift(),I.shift());return s},Axios.prototype.getUri=function(t){if(!t.url)throw Error("Provided config url is not valid");return u((t=E(this.defaults,t)).url,t.params,t.paramsSerializer).replace(/^\?/,"")},p.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(r,s){return this.request(E(s||{},{method:t,url:r,data:(s||{}).data}))}}),p.forEach(["post","put","patch"],function(t){Axios.prototype[t]=function(r,s,p){return this.request(E(p||{},{method:t,url:r,data:s}))}}),t.exports=Axios},21065:(t,r,s)=>{"use strict";var p=s(92274);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function(t){p.forEach(this.handlers,function(r){null!==r&&t(r)})},t.exports=InterceptorManager},54507:(t,r,s)=>{"use strict";var p=s(5794),u=s(6760);t.exports=function(t,r){return t&&!p(r)?u(t,r):r}},86315:(t,r,s)=>{"use strict";var p=s(55605);t.exports=function(t,r,s,u,h){return p(Error(t),r,s,u,h)}},4570:(t,r,s)=>{"use strict";var p=s(92274),u=s(520),h=s(27073),w=s(67058),E=s(89128);function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new E("canceled")}t.exports=function(t){return throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=u.call(t,t.data,t.headers,t.transformRequest),t.headers=p.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),p.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]}),(t.adapter||w.adapter)(t).then(function(r){return throwIfCancellationRequested(t),r.data=u.call(t,r.data,r.headers,t.transformResponse),r},function(r){return!h(r)&&(throwIfCancellationRequested(t),r&&r.response&&(r.response.data=u.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})}},55605:t=>{"use strict";t.exports=function(t,r,s,p,u){return t.config=r,s&&(t.code=s),t.request=p,t.response=u,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},65491:(t,r,s)=>{"use strict";var p=s(92274);t.exports=function(t,r){r=r||{};var s={};function getMergedValue(t,r){return p.isPlainObject(t)&&p.isPlainObject(r)?p.merge(t,r):p.isPlainObject(r)?p.merge({},r):p.isArray(r)?r.slice():r}function mergeDeepProperties(s){return p.isUndefined(r[s])?p.isUndefined(t[s])?void 0:getMergedValue(void 0,t[s]):getMergedValue(t[s],r[s])}function valueFromConfig2(t){if(!p.isUndefined(r[t]))return getMergedValue(void 0,r[t])}function defaultToConfig2(s){return p.isUndefined(r[s])?p.isUndefined(t[s])?void 0:getMergedValue(void 0,t[s]):getMergedValue(void 0,r[s])}function mergeDirectKeys(s){return s in r?getMergedValue(t[s],r[s]):s in t?getMergedValue(void 0,t[s]):void 0}var u={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};return p.forEach(Object.keys(t).concat(Object.keys(r)),function(t){var r=u[t]||mergeDeepProperties,h=r(t);p.isUndefined(h)&&r!==mergeDirectKeys||(s[t]=h)}),s}},83118:(t,r,s)=>{"use strict";var p=s(86315);t.exports=function(t,r,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?t(s):r(p("Request failed with status code "+s.status,s.config,null,s.request,s))}},520:(t,r,s)=>{"use strict";var p=s(92274),u=s(67058);t.exports=function(t,r,s){var h=this||u;return p.forEach(s,function(s){t=s.call(h,t,r)}),t}},67058:(t,r,s)=>{"use strict";var p=s(92274),u=s(40166),h=s(55605),w={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,r){!p.isUndefined(t)&&p.isUndefined(t["Content-Type"])&&(t["Content-Type"]=r)}var E={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=s(82922):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(t=s(93282)),t}(),transformRequest:[function(t,r){return(u(r,"Accept"),u(r,"Content-Type"),p.isFormData(t)||p.isArrayBuffer(t)||p.isBuffer(t)||p.isStream(t)||p.isFile(t)||p.isBlob(t))?t:p.isArrayBufferView(t)?t.buffer:p.isURLSearchParams(t)?(setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):p.isObject(t)||r&&"application/json"===r["Content-Type"]?(setContentTypeIfUnset(r,"application/json"),function(t,r,s){if(p.isString(t))try{return(0,JSON.parse)(t),p.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var r=this.transitional||E.transitional,s=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,w=!s&&"json"===this.responseType;if(w||u&&p.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(w){if("SyntaxError"===t.name)throw h(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(t){E.headers[t]={}}),p.forEach(["post","put","patch"],function(t){E.headers[t]=p.merge(w)}),t.exports=E},64238:t=>{"use strict";t.exports={version:"0.25.0"}},37724:t=>{"use strict";t.exports=function(t,r){return function(){for(var s=Array(arguments.length),p=0;p<s.length;p++)s[p]=arguments[p];return t.apply(r,s)}}},83916:(t,r,s)=>{"use strict";var p=s(92274);function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,r,s){if(!r)return t;if(s)u=s(r);else if(p.isURLSearchParams(r))u=r.toString();else{var u,h=[];p.forEach(r,function(t,r){null!=t&&(p.isArray(t)?r+="[]":t=[t],p.forEach(t,function(t){p.isDate(t)?t=t.toISOString():p.isObject(t)&&(t=JSON.stringify(t)),h.push(encode(r)+"="+encode(t))}))}),u=h.join("&")}if(u){var w=t.indexOf("#");-1!==w&&(t=t.slice(0,w)),t+=(-1===t.indexOf("?")?"?":"&")+u}return t}},6760:t=>{"use strict";t.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}},19245:(t,r,s)=>{"use strict";var p=s(92274);t.exports=p.isStandardBrowserEnv()?{write:function(t,r,s,u,h,w){var E=[];E.push(t+"="+encodeURIComponent(r)),p.isNumber(s)&&E.push("expires="+new Date(s).toGMTString()),p.isString(u)&&E.push("path="+u),p.isString(h)&&E.push("domain="+h),!0===w&&E.push("secure"),document.cookie=E.join("; ")},read:function(t){var r=document.cookie.match(RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5794:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},32462:(t,r,s)=>{"use strict";var p=s(92274);t.exports=function(t){return p.isObject(t)&&!0===t.isAxiosError}},15094:(t,r,s)=>{"use strict";var p=s(92274);t.exports=p.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function resolveURL(t){var p=t;return r&&(s.setAttribute("href",p),p=s.href),s.setAttribute("href",p),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return t=resolveURL(window.location.href),function(r){var s=p.isString(r)?resolveURL(r):r;return s.protocol===t.protocol&&s.host===t.host}}():function(){return!0}},40166:(t,r,s)=>{"use strict";var p=s(92274);t.exports=function(t,r){p.forEach(t,function(s,p){p!==r&&p.toUpperCase()===r.toUpperCase()&&(t[r]=s,delete t[p])})}},34918:(t,r,s)=>{"use strict";var p=s(92274),u=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var r,s,h,w={};return t&&p.forEach(t.split("\n"),function(t){h=t.indexOf(":"),r=p.trim(t.substr(0,h)).toLowerCase(),s=p.trim(t.substr(h+1)),r&&!(w[r]&&u.indexOf(r)>=0)&&("set-cookie"===r?w[r]=(w[r]?w[r]:[]).concat([s]):w[r]=w[r]?w[r]+", "+s:s)}),w}},2952:t=>{"use strict";t.exports=function(t){return function(r){return t.apply(null,r)}}},57110:(t,r,s)=>{"use strict";var p=s(64238).version,u={};["object","boolean","number","function","string","symbol"].forEach(function(t,r){u[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});var h={};u.transitional=function(t,r,s){function formatMessage(t,r){return"[Axios v"+p+"] Transitional option '"+t+"'"+r+(s?". "+s:"")}return function(s,p,u){if(!1===t)throw Error(formatMessage(p," has been removed"+(r?" in "+r:"")));return r&&!h[p]&&(h[p]=!0,console.warn(formatMessage(p," has been deprecated since v"+r+" and will be removed in the near future"))),!t||t(s,p,u)}},t.exports={assertOptions:function(t,r,s){if("object"!=typeof t)throw TypeError("options must be an object");for(var p=Object.keys(t),u=p.length;u-- >0;){var h=p[u],w=r[h];if(w){var E=t[h],A=void 0===E||w(E,h,t);if(!0!==A)throw TypeError("option "+h+" must be "+A);continue}if(!0!==s)throw Error("Unknown option "+h)}},validators:u}},92274:(t,r,s)=>{"use strict";var p=s(37724),u=Object.prototype.toString;function isArray(t){return Array.isArray(t)}function isUndefined(t){return void 0===t}function isArrayBuffer(t){return"[object ArrayBuffer]"===u.call(t)}function isObject(t){return null!==t&&"object"==typeof t}function isPlainObject(t){if("[object Object]"!==u.call(t))return!1;var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}function isFunction(t){return"[object Function]"===u.call(t)}function forEach(t,r){if(null!=t){if("object"!=typeof t&&(t=[t]),isArray(t))for(var s=0,p=t.length;s<p;s++)r.call(null,t[s],s,t);else for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&r.call(null,t[u],u,t)}}t.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:function(t){return null!==t&&!isUndefined(t)&&null!==t.constructor&&!isUndefined(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"[object FormData]"===u.call(t)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&isArrayBuffer(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function(t){return"[object Date]"===u.call(t)},isFile:function(t){return"[object File]"===u.call(t)},isBlob:function(t){return"[object Blob]"===u.call(t)},isFunction:isFunction,isStream:function(t){return isObject(t)&&isFunction(t.pipe)},isURLSearchParams:function(t){return"[object URLSearchParams]"===u.call(t)},isStandardBrowserEnv:function(){return"undefined"!=typeof navigator&&("ReactNative"===navigator.product||"NativeScript"===navigator.product||navigator.product),!1},forEach:forEach,merge:function merge(){var t={};function assignValue(r,s){isPlainObject(t[s])&&isPlainObject(r)?t[s]=merge(t[s],r):isPlainObject(r)?t[s]=merge({},r):isArray(r)?t[s]=r.slice():t[s]=r}for(var r=0,s=arguments.length;r<s;r++)forEach(arguments[r],assignValue);return t},extend:function(t,r,s){return forEach(r,function(r,u){s&&"function"==typeof r?t[u]=p(r,s):t[u]=r}),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},95011:(t,r)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */r.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");var s={},u=t.length;if(u<2)return s;var h=r&&r.decode||decode,w=0,E=0,A=0;do{if(-1===(E=t.indexOf("=",w)))break;if(-1===(A=t.indexOf(";",w)))A=u;else if(E>A){w=t.lastIndexOf(";",E-1)+1;continue}var R=startIndex(t,w,E),I=endIndex(t,E,R),U=t.slice(R,I);if(!p.call(s,U)){var N=startIndex(t,E+1,A),W=endIndex(t,A,N);34===t.charCodeAt(N)&&34===t.charCodeAt(W-1)&&(N++,W--);var J=t.slice(N,W);s[U]=function(t,r){try{return r(t)}catch(r){return t}}(J,h)}w=A+1}while(w<u);return s},r.serialize=function(t,r,p){var A=p&&p.encode||encodeURIComponent;if("function"!=typeof A)throw TypeError("option encode is invalid");if(!u.test(t))throw TypeError("argument name is invalid");var R=A(r);if(!h.test(R))throw TypeError("argument val is invalid");var I=t+"="+R;if(!p)return I;if(null!=p.maxAge){var U=Math.floor(p.maxAge);if(!isFinite(U))throw TypeError("option maxAge is invalid");I+="; Max-Age="+U}if(p.domain){if(!w.test(p.domain))throw TypeError("option domain is invalid");I+="; Domain="+p.domain}if(p.path){if(!E.test(p.path))throw TypeError("option path is invalid");I+="; Path="+p.path}if(p.expires){var N=p.expires;if("[object Date]"!==s.call(N)||isNaN(N.valueOf()))throw TypeError("option expires is invalid");I+="; Expires="+N.toUTCString()}if(p.httpOnly&&(I+="; HttpOnly"),p.secure&&(I+="; Secure"),p.partitioned&&(I+="; Partitioned"),p.priority)switch("string"==typeof p.priority?p.priority.toLowerCase():p.priority){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(p.sameSite)switch("string"==typeof p.sameSite?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return I};var s=Object.prototype.toString,p=Object.prototype.hasOwnProperty,u=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,h=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,w=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,E=/^[\u0020-\u003A\u003D-\u007E]*$/;function startIndex(t,r,s){do{var p=t.charCodeAt(r);if(32!==p&&9!==p)return r}while(++r<s);return s}function endIndex(t,r,s){for(;r>s;){var p=t.charCodeAt(--r);if(32!==p&&9!==p)return r+1}return s}function decode(t){return -1!==t.indexOf("%")?decodeURIComponent(t):t}},59862:(t,r,s)=>{"use strict";r.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;r.splice(1,0,s,"color: inherit");let p=0,u=0;r[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(p++,"%c"===t&&(u=p))}),r.splice(u,0,s)},r.save=function(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch(t){}},r.load=function(){let t;try{t=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},r.useColors=function(){let t;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(t){}}(),r.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=s(11639)(r);let{formatters:p}=t.exports;p.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},11639:(t,r,s)=>{"use strict";t.exports=function(t){function createDebug(t){let r,s,p;let u=null;function debug(...t){if(!debug.enabled)return;let s=Number(new Date),p=s-(r||s);debug.diff=p,debug.prev=r,debug.curr=s,r=s,t[0]=createDebug.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";u++;let p=createDebug.formatters[s];if("function"==typeof p){let s=t[u];r=p.call(debug,s),t.splice(u,1),u--}return r}),createDebug.formatArgs.call(debug,t);let h=debug.log||createDebug.log;h.apply(debug,t)}return debug.namespace=t,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(t),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==u?u:(s!==createDebug.namespaces&&(s=createDebug.namespaces,p=createDebug.enabled(t)),p),set:t=>{u=t}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(t,r){let s=createDebug(this.namespace+(void 0===r?":":r)+t);return s.log=this.log,s}function matchesTemplate(t,r){let s=0,p=0,u=-1,h=0;for(;s<t.length;)if(p<r.length&&(r[p]===t[s]||"*"===r[p]))"*"===r[p]?(u=p,h=s):s++,p++;else{if(-1===u)return!1;p=u+1,s=++h}for(;p<r.length&&"*"===r[p];)p++;return p===r.length}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function(t){return t instanceof Error?t.stack||t.message:t},createDebug.disable=function(){let t=[...createDebug.names,...createDebug.skips.map(t=>"-"+t)].join(",");return createDebug.enable(""),t},createDebug.enable=function(t){createDebug.save(t),createDebug.namespaces=t,createDebug.names=[],createDebug.skips=[];let r=("string"==typeof t?t:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let t of r)"-"===t[0]?createDebug.skips.push(t.slice(1)):createDebug.names.push(t)},createDebug.enabled=function(t){for(let r of createDebug.skips)if(matchesTemplate(t,r))return!1;for(let r of createDebug.names)if(matchesTemplate(t,r))return!0;return!1},createDebug.humanize=s(8605),createDebug.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(r=>{createDebug[r]=t[r]}),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function(t){let r=0;for(let s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s)|0;return createDebug.colors[Math.abs(r)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},43396:(t,r,s)=>{"use strict";"undefined"==typeof process||"renderer"===process.type||process.__nwjs?t.exports=s(59862):t.exports=s(6582)},6582:(t,r,s)=>{"use strict";let p=s(76224),u=s(73837);r.init=function(t){t.inspectOpts={};let s=Object.keys(r.inspectOpts);for(let p=0;p<s.length;p++)t.inspectOpts[s[p]]=r.inspectOpts[s[p]]},r.log=function(...t){return process.stderr.write(u.formatWithOptions(r.inspectOpts,...t)+"\n")},r.formatArgs=function(s){let{namespace:p,useColors:u}=this;if(u){let r=this.color,u="\x1b[3"+(r<8?r:"8;5;"+r),h=`  ${u};1m${p} \u001B[0m`;s[0]=h+s[0].split("\n").join("\n"+h),s.push(u+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else s[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+p+" "+s[0]},r.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:p.isatty(process.stderr.fd)},r.destroy=u.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let t=s(56421);t&&(t.stderr||t).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}r.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,r)=>{let s=r.substring(6).toLowerCase().replace(/_([a-z])/g,(t,r)=>r.toUpperCase()),p=process.env[r];return p=!!/^(yes|on|true|enabled)$/i.test(p)||!/^(no|off|false|disabled)$/i.test(p)&&("null"===p?null:Number(p)),t[s]=p,t},{}),t.exports=s(11639)(r);let{formatters:h}=t.exports;h.o=function(t){return this.inspectOpts.colors=this.useColors,u.inspect(t,this.inspectOpts).split("\n").map(t=>t.trim()).join(" ")},h.O=function(t){return this.inspectOpts.colors=this.useColors,u.inspect(t,this.inspectOpts)}},81883:(t,r,s)=>{"use strict";var p;t.exports=function(){if(!p){try{p=s(43396)("follow-redirects")}catch(t){}"function"!=typeof p&&(p=function(){})}p.apply(null,arguments)}},61602:(t,r,s)=>{"use strict";var p=s(57310),u=p.URL,h=s(13685),w=s(95687),E=s(12781).Writable,A=s(39491),R=s(81883);!function(){var t="undefined"!=typeof process,r=isFunction(Error.captureStackTrace);t||r||console.warn("The follow-redirects package should be excluded from browser builds.")}();var I=!1;try{A(new u(""))}catch(t){I="ERR_INVALID_URL"===t.code}var U=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],N=["abort","aborted","connect","error","socket","timeout"],W=Object.create(null);N.forEach(function(t){W[t]=function(r,s,p){this._redirectable.emit(t,r,s,p)}});var J=createErrorType("ERR_INVALID_URL","Invalid URL",TypeError),K=createErrorType("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),G=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",K),X=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Y=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),Q=E.prototype.destroy||noop;function RedirectableRequest(t,r){E.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],r&&this.on("response",r);var s=this;this._onNativeResponse=function(t){try{s._processResponse(t)}catch(t){s.emit("error",t instanceof K?t:new K({cause:t}))}},this._performRequest()}function wrap(t){var r={maxRedirects:21,maxBodyLength:10485760},s={};return Object.keys(t).forEach(function(p){var h=p+":",w=s[h]=t[p],E=r[p]=Object.create(w);Object.defineProperties(E,{request:{value:function(t,p,w){var E;return(E=t,u&&E instanceof u)?t=spreadUrlObject(t):isString(t)?t=spreadUrlObject(parseUrl(t)):(w=p,p=validateUrl(t),t={protocol:h}),isFunction(p)&&(w=p,p=null),(p=Object.assign({maxRedirects:r.maxRedirects,maxBodyLength:r.maxBodyLength},t,p)).nativeProtocols=s,isString(p.host)||isString(p.hostname)||(p.hostname="::1"),A.equal(p.protocol,h,"protocol mismatch"),R("options",p),new RedirectableRequest(p,w)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(t,r,s){var p=E.request(t,r,s);return p.end(),p},configurable:!0,enumerable:!0,writable:!0}})}),r}function noop(){}function parseUrl(t){var r;if(I)r=new u(t);else if(!isString((r=validateUrl(p.parse(t))).protocol))throw new J({input:t});return r}function validateUrl(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname)||/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new J({input:t.href||t});return t}function spreadUrlObject(t,r){var s=r||{};for(var p of U)s[p]=t[p];return s.hostname.startsWith("[")&&(s.hostname=s.hostname.slice(1,-1)),""!==s.port&&(s.port=Number(s.port)),s.path=s.search?s.pathname+s.search:s.pathname,s}function removeMatchingHeaders(t,r){var s;for(var p in r)t.test(p)&&(s=r[p],delete r[p]);return null==s?void 0:String(s).trim()}function createErrorType(t,r,s){function CustomError(s){isFunction(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,s||{}),this.code=t,this.message=this.cause?r+": "+this.cause.message:r}return CustomError.prototype=new(s||Error),Object.defineProperties(CustomError.prototype,{constructor:{value:CustomError,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),CustomError}function destroyRequest(t,r){for(var s of N)t.removeListener(s,W[s]);t.on("error",noop),t.destroy(r)}function isString(t){return"string"==typeof t||t instanceof String}function isFunction(t){return"function"==typeof t}RedirectableRequest.prototype=Object.create(E.prototype),RedirectableRequest.prototype.abort=function(){destroyRequest(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},RedirectableRequest.prototype.destroy=function(t){return destroyRequest(this._currentRequest,t),Q.call(this,t),this},RedirectableRequest.prototype.write=function(t,r,s){if(this._ending)throw new Y;if(!isString(t)&&!("object"==typeof t&&"length"in t))throw TypeError("data should be a string, Buffer or Uint8Array");if(isFunction(r)&&(s=r,r=null),0===t.length){s&&s();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:r}),this._currentRequest.write(t,r,s)):(this.emit("error",new X),this.abort())},RedirectableRequest.prototype.end=function(t,r,s){if(isFunction(t)?(s=t,t=r=null):isFunction(r)&&(s=r,r=null),t){var p=this,u=this._currentRequest;this.write(t,r,function(){p._ended=!0,u.end(null,null,s)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,s)},RedirectableRequest.prototype.setHeader=function(t,r){this._options.headers[t]=r,this._currentRequest.setHeader(t,r)},RedirectableRequest.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},RedirectableRequest.prototype.setTimeout=function(t,r){var s=this;function destroyOnTimeout(r){r.setTimeout(t),r.removeListener("timeout",r.destroy),r.addListener("timeout",r.destroy)}function startTimer(r){s._timeout&&clearTimeout(s._timeout),s._timeout=setTimeout(function(){s.emit("timeout"),clearTimer()},t),destroyOnTimeout(r)}function clearTimer(){s._timeout&&(clearTimeout(s._timeout),s._timeout=null),s.removeListener("abort",clearTimer),s.removeListener("error",clearTimer),s.removeListener("response",clearTimer),s.removeListener("close",clearTimer),r&&s.removeListener("timeout",r),s.socket||s._currentRequest.removeListener("socket",startTimer)}return r&&this.on("timeout",r),this.socket?startTimer(this.socket):this._currentRequest.once("socket",startTimer),this.on("socket",destroyOnTimeout),this.on("abort",clearTimer),this.on("error",clearTimer),this.on("response",clearTimer),this.on("close",clearTimer),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){RedirectableRequest.prototype[t]=function(r,s){return this._currentRequest[t](r,s)}}),["aborted","connection","socket"].forEach(function(t){Object.defineProperty(RedirectableRequest.prototype,t,{get:function(){return this._currentRequest[t]}})}),RedirectableRequest.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var r=t.path.indexOf("?");r<0?t.pathname=t.path:(t.pathname=t.path.substring(0,r),t.search=t.path.substring(r))}},RedirectableRequest.prototype._performRequest=function(){var t=this._options.protocol,r=this._options.nativeProtocols[t];if(!r)throw TypeError("Unsupported protocol "+t);if(this._options.agents){var s=t.slice(0,-1);this._options.agent=this._options.agents[s]}var u=this._currentRequest=r.request(this._options,this._onNativeResponse);for(var h of(u._redirectable=this,N))u.on(h,W[h]);if(this._currentUrl=/^\//.test(this._options.path)?p.format(this._options):this._options.path,this._isRedirect){var w=0,E=this,A=this._requestBodyBuffers;!function writeNext(t){if(u===E._currentRequest){if(t)E.emit("error",t);else if(w<A.length){var r=A[w++];u.finished||u.write(r.data,r.encoding,writeNext)}else E._ended&&u.end()}}()}},RedirectableRequest.prototype._processResponse=function(t){var r,s,h,w=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:w});var E=t.headers.location;if(!E||!1===this._options.followRedirects||w<300||w>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(destroyRequest(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new G;var U=this._options.beforeRedirect;U&&(h=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var N=this._options.method;(301!==w&&302!==w||"POST"!==this._options.method)&&(303!==w||/^(?:GET|HEAD)$/.test(this._options.method))||(this._options.method="GET",this._requestBodyBuffers=[],removeMatchingHeaders(/^content-/i,this._options.headers));var W=removeMatchingHeaders(/^host$/i,this._options.headers),J=parseUrl(this._currentUrl),K=W||J.host,X=/^\w+:/.test(E)?this._currentUrl:p.format(Object.assign(J,{host:K})),Y=I?new u(E,X):parseUrl(p.resolve(X,E));if(R("redirecting to",Y.href),this._isRedirect=!0,spreadUrlObject(Y,this._options),(Y.protocol===J.protocol||"https:"===Y.protocol)&&(Y.host===K||(A(isString(r=Y.host)&&isString(K)),(s=r.length-K.length-1)>0&&"."===r[s]&&r.endsWith(K)))||removeMatchingHeaders(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),isFunction(U)){var Q={headers:t.headers,statusCode:w},Z={url:X,method:N,headers:h};U(this._options,Q,Z),this._sanitizeOptions(this._options)}this._performRequest()},t.exports=wrap({http:h,https:w}),t.exports.wrap=wrap},70145:t=>{"use strict";t.exports=(t,r=process.argv)=>{let s=t.startsWith("-")?"":1===t.length?"-":"--",p=r.indexOf(s+t),u=r.indexOf("--");return -1!==p&&(-1===u||p<u)}},92473:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cryptoRuntime=r.base64url=r.generateSecret=r.generateKeyPair=r.errors=r.decodeJwt=r.decodeProtectedHeader=r.importJWK=r.importX509=r.importPKCS8=r.importSPKI=r.exportJWK=r.exportSPKI=r.exportPKCS8=r.UnsecuredJWT=r.createRemoteJWKSet=r.createLocalJWKSet=r.EmbeddedJWK=r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=r.EncryptJWT=r.SignJWT=r.GeneralSign=r.FlattenedSign=r.CompactSign=r.FlattenedEncrypt=r.CompactEncrypt=r.jwtDecrypt=r.jwtVerify=r.generalVerify=r.flattenedVerify=r.compactVerify=r.GeneralEncrypt=r.generalDecrypt=r.flattenedDecrypt=r.compactDecrypt=void 0;var p=s(28648);Object.defineProperty(r,"compactDecrypt",{enumerable:!0,get:function(){return p.compactDecrypt}});var u=s(86504);Object.defineProperty(r,"flattenedDecrypt",{enumerable:!0,get:function(){return u.flattenedDecrypt}});var h=s(18032);Object.defineProperty(r,"generalDecrypt",{enumerable:!0,get:function(){return h.generalDecrypt}});var w=s(15706);Object.defineProperty(r,"GeneralEncrypt",{enumerable:!0,get:function(){return w.GeneralEncrypt}});var E=s(32392);Object.defineProperty(r,"compactVerify",{enumerable:!0,get:function(){return E.compactVerify}});var A=s(45663);Object.defineProperty(r,"flattenedVerify",{enumerable:!0,get:function(){return A.flattenedVerify}});var R=s(90245);Object.defineProperty(r,"generalVerify",{enumerable:!0,get:function(){return R.generalVerify}});var I=s(39876);Object.defineProperty(r,"jwtVerify",{enumerable:!0,get:function(){return I.jwtVerify}});var U=s(23180);Object.defineProperty(r,"jwtDecrypt",{enumerable:!0,get:function(){return U.jwtDecrypt}});var N=s(22e3);Object.defineProperty(r,"CompactEncrypt",{enumerable:!0,get:function(){return N.CompactEncrypt}});var W=s(1880);Object.defineProperty(r,"FlattenedEncrypt",{enumerable:!0,get:function(){return W.FlattenedEncrypt}});var J=s(39243);Object.defineProperty(r,"CompactSign",{enumerable:!0,get:function(){return J.CompactSign}});var K=s(27618);Object.defineProperty(r,"FlattenedSign",{enumerable:!0,get:function(){return K.FlattenedSign}});var G=s(92993);Object.defineProperty(r,"GeneralSign",{enumerable:!0,get:function(){return G.GeneralSign}});var X=s(54388);Object.defineProperty(r,"SignJWT",{enumerable:!0,get:function(){return X.SignJWT}});var Y=s(42173);Object.defineProperty(r,"EncryptJWT",{enumerable:!0,get:function(){return Y.EncryptJWT}});var Q=s(37598);Object.defineProperty(r,"calculateJwkThumbprint",{enumerable:!0,get:function(){return Q.calculateJwkThumbprint}}),Object.defineProperty(r,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return Q.calculateJwkThumbprintUri}});var Z=s(21070);Object.defineProperty(r,"EmbeddedJWK",{enumerable:!0,get:function(){return Z.EmbeddedJWK}});var ee=s(6662);Object.defineProperty(r,"createLocalJWKSet",{enumerable:!0,get:function(){return ee.createLocalJWKSet}});var et=s(37088);Object.defineProperty(r,"createRemoteJWKSet",{enumerable:!0,get:function(){return et.createRemoteJWKSet}});var er=s(83287);Object.defineProperty(r,"UnsecuredJWT",{enumerable:!0,get:function(){return er.UnsecuredJWT}});var ei=s(13227);Object.defineProperty(r,"exportPKCS8",{enumerable:!0,get:function(){return ei.exportPKCS8}}),Object.defineProperty(r,"exportSPKI",{enumerable:!0,get:function(){return ei.exportSPKI}}),Object.defineProperty(r,"exportJWK",{enumerable:!0,get:function(){return ei.exportJWK}});var en=s(86194);Object.defineProperty(r,"importSPKI",{enumerable:!0,get:function(){return en.importSPKI}}),Object.defineProperty(r,"importPKCS8",{enumerable:!0,get:function(){return en.importPKCS8}}),Object.defineProperty(r,"importX509",{enumerable:!0,get:function(){return en.importX509}}),Object.defineProperty(r,"importJWK",{enumerable:!0,get:function(){return en.importJWK}});var eo=s(81315);Object.defineProperty(r,"decodeProtectedHeader",{enumerable:!0,get:function(){return eo.decodeProtectedHeader}});var ea=s(10070);Object.defineProperty(r,"decodeJwt",{enumerable:!0,get:function(){return ea.decodeJwt}}),r.errors=s(18662);var es=s(56562);Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return es.generateKeyPair}});var ec=s(45558);Object.defineProperty(r,"generateSecret",{enumerable:!0,get:function(){return ec.generateSecret}}),r.base64url=s(26673);var el=s(16628);Object.defineProperty(r,"cryptoRuntime",{enumerable:!0,get:function(){return el.default}})},28648:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactDecrypt=void 0;let p=s(86504),u=s(18662),h=s(9557);async function compactDecrypt(t,r,s){if(t instanceof Uint8Array&&(t=h.decoder.decode(t)),"string"!=typeof t)throw new u.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:w,1:E,2:A,3:R,4:I,length:U}=t.split(".");if(5!==U)throw new u.JWEInvalid("Invalid Compact JWE");let N=await (0,p.flattenedDecrypt)({ciphertext:R,iv:A||void 0,protected:w||void 0,tag:I||void 0,encrypted_key:E||void 0},r,s),W={plaintext:N.plaintext,protectedHeader:N.protectedHeader};return"function"==typeof r?{...W,key:N.key}:W}r.compactDecrypt=compactDecrypt},22e3:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactEncrypt=void 0;let p=s(1880);r.CompactEncrypt=class{constructor(t){this._flattened=new p.FlattenedEncrypt(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){let s=await this._flattened.encrypt(t,r);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join(".")}}},86504:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedDecrypt=void 0;let p=s(28110),u=s(55197),h=s(49352),w=s(18662),E=s(44987),A=s(86935),R=s(57571),I=s(9557),U=s(65931),N=s(64580),W=s(79854);async function flattenedDecrypt(t,r,s){var J;let K,G,X,Y,Q,Z,ee;if(!(0,A.default)(t))throw new w.JWEInvalid("Flattened JWE must be an object");if(void 0===t.protected&&void 0===t.header&&void 0===t.unprotected)throw new w.JWEInvalid("JOSE Header missing");if("string"!=typeof t.iv)throw new w.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof t.ciphertext)throw new w.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof t.tag)throw new w.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==t.protected&&"string"!=typeof t.protected)throw new w.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==t.encrypted_key&&"string"!=typeof t.encrypted_key)throw new w.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==t.aad&&"string"!=typeof t.aad)throw new w.JWEInvalid("JWE AAD incorrect type");if(void 0!==t.header&&!(0,A.default)(t.header))throw new w.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==t.unprotected&&!(0,A.default)(t.unprotected))throw new w.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(t.protected)try{let r=(0,p.decode)(t.protected);K=JSON.parse(I.decoder.decode(r))}catch{throw new w.JWEInvalid("JWE Protected Header is invalid")}if(!(0,E.default)(K,t.header,t.unprotected))throw new w.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let et={...K,...t.header,...t.unprotected};if((0,N.default)(w.JWEInvalid,new Map,null==s?void 0:s.crit,K,et),void 0!==et.zip){if(!K||!K.zip)throw new w.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==et.zip)throw new w.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:er,enc:ei}=et;if("string"!=typeof er||!er)throw new w.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof ei||!ei)throw new w.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let en=s&&(0,W.default)("keyManagementAlgorithms",s.keyManagementAlgorithms),eo=s&&(0,W.default)("contentEncryptionAlgorithms",s.contentEncryptionAlgorithms);if(en&&!en.has(er))throw new w.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(eo&&!eo.has(ei))throw new w.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==t.encrypted_key)try{G=(0,p.decode)(t.encrypted_key)}catch{throw new w.JWEInvalid("Failed to base64url decode the encrypted_key")}let ea=!1;"function"==typeof r&&(r=await r(K,t),ea=!0);try{X=await (0,R.default)(er,r,G,et,s)}catch(t){if(t instanceof TypeError||t instanceof w.JWEInvalid||t instanceof w.JOSENotSupported)throw t;X=(0,U.default)(ei)}try{Y=(0,p.decode)(t.iv)}catch{throw new w.JWEInvalid("Failed to base64url decode the iv")}try{Q=(0,p.decode)(t.tag)}catch{throw new w.JWEInvalid("Failed to base64url decode the tag")}let es=I.encoder.encode(null!==(J=t.protected)&&void 0!==J?J:"");Z=void 0!==t.aad?(0,I.concat)(es,I.encoder.encode("."),I.encoder.encode(t.aad)):es;try{ee=(0,p.decode)(t.ciphertext)}catch{throw new w.JWEInvalid("Failed to base64url decode the ciphertext")}let ec=await (0,u.default)(ei,X,ee,Y,Q,Z);"DEF"===et.zip&&(ec=await ((null==s?void 0:s.inflateRaw)||h.inflate)(ec));let el={plaintext:ec};if(void 0!==t.protected&&(el.protectedHeader=K),void 0!==t.aad)try{el.additionalAuthenticatedData=(0,p.decode)(t.aad)}catch{throw new w.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==t.unprotected&&(el.sharedUnprotectedHeader=t.unprotected),void 0!==t.header&&(el.unprotectedHeader=t.header),ea)?{...el,key:r}:el}r.flattenedDecrypt=flattenedDecrypt},1880:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedEncrypt=r.unprotected=void 0;let p=s(28110),u=s(5563),h=s(49352),w=s(22687),E=s(1658),A=s(18662),R=s(44987),I=s(9557),U=s(64580);r.unprotected=Symbol(),r.FlattenedEncrypt=class{constructor(t){if(!(t instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,s){let N,W,J,K,G,X,Y;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new A.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,R.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new A.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let Q={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,U.default)(A.JWEInvalid,new Map,null==s?void 0:s.crit,this._protectedHeader,Q),void 0!==Q.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new A.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==Q.zip)throw new A.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:Z,enc:ee}=Q;if("string"!=typeof Z||!Z)throw new A.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof ee||!ee)throw new A.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===Z){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===Z&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let p;({cek:W,encryptedKey:N,parameters:p}=await (0,E.default)(Z,ee,t,this._cek,this._keyManagementParameters)),p&&(s&&r.unprotected in s?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...p}:this.setUnprotectedHeader(p):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...p}:this.setProtectedHeader(p))}if(this._iv||(this._iv=(0,w.default)(ee)),K=this._protectedHeader?I.encoder.encode((0,p.encode)(JSON.stringify(this._protectedHeader))):I.encoder.encode(""),this._aad?(G=(0,p.encode)(this._aad),J=(0,I.concat)(K,I.encoder.encode("."),I.encoder.encode(G))):J=K,"DEF"===Q.zip){let t=await ((null==s?void 0:s.deflateRaw)||h.deflate)(this._plaintext);({ciphertext:X,tag:Y}=await (0,u.default)(ee,t,W,this._iv,J))}else({ciphertext:X,tag:Y}=await (0,u.default)(ee,this._plaintext,W,this._iv,J));let et={ciphertext:(0,p.encode)(X),iv:(0,p.encode)(this._iv),tag:(0,p.encode)(Y)};return N&&(et.encrypted_key=(0,p.encode)(N)),G&&(et.aad=G),this._protectedHeader&&(et.protected=I.decoder.decode(K)),this._sharedUnprotectedHeader&&(et.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(et.header=this._unprotectedHeader),et}}},18032:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalDecrypt=void 0;let p=s(86504),u=s(18662),h=s(86935);async function generalDecrypt(t,r,s){if(!(0,h.default)(t))throw new u.JWEInvalid("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(h.default))throw new u.JWEInvalid("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new u.JWEInvalid("JWE Recipients has no members");for(let u of t.recipients)try{return await (0,p.flattenedDecrypt)({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:u.encrypted_key,header:u.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},r,s)}catch{}throw new u.JWEDecryptionFailed}r.generalDecrypt=generalDecrypt},15706:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralEncrypt=void 0;let p=s(1880),u=s(18662),h=s(65931),w=s(44987),E=s(1658),A=s(28110),R=s(64580);let IndividualRecipient=class IndividualRecipient{constructor(t,r,s){this.parent=t,this.key=r,this.options=s}setUnprotectedHeader(t){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}};r.GeneralEncrypt=class{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){let s=new IndividualRecipient(this,t,{crit:null==r?void 0:r.crit});return this._recipients.push(s),s}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,s,I;let U;if(!this._recipients.length)throw new u.JWEInvalid("at least one recipient must be added");if(t={deflateRaw:null==t?void 0:t.deflateRaw},1===this._recipients.length){let[r]=this._recipients,s=await new p.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(r.unprotectedHeader).encrypt(r.key,{...r.options,...t}),u={ciphertext:s.ciphertext,iv:s.iv,recipients:[{}],tag:s.tag};return s.aad&&(u.aad=s.aad),s.protected&&(u.protected=s.protected),s.unprotected&&(u.unprotected=s.unprotected),s.encrypted_key&&(u.recipients[0].encrypted_key=s.encrypted_key),s.header&&(u.recipients[0].header=s.header),u}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!(0,w.default)(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new u.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:p}=s;if("string"!=typeof p||!p)throw new u.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===p||"ECDH-ES"===p)throw new u.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof s.enc||!s.enc)throw new u.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(U){if(U!==s.enc)throw new u.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else U=s.enc;if((0,R.default)(u.JWEInvalid,new Map,r.options.crit,this._protectedHeader,s),void 0!==s.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new u.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let N=(0,h.default)(U),W={ciphertext:"",iv:"",recipients:[],tag:""};for(let u=0;u<this._recipients.length;u++){let h=this._recipients[u],w={};W.recipients.push(w);let R={...this._protectedHeader,...this._unprotectedHeader,...h.unprotectedHeader},J=R.alg.startsWith("PBES2")?2048+u:void 0;if(0===u){let r=await new p.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(N).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(h.unprotectedHeader).setKeyManagementParameters({p2c:J}).encrypt(h.key,{...h.options,...t,[p.unprotected]:!0});W.ciphertext=r.ciphertext,W.iv=r.iv,W.tag=r.tag,r.aad&&(W.aad=r.aad),r.protected&&(W.protected=r.protected),r.unprotected&&(W.unprotected=r.unprotected),w.encrypted_key=r.encrypted_key,r.header&&(w.header=r.header);continue}let{encryptedKey:K,parameters:G}=await (0,E.default)((null===(r=h.unprotectedHeader)||void 0===r?void 0:r.alg)||(null===(s=this._protectedHeader)||void 0===s?void 0:s.alg)||(null===(I=this._unprotectedHeader)||void 0===I?void 0:I.alg),U,h.key,N,{p2c:J});w.encrypted_key=(0,A.encode)(K),(h.unprotectedHeader||G)&&(w.header={...h.unprotectedHeader,...G})}return W}}},21070:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EmbeddedJWK=void 0;let p=s(86194),u=s(86935),h=s(18662);async function EmbeddedJWK(t,r){let s={...t,...null==r?void 0:r.header};if(!(0,u.default)(s.jwk))throw new h.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let w=await (0,p.importJWK)({...s.jwk,ext:!0},s.alg,!0);if(w instanceof Uint8Array||"public"!==w.type)throw new h.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return w}r.EmbeddedJWK=EmbeddedJWK},37598:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=void 0;let p=s(48177),u=s(28110),h=s(18662),w=s(9557),E=s(86935),check=(t,r)=>{if("string"!=typeof t||!t)throw new h.JWKInvalid(`${r} missing or invalid`)};async function calculateJwkThumbprint(t,r){let s;if(!(0,E.default)(t))throw TypeError("JWK must be an object");if(null!=r||(r="sha256"),"sha256"!==r&&"sha384"!==r&&"sha512"!==r)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(t.kty){case"EC":check(t.crv,'"crv" (Curve) Parameter'),check(t.x,'"x" (X Coordinate) Parameter'),check(t.y,'"y" (Y Coordinate) Parameter'),s={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":check(t.crv,'"crv" (Subtype of Key Pair) Parameter'),check(t.x,'"x" (Public Key) Parameter'),s={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":check(t.e,'"e" (Exponent) Parameter'),check(t.n,'"n" (Modulus) Parameter'),s={e:t.e,kty:t.kty,n:t.n};break;case"oct":check(t.k,'"k" (Key Value) Parameter'),s={k:t.k,kty:t.kty};break;default:throw new h.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let A=w.encoder.encode(JSON.stringify(s));return(0,u.encode)(await (0,p.default)(r,A))}async function calculateJwkThumbprintUri(t,r){null!=r||(r="sha256");let s=await calculateJwkThumbprint(t,r);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${r.slice(-3)}:${s}`}r.calculateJwkThumbprint=calculateJwkThumbprint,r.calculateJwkThumbprintUri=calculateJwkThumbprintUri},6662:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLocalJWKSet=r.LocalJWKSet=r.isJWKSLike=void 0;let p=s(86194),u=s(18662),h=s(86935);function isJWKSLike(t){return t&&"object"==typeof t&&Array.isArray(t.keys)&&t.keys.every(isJWKLike)}function isJWKLike(t){return(0,h.default)(t)}r.isJWKSLike=isJWKSLike;let LocalJWKSet=class LocalJWKSet{constructor(t){if(this._cached=new WeakMap,!isJWKSLike(t))throw new u.JWKSInvalid("JSON Web Key Set malformed");this._jwks=function(t){return"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}(t)}async getKey(t,r){let{alg:s,kid:p}={...t,...null==r?void 0:r.header},h=function(t){switch("string"==typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new u.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(s),w=this._jwks.keys.filter(t=>{let r=h===t.kty;if(r&&"string"==typeof p&&(r=p===t.kid),r&&"string"==typeof t.alg&&(r=s===t.alg),r&&"string"==typeof t.use&&(r="sig"===t.use),r&&Array.isArray(t.key_ops)&&(r=t.key_ops.includes("verify")),r&&"EdDSA"===s&&(r="Ed25519"===t.crv||"Ed448"===t.crv),r)switch(s){case"ES256":r="P-256"===t.crv;break;case"ES256K":r="secp256k1"===t.crv;break;case"ES384":r="P-384"===t.crv;break;case"ES512":r="P-521"===t.crv}return r}),{0:E,length:A}=w;if(0===A)throw new u.JWKSNoMatchingKey;if(1!==A){let t=new u.JWKSMultipleMatchingKeys,{_cached:r}=this;throw t[Symbol.asyncIterator]=async function*(){for(let t of w)try{yield await importWithAlgCache(r,t,s)}catch{continue}},t}return importWithAlgCache(this._cached,E,s)}};async function importWithAlgCache(t,r,s){let h=t.get(r)||t.set(r,{}).get(r);if(void 0===h[s]){let t=await (0,p.importJWK)({...r,ext:!0},s);if(t instanceof Uint8Array||"public"!==t.type)throw new u.JWKSInvalid("JSON Web Key Set members must be public keys");h[s]=t}return h[s]}r.LocalJWKSet=LocalJWKSet,r.createLocalJWKSet=function(t){let r=new LocalJWKSet(t);return async function(t,s){return r.getKey(t,s)}}},37088:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRemoteJWKSet=void 0;let p=s(70409),u=s(18662),h=s(6662);let RemoteJWKSet=class RemoteJWKSet extends h.LocalJWKSet{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:null==r?void 0:r.agent,headers:null==r?void 0:r.headers},this._timeoutDuration="number"==typeof(null==r?void 0:r.timeoutDuration)?null==r?void 0:r.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==r?void 0:r.cooldownDuration)?null==r?void 0:r.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==r?void 0:r.cacheMaxAge)?null==r?void 0:r.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(t,r){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(t,r)}catch(s){if(s instanceof u.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(t,r);throw s}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,p.default)(this._url,this._timeoutDuration,this._options).then(t=>{if(!(0,h.isJWKSLike)(t))throw new u.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}};r.createRemoteJWKSet=function(t,r){let s=new RemoteJWKSet(t,r);return async function(t,r){return s.getKey(t,r)}}},39243:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactSign=void 0;let p=s(27618);r.CompactSign=class{constructor(t){this._flattened=new p.FlattenedSign(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){let s=await this._flattened.sign(t,r);if(void 0===s.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}},32392:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactVerify=void 0;let p=s(45663),u=s(18662),h=s(9557);async function compactVerify(t,r,s){if(t instanceof Uint8Array&&(t=h.decoder.decode(t)),"string"!=typeof t)throw new u.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:w,1:E,2:A,length:R}=t.split(".");if(3!==R)throw new u.JWSInvalid("Invalid Compact JWS");let I=await (0,p.flattenedVerify)({payload:E,protected:w,signature:A},r,s),U={payload:I.payload,protectedHeader:I.protectedHeader};return"function"==typeof r?{...U,key:I.key}:U}r.compactVerify=compactVerify},27618:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedSign=void 0;let p=s(28110),u=s(31314),h=s(44987),w=s(18662),E=s(9557),A=s(59227),R=s(64580);r.FlattenedSign=class{constructor(t){if(!(t instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){let s;if(!this._protectedHeader&&!this._unprotectedHeader)throw new w.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,h.default)(this._protectedHeader,this._unprotectedHeader))throw new w.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let I={...this._protectedHeader,...this._unprotectedHeader},U=(0,R.default)(w.JWSInvalid,new Map([["b64",!0]]),null==r?void 0:r.crit,this._protectedHeader,I),N=!0;if(U.has("b64")&&"boolean"!=typeof(N=this._protectedHeader.b64))throw new w.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:W}=I;if("string"!=typeof W||!W)throw new w.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,A.default)(W,t,"sign");let J=this._payload;N&&(J=E.encoder.encode((0,p.encode)(J))),s=this._protectedHeader?E.encoder.encode((0,p.encode)(JSON.stringify(this._protectedHeader))):E.encoder.encode("");let K=(0,E.concat)(s,E.encoder.encode("."),J),G=await (0,u.default)(W,t,K),X={signature:(0,p.encode)(G),payload:""};return N&&(X.payload=E.decoder.decode(J)),this._unprotectedHeader&&(X.header=this._unprotectedHeader),this._protectedHeader&&(X.protected=E.decoder.decode(s)),X}}},45663:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedVerify=void 0;let p=s(28110),u=s(37281),h=s(18662),w=s(9557),E=s(44987),A=s(86935),R=s(59227),I=s(64580),U=s(79854);async function flattenedVerify(t,r,s){var N;let W,J;if(!(0,A.default)(t))throw new h.JWSInvalid("Flattened JWS must be an object");if(void 0===t.protected&&void 0===t.header)throw new h.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&"string"!=typeof t.protected)throw new h.JWSInvalid("JWS Protected Header incorrect type");if(void 0===t.payload)throw new h.JWSInvalid("JWS Payload missing");if("string"!=typeof t.signature)throw new h.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==t.header&&!(0,A.default)(t.header))throw new h.JWSInvalid("JWS Unprotected Header incorrect type");let K={};if(t.protected)try{let r=(0,p.decode)(t.protected);K=JSON.parse(w.decoder.decode(r))}catch{throw new h.JWSInvalid("JWS Protected Header is invalid")}if(!(0,E.default)(K,t.header))throw new h.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let G={...K,...t.header},X=(0,I.default)(h.JWSInvalid,new Map([["b64",!0]]),null==s?void 0:s.crit,K,G),Y=!0;if(X.has("b64")&&"boolean"!=typeof(Y=K.b64))throw new h.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:Q}=G;if("string"!=typeof Q||!Q)throw new h.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let Z=s&&(0,U.default)("algorithms",s.algorithms);if(Z&&!Z.has(Q))throw new h.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(Y){if("string"!=typeof t.payload)throw new h.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new h.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let ee=!1;"function"==typeof r&&(r=await r(K,t),ee=!0),(0,R.default)(Q,r,"verify");let et=(0,w.concat)(w.encoder.encode(null!==(N=t.protected)&&void 0!==N?N:""),w.encoder.encode("."),"string"==typeof t.payload?w.encoder.encode(t.payload):t.payload);try{W=(0,p.decode)(t.signature)}catch{throw new h.JWSInvalid("Failed to base64url decode the signature")}let er=await (0,u.default)(Q,r,W,et);if(!er)throw new h.JWSSignatureVerificationFailed;if(Y)try{J=(0,p.decode)(t.payload)}catch{throw new h.JWSInvalid("Failed to base64url decode the payload")}else J="string"==typeof t.payload?w.encoder.encode(t.payload):t.payload;let ei={payload:J};return(void 0!==t.protected&&(ei.protectedHeader=K),void 0!==t.header&&(ei.unprotectedHeader=t.header),ee)?{...ei,key:r}:ei}r.flattenedVerify=flattenedVerify},92993:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralSign=void 0;let p=s(27618),u=s(18662);let IndividualSignature=class IndividualSignature{constructor(t,r,s){this.parent=t,this.key=r,this.options=s}setProtectedHeader(t){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}};r.GeneralSign=class{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){let s=new IndividualSignature(this,t,r);return this._signatures.push(s),s}async sign(){if(!this._signatures.length)throw new u.JWSInvalid("at least one signature must be added");let t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){let s=this._signatures[r],h=new p.FlattenedSign(this._payload);h.setProtectedHeader(s.protectedHeader),h.setUnprotectedHeader(s.unprotectedHeader);let{payload:w,...E}=await h.sign(s.key,s.options);if(0===r)t.payload=w;else if(t.payload!==w)throw new u.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(E)}return t}}},90245:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalVerify=void 0;let p=s(45663),u=s(18662),h=s(86935);async function generalVerify(t,r,s){if(!(0,h.default)(t))throw new u.JWSInvalid("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(h.default))throw new u.JWSInvalid("JWS Signatures missing or incorrect type");for(let u of t.signatures)try{return await (0,p.flattenedVerify)({header:u.header,payload:t.payload,protected:u.protected,signature:u.signature},r,s)}catch{}throw new u.JWSSignatureVerificationFailed}r.generalVerify=generalVerify},23180:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtDecrypt=void 0;let p=s(28648),u=s(62651),h=s(18662);async function jwtDecrypt(t,r,s){let w=await (0,p.compactDecrypt)(t,r,s),E=(0,u.default)(w.protectedHeader,w.plaintext,s),{protectedHeader:A}=w;if(void 0!==A.iss&&A.iss!==E.iss)throw new h.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==A.sub&&A.sub!==E.sub)throw new h.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==A.aud&&JSON.stringify(A.aud)!==JSON.stringify(E.aud))throw new h.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let R={payload:E,protectedHeader:A};return"function"==typeof r?{...R,key:w.key}:R}r.jwtDecrypt=jwtDecrypt},42173:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptJWT=void 0;let p=s(22e3),u=s(9557),h=s(9256);let EncryptJWT=class EncryptJWT extends h.ProduceJWT{setProtectedHeader(t){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){let s=new p.CompactEncrypt(u.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),s.setProtectedHeader(this._protectedHeader),this._iv&&s.setInitializationVector(this._iv),this._cek&&s.setContentEncryptionKey(this._cek),this._keyManagementParameters&&s.setKeyManagementParameters(this._keyManagementParameters),s.encrypt(t,r)}};r.EncryptJWT=EncryptJWT},9256:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProduceJWT=void 0;let p=s(1641),u=s(86935),h=s(93012);r.ProduceJWT=class{constructor(t){if(!(0,u.default)(t))throw TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return"number"==typeof t?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:(0,p.default)(new Date)+(0,h.default)(t)},this}setExpirationTime(t){return"number"==typeof t?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:(0,p.default)(new Date)+(0,h.default)(t)},this}setIssuedAt(t){return void 0===t?this._payload={...this._payload,iat:(0,p.default)(new Date)}:this._payload={...this._payload,iat:t},this}}},54388:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignJWT=void 0;let p=s(39243),u=s(18662),h=s(9557),w=s(9256);let SignJWT=class SignJWT extends w.ProduceJWT{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var s;let w=new p.CompactSign(h.encoder.encode(JSON.stringify(this._payload)));if(w.setProtectedHeader(this._protectedHeader),Array.isArray(null===(s=this._protectedHeader)||void 0===s?void 0:s.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new u.JWTInvalid("JWTs MUST NOT use unencoded payload");return w.sign(t,r)}};r.SignJWT=SignJWT},83287:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnsecuredJWT=void 0;let p=s(28110),u=s(9557),h=s(18662),w=s(62651),E=s(9256);let UnsecuredJWT=class UnsecuredJWT extends E.ProduceJWT{encode(){let t=p.encode(JSON.stringify({alg:"none"})),r=p.encode(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){let s;if("string"!=typeof t)throw new h.JWTInvalid("Unsecured JWT must be a string");let{0:E,1:A,2:R,length:I}=t.split(".");if(3!==I||""!==R)throw new h.JWTInvalid("Invalid Unsecured JWT");try{if(s=JSON.parse(u.decoder.decode(p.decode(E))),"none"!==s.alg)throw Error()}catch{throw new h.JWTInvalid("Invalid Unsecured JWT")}let U=(0,w.default)(s,p.decode(A),r);return{payload:U,header:s}}};r.UnsecuredJWT=UnsecuredJWT},39876:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtVerify=void 0;let p=s(32392),u=s(62651),h=s(18662);async function jwtVerify(t,r,s){var w;let E=await (0,p.compactVerify)(t,r,s);if((null===(w=E.protectedHeader.crit)||void 0===w?void 0:w.includes("b64"))&&!1===E.protectedHeader.b64)throw new h.JWTInvalid("JWTs MUST NOT use unencoded payload");let A=(0,u.default)(E.protectedHeader,E.payload,s),R={payload:A,protectedHeader:E.protectedHeader};return"function"==typeof r?{...R,key:E.key}:R}r.jwtVerify=jwtVerify},13227:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exportJWK=r.exportPKCS8=r.exportSPKI=void 0;let p=s(46521),u=s(46521),h=s(179);async function exportSPKI(t){return(0,p.toSPKI)(t)}async function exportPKCS8(t){return(0,u.toPKCS8)(t)}async function exportJWK(t){return(0,h.default)(t)}r.exportSPKI=exportSPKI,r.exportPKCS8=exportPKCS8,r.exportJWK=exportJWK},56562:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=void 0;let p=s(68714);async function generateKeyPair(t,r){return(0,p.generateKeyPair)(t,r)}r.generateKeyPair=generateKeyPair},45558:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateSecret=void 0;let p=s(68714);async function generateSecret(t,r){return(0,p.generateSecret)(t,r)}r.generateSecret=generateSecret},86194:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.importJWK=r.importPKCS8=r.importX509=r.importSPKI=void 0;let p=s(28110),u=s(46521),h=s(11799),w=s(18662),E=s(86935);async function importSPKI(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,u.fromSPKI)(t,r,s)}async function importX509(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,u.fromX509)(t,r,s)}async function importPKCS8(t,r,s){if("string"!=typeof t||0!==t.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,u.fromPKCS8)(t,r,s)}async function importJWK(t,r,s){var u;if(!(0,E.default)(t))throw TypeError("JWK must be an object");switch(r||(r=t.alg),t.kty){case"oct":if("string"!=typeof t.k||!t.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=s||(s=!0!==t.ext),s)return(0,h.default)({...t,alg:r,ext:null!==(u=t.ext)&&void 0!==u&&u});return(0,p.decode)(t.k);case"RSA":if(void 0!==t.oth)throw new w.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,h.default)({...t,alg:r});default:throw new w.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}r.importSPKI=importSPKI,r.importX509=importX509,r.importPKCS8=importPKCS8,r.importJWK=importJWK},5219:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let p=s(5563),u=s(55197),h=s(22687),w=s(28110);async function wrap(t,r,s,u){let E=t.slice(0,7);u||(u=(0,h.default)(E));let{ciphertext:A,tag:R}=await (0,p.default)(E,s,r,u,new Uint8Array(0));return{encryptedKey:A,iv:(0,w.encode)(u),tag:(0,w.encode)(R)}}async function unwrap(t,r,s,p,h){let w=t.slice(0,7);return(0,u.default)(w,r,s,p,h,new Uint8Array(0))}r.wrap=wrap,r.unwrap=unwrap},9557:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatKdf=r.lengthAndInput=r.uint32be=r.uint64be=r.p2s=r.concat=r.decoder=r.encoder=void 0;let p=s(48177);function concat(...t){let r=t.reduce((t,{length:r})=>t+r,0),s=new Uint8Array(r),p=0;return t.forEach(t=>{s.set(t,p),p+=t.length}),s}function writeUInt32BE(t,r,s){if(r<0||r>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,255&r],s)}function uint32be(t){let r=new Uint8Array(4);return writeUInt32BE(r,t),r}async function concatKdf(t,r,s){let u=Math.ceil((r>>3)/32),h=new Uint8Array(32*u);for(let r=0;r<u;r++){let u=new Uint8Array(4+t.length+s.length);u.set(uint32be(r+1)),u.set(t,4),u.set(s,4+t.length),h.set(await (0,p.default)("sha256",u),32*r)}return h.slice(0,r>>3)}r.encoder=new TextEncoder,r.decoder=new TextDecoder,r.concat=concat,r.p2s=function(t,s){return concat(r.encoder.encode(t),new Uint8Array([0]),s)},r.uint64be=function(t){let r=new Uint8Array(8);return writeUInt32BE(r,Math.floor(t/4294967296),0),writeUInt32BE(r,t%4294967296,4),r},r.uint32be=uint32be,r.lengthAndInput=function(t){return concat(uint32be(t.length),t)},r.concatKdf=concatKdf},65931:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let p=s(18662),u=s(27227);function bitLength(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new p.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}r.bitLength=bitLength,r.default=t=>(0,u.default)(new Uint8Array(bitLength(t)>>3))},42321:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662),u=s(22687);r.default=(t,r)=>{if(r.length<<3!==(0,u.bitLength)(t))throw new p.JWEInvalid("Invalid Initialization Vector length")}},59227:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(68503),u=s(74049),symmetricTypeCheck=(t,r)=>{if(!(r instanceof Uint8Array)){if(!(0,u.default)(r))throw TypeError((0,p.withAlg)(t,r,...u.types,"Uint8Array"));if("secret"!==r.type)throw TypeError(`${u.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(t,r,s)=>{if(!(0,u.default)(r))throw TypeError((0,p.withAlg)(t,r,...u.types));if("secret"===r.type)throw TypeError(`${u.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===s&&"public"===r.type)throw TypeError(`${u.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===s&&"public"===r.type)throw TypeError(`${u.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&"verify"===s&&"private"===r.type)throw TypeError(`${u.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&"encrypt"===s&&"private"===r.type)throw TypeError(`${u.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)};r.default=(t,r,s)=>{let p=t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t);p?symmetricTypeCheck(t,r):asymmetricTypeCheck(t,r,s)}},43395:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662);r.default=function(t){if(!(t instanceof Uint8Array)||t.length<8)throw new p.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},26504:(t,r)=>{"use strict";function unusable(t,r="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function isAlgorithm(t,r){return t.name===r}function getHashLength(t){return parseInt(t.name.slice(4),10)}function checkUsage(t,r){if(r.length&&!r.some(r=>t.usages.includes(r))){let t="CryptoKey does not support this operation, its usages must include ";if(r.length>2){let s=r.pop();t+=`one of ${r.join(", ")}, or ${s}.`}else 2===r.length?t+=`one of ${r[0]} or ${r[1]}.`:t+=`${r[0]}.`;throw TypeError(t)}}Object.defineProperty(r,"__esModule",{value:!0}),r.checkEncCryptoKey=r.checkSigCryptoKey=void 0,r.checkSigCryptoKey=function(t,r,...s){switch(r){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(t.algorithm,"HMAC"))throw unusable("HMAC");let s=parseInt(r.slice(2),10),p=getHashLength(t.algorithm.hash);if(p!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(t.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");let s=parseInt(r.slice(2),10),p=getHashLength(t.algorithm.hash);if(p!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(t.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");let s=parseInt(r.slice(2),10),p=getHashLength(t.algorithm.hash);if(p!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==t.algorithm.name&&"Ed448"!==t.algorithm.name)throw unusable("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(t.algorithm,"ECDSA"))throw unusable("ECDSA");let s=function(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(r),p=t.algorithm.namedCurve;if(p!==s)throw unusable(s,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(t,s)},r.checkEncCryptoKey=function(t,r,...s){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(t.algorithm,"AES-GCM"))throw unusable("AES-GCM");let s=parseInt(r.slice(1,4),10),p=t.algorithm.length;if(p!==s)throw unusable(s,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(t.algorithm,"AES-KW"))throw unusable("AES-KW");let s=parseInt(r.slice(1,4),10),p=t.algorithm.length;if(p!==s)throw unusable(s,"algorithm.length");break}case"ECDH":switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(t.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(t.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");let s=parseInt(r.slice(9),10)||1,p=getHashLength(t.algorithm.hash);if(p!==s)throw unusable(`SHA-${s}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(t,s)}},57571:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(13775),u=s(8514),h=s(85443),w=s(31892),E=s(28110),A=s(18662),R=s(65931),I=s(86194),U=s(59227),N=s(86935),W=s(5219);async function decryptKeyManagement(t,r,s,J,K){switch((0,U.default)(t,r,"decrypt"),t){case"dir":if(void 0!==s)throw new A.JWEInvalid("Encountered unexpected JWE Encrypted Key");return r;case"ECDH-ES":if(void 0!==s)throw new A.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let h,w;if(!(0,N.default)(J.epk))throw new A.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!u.ecdhAllowed(r))throw new A.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let U=await (0,I.importJWK)(J.epk,t);if(void 0!==J.apu){if("string"!=typeof J.apu)throw new A.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{h=(0,E.decode)(J.apu)}catch{throw new A.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==J.apv){if("string"!=typeof J.apv)throw new A.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{w=(0,E.decode)(J.apv)}catch{throw new A.JWEInvalid("Failed to base64url decode the apv")}}let W=await u.deriveKey(U,r,"ECDH-ES"===t?J.enc:t,"ECDH-ES"===t?(0,R.bitLength)(J.enc):parseInt(t.slice(-5,-2),10),h,w);if("ECDH-ES"===t)return W;if(void 0===s)throw new A.JWEInvalid("JWE Encrypted Key missing");return(0,p.unwrap)(t.slice(-6),W,s)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===s)throw new A.JWEInvalid("JWE Encrypted Key missing");return(0,w.decrypt)(t,r,s);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let p;if(void 0===s)throw new A.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof J.p2c)throw new A.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let u=(null==K?void 0:K.maxPBES2Count)||1e4;if(J.p2c>u)throw new A.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof J.p2s)throw new A.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{p=(0,E.decode)(J.p2s)}catch{throw new A.JWEInvalid("Failed to base64url decode the p2s")}return(0,h.decrypt)(t,r,s,J.p2c,p)}case"A128KW":case"A192KW":case"A256KW":if(void 0===s)throw new A.JWEInvalid("JWE Encrypted Key missing");return(0,p.unwrap)(t,r,s);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let p,u;if(void 0===s)throw new A.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof J.iv)throw new A.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof J.tag)throw new A.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{p=(0,E.decode)(J.iv)}catch{throw new A.JWEInvalid("Failed to base64url decode the iv")}try{u=(0,E.decode)(J.tag)}catch{throw new A.JWEInvalid("Failed to base64url decode the tag")}return(0,W.unwrap)(t,r,s,p,u)}default:throw new A.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}r.default=decryptKeyManagement},1658:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(13775),u=s(8514),h=s(85443),w=s(31892),E=s(28110),A=s(65931),R=s(18662),I=s(13227),U=s(59227),N=s(5219);async function encryptKeyManagement(t,r,s,W,J={}){let K,G,X;switch((0,U.default)(t,s,"encrypt"),t){case"dir":X=s;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!u.ecdhAllowed(s))throw new R.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:h,apv:w}=J,{epk:U}=J;U||(U=(await u.generateEpk(s)).privateKey);let{x:N,y:Y,crv:Q,kty:Z}=await (0,I.exportJWK)(U),ee=await u.deriveKey(s,U,"ECDH-ES"===t?r:t,"ECDH-ES"===t?(0,A.bitLength)(r):parseInt(t.slice(-5,-2),10),h,w);if(G={epk:{x:N,crv:Q,kty:Z}},"EC"===Z&&(G.epk.y=Y),h&&(G.apu=(0,E.encode)(h)),w&&(G.apv=(0,E.encode)(w)),"ECDH-ES"===t){X=ee;break}X=W||(0,A.default)(r);let et=t.slice(-6);K=await (0,p.wrap)(et,ee,X);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":X=W||(0,A.default)(r),K=await (0,w.encrypt)(t,s,X);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{X=W||(0,A.default)(r);let{p2c:p,p2s:u}=J;({encryptedKey:K,...G}=await (0,h.encrypt)(t,s,X,p,u));break}case"A128KW":case"A192KW":case"A256KW":X=W||(0,A.default)(r),K=await (0,p.wrap)(t,s,X);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{X=W||(0,A.default)(r);let{iv:p}=J;({encryptedKey:K,...G}=await (0,N.wrap)(t,s,X,p));break}default:throw new R.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:X,encryptedKey:K,parameters:G}}r.default=encryptKeyManagement},1641:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=t=>Math.floor(t.getTime()/1e3)},68503:(t,r)=>{"use strict";function message(t,r,...s){if(s.length>2){let r=s.pop();t+=`one of type ${s.join(", ")}, or ${r}.`}else 2===s.length?t+=`one of type ${s[0]} or ${s[1]}.`:t+=`of type ${s[0]}.`;return null==r?t+=` Received ${r}`:"function"==typeof r&&r.name?t+=` Received function ${r.name}`:"object"==typeof r&&null!=r&&r.constructor&&r.constructor.name&&(t+=` Received an instance of ${r.constructor.name}`),t}Object.defineProperty(r,"__esModule",{value:!0}),r.withAlg=void 0,r.default=(t,...r)=>message("Key must be ",t,...r),r.withAlg=function(t,r,...s){return message(`Key for the ${t} algorithm must be `,r,...s)}},44987:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(...t)=>{let r;let s=t.filter(Boolean);if(0===s.length||1===s.length)return!0;for(let t of s){let s=Object.keys(t);if(!r||0===r.size){r=new Set(s);continue}for(let t of s){if(r.has(t))return!1;r.add(t)}}return!0}},86935:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){if(!("object"==typeof t&&null!==t)||"[object Object]"!==Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}},22687:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let p=s(18662),u=s(27227);function bitLength(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new p.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}r.bitLength=bitLength,r.default=t=>(0,u.default)(new Uint8Array(bitLength(t)>>3))},62651:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662),u=s(9557),h=s(1641),w=s(93012),E=s(86935),normalizeTyp=t=>t.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(t,r)=>"string"==typeof t?r.includes(t):!!Array.isArray(t)&&r.some(Set.prototype.has.bind(new Set(t)));r.default=(t,r,s={})=>{let A,R;let{typ:I}=s;if(I&&("string"!=typeof t.typ||normalizeTyp(t.typ)!==normalizeTyp(I)))throw new p.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{A=JSON.parse(u.decoder.decode(r))}catch{}if(!(0,E.default)(A))throw new p.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:U=[],issuer:N,subject:W,audience:J,maxTokenAge:K}=s;for(let t of(void 0!==K&&U.push("iat"),void 0!==J&&U.push("aud"),void 0!==W&&U.push("sub"),void 0!==N&&U.push("iss"),new Set(U.reverse())))if(!(t in A))throw new p.JWTClaimValidationFailed(`missing required "${t}" claim`,t,"missing");if(N&&!(Array.isArray(N)?N:[N]).includes(A.iss))throw new p.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(W&&A.sub!==W)throw new p.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(J&&!checkAudiencePresence(A.aud,"string"==typeof J?[J]:J))throw new p.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof s.clockTolerance){case"string":R=(0,w.default)(s.clockTolerance);break;case"number":R=s.clockTolerance;break;case"undefined":R=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:G}=s,X=(0,h.default)(G||new Date);if((void 0!==A.iat||K)&&"number"!=typeof A.iat)throw new p.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==A.nbf){if("number"!=typeof A.nbf)throw new p.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(A.nbf>X+R)throw new p.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==A.exp){if("number"!=typeof A.exp)throw new p.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(A.exp<=X-R)throw new p.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(K){let t=X-A.iat,r="number"==typeof K?K:(0,w.default)(K);if(t-R>r)throw new p.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(t<0-R)throw new p.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return A}},93012:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=604800,p=31557600,u=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;r.default=t=>{let r=u.exec(t);if(!r)throw TypeError("Invalid time period format");let h=parseFloat(r[1]),w=r[2].toLowerCase();switch(w){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(h);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*h);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*h);case"day":case"days":case"d":return Math.round(86400*h);case"week":case"weeks":case"w":return Math.round(h*s);default:return Math.round(h*p)}}},79854:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(t,r)=>{if(void 0!==r&&(!Array.isArray(r)||r.some(t=>"string"!=typeof t)))throw TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)}},64580:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662);r.default=function(t,r,s,u,h){let w;if(void 0!==h.crit&&void 0===u.crit)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!u||void 0===u.crit)return new Set;if(!Array.isArray(u.crit)||0===u.crit.length||u.crit.some(t=>"string"!=typeof t||0===t.length))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let E of(w=void 0!==s?new Map([...Object.entries(s),...r.entries()]):r,u.crit)){if(!w.has(E))throw new p.JOSENotSupported(`Extension Header Parameter "${E}" is not recognized`);if(void 0===h[E])throw new t(`Extension Header Parameter "${E}" is missing`);if(w.get(E)&&void 0===u[E])throw new t(`Extension Header Parameter "${E}" MUST be integrity protected`)}return new Set(u.crit)}},13775:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let p=s(14300),u=s(6113),h=s(18662),w=s(9557),E=s(70654),A=s(26504),R=s(63817),I=s(68503),U=s(81608),N=s(74049);function checkKeySize(t,r){if(t.symmetricKeySize<<3!==parseInt(r.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${r}`)}function ensureKeyObject(t,r,s){if((0,R.default)(t))return t;if(t instanceof Uint8Array)return(0,u.createSecretKey)(t);if((0,E.isCryptoKey)(t))return(0,A.checkEncCryptoKey)(t,r,s),u.KeyObject.from(t);throw TypeError((0,I.default)(t,...N.types,"Uint8Array"))}r.wrap=(t,r,s)=>{let E=parseInt(t.slice(1,4),10),A=`aes${E}-wrap`;if(!(0,U.default)(A))throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let R=ensureKeyObject(r,t,"wrapKey");checkKeySize(R,t);let I=(0,u.createCipheriv)(A,R,p.Buffer.alloc(8,166));return(0,w.concat)(I.update(s),I.final())},r.unwrap=(t,r,s)=>{let E=parseInt(t.slice(1,4),10),A=`aes${E}-wrap`;if(!(0,U.default)(A))throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let R=ensureKeyObject(r,t,"unwrapKey");checkKeySize(R,t);let I=(0,u.createDecipheriv)(A,R,p.Buffer.alloc(8,166));return(0,w.concat)(I.update(s),I.final())}},46521:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromX509=r.fromSPKI=r.fromPKCS8=r.toPKCS8=r.toSPKI=void 0;let p=s(6113),u=s(14300),h=s(70654),w=s(63817),E=s(68503),A=s(74049),genericExport=(t,r,s)=>{let u;if((0,h.isCryptoKey)(s)){if(!s.extractable)throw TypeError("CryptoKey is not extractable");u=p.KeyObject.from(s)}else if((0,w.default)(s))u=s;else throw TypeError((0,E.default)(s,...A.types));if(u.type!==t)throw TypeError(`key is not a ${t} key`);return u.export({format:"pem",type:r})};r.toSPKI=t=>genericExport("public","spki",t),r.toPKCS8=t=>genericExport("private","pkcs8",t),r.fromPKCS8=t=>(0,p.createPrivateKey)({key:u.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),r.fromSPKI=t=>(0,p.createPublicKey)({key:u.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),r.fromX509=t=>(0,p.createPublicKey)({key:t,type:"spki",format:"pem"})},59026:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class{constructor(t){if(48!==t[0])throw TypeError();this.buffer=t,this.offset=1;let r=this.decodeLength();if(r!==t.length-this.offset)throw TypeError()}decodeLength(){let t=this.buffer[this.offset++];if(128&t){let r=-129&t;t=0;for(let s=0;s<r;s++)t=t<<8|this.buffer[this.offset+s];this.offset+=r}return t}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let t=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,t--);let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}end(){if(this.offset!==this.buffer.length)throw TypeError()}}},61559:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(14300),u=s(18662),h=p.Buffer.from([0]),w=p.Buffer.from([2]),E=p.Buffer.from([3]),A=p.Buffer.from([48]),R=p.Buffer.from([4]),encodeLength=t=>{if(t<128)return p.Buffer.from([t]);let r=p.Buffer.alloc(5);r.writeUInt32BE(t,1);let s=1;for(;0===r[s];)s++;return r[s-1]=128|5-s,r.slice(s-1)},I=new Map([["P-256",p.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",p.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",p.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",p.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",p.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",p.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",p.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",p.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",p.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);r.default=class{constructor(){this.length=0,this.elements=[]}oidFor(t){let r=I.get(t);if(!r)throw new u.JOSENotSupported("Invalid or unsupported OID");this.elements.push(r),this.length+=r.length}zero(){this.elements.push(w,p.Buffer.from([1]),h),this.length+=3}one(){this.elements.push(w,p.Buffer.from([1]),p.Buffer.from([1])),this.length+=3}unsignedInteger(t){if(128&t[0]){let r=encodeLength(t.length+1);this.elements.push(w,r,h,t),this.length+=2+r.length+t.length}else{let r=0;for(;0===t[r]&&(128&t[r+1])==0;)r++;let s=encodeLength(t.length-r);this.elements.push(w,encodeLength(t.length-r),t.slice(r)),this.length+=1+s.length+t.length-r}}octStr(t){let r=encodeLength(t.length);this.elements.push(R,encodeLength(t.length),t),this.length+=1+r.length+t.length}bitStr(t){let r=encodeLength(t.length+1);this.elements.push(E,encodeLength(t.length+1),h,t),this.length+=1+r.length+t.length+1}add(t){this.elements.push(t),this.length+=t.length}end(t=A){let r=encodeLength(this.length);return p.Buffer.concat([t,r,...this.elements],1+r.length+this.length)}}},28110:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=r.encodeBase64=r.decodeBase64=void 0;let p=s(14300),u=s(9557);p.Buffer.isEncoding("base64url")?r.encode=t=>p.Buffer.from(t).toString("base64url"):r.encode=t=>p.Buffer.from(t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),r.decodeBase64=t=>p.Buffer.from(t,"base64"),r.encodeBase64=t=>p.Buffer.from(t).toString("base64"),r.decode=t=>p.Buffer.from(function(t){let r=t;return r instanceof Uint8Array&&(r=u.decoder.decode(r)),r}(t),"base64")},53411:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(9557);r.default=function(t,r,s,h,w,E){let A=(0,u.concat)(t,r,s,(0,u.uint64be)(t.length<<3)),R=(0,p.createHmac)(`sha${h}`,w);return R.update(A),R.digest().slice(0,E>>3)}},16811:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662),u=s(63817);r.default=(t,r)=>{let s;switch(t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":s=parseInt(t.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":s=parseInt(t.slice(1,4),10);break;default:throw new p.JOSENotSupported(`Content Encryption Algorithm ${t} is not supported either by JOSE or your javascript runtime`)}if(r instanceof Uint8Array){let t=r.byteLength<<3;if(t!==s)throw new p.JWEInvalid(`Invalid Content Encryption Key length. Expected ${s} bits, got ${t} bits`);return}if((0,u.default)(r)&&"secret"===r.type){let t=r.symmetricKeySize<<3;if(t!==s)throw new p.JWEInvalid(`Invalid Content Encryption Key length. Expected ${s} bits, got ${t} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},92664:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setModulusLength=r.weakMap=void 0,r.weakMap=new WeakMap;let getLength=(t,r)=>{let s=t.readUInt8(1);if((128&s)==0)return 0===r?s:getLength(t.subarray(2+s),r-1);let p=127&s;s=0;for(let r=0;r<p;r++){s<<=8;let p=t.readUInt8(2+r);s|=p}return 0===r?s:getLength(t.subarray(2+s),r-1)},getLengthOfSeqIndex=(t,r)=>{let s=t.readUInt8(1);return(128&s)==0?getLength(t.subarray(2),r):getLength(t.subarray(2+(127&s)),r)},getModulusLength=t=>{var s,p;if(r.weakMap.has(t))return r.weakMap.get(t);let u=null!==(p=null===(s=t.asymmetricKeyDetails)||void 0===s?void 0:s.modulusLength)&&void 0!==p?p:getLengthOfSeqIndex(t.export({format:"der",type:"pkcs1"}),"private"===t.type?1:0)-1<<3;return r.weakMap.set(t,u),u};r.setModulusLength=(t,s)=>{r.weakMap.set(t,s)},r.default=(t,r)=>{if(2048>getModulusLength(t))throw TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}},81608:(t,r,s)=>{"use strict";let p;Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113);r.default=t=>(p||(p=new Set((0,u.getCiphers)())),p.has(t))},55197:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(42321),h=s(16811),w=s(9557),E=s(18662),A=s(69035),R=s(53411),I=s(70654),U=s(26504),N=s(63817),W=s(68503),J=s(81608),K=s(74049);r.default=(t,r,s,G,X,Y)=>{let Q;if((0,I.isCryptoKey)(r))(0,U.checkEncCryptoKey)(r,t,"decrypt"),Q=p.KeyObject.from(r);else if(r instanceof Uint8Array||(0,N.default)(r))Q=r;else throw TypeError((0,W.default)(r,...K.types,"Uint8Array"));switch((0,h.default)(t,Q),(0,u.default)(t,G),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(t,r,s,u,h,I){let U,W;let K=parseInt(t.slice(1,4),10);(0,N.default)(r)&&(r=r.export());let G=r.subarray(K>>3),X=r.subarray(0,K>>3),Y=parseInt(t.slice(-3),10),Q=`aes-${K}-cbc`;if(!(0,J.default)(Q))throw new E.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let Z=(0,R.default)(I,u,s,Y,X,K);try{U=(0,A.default)(h,Z)}catch{}if(!U)throw new E.JWEDecryptionFailed;try{let t=(0,p.createDecipheriv)(Q,G,u);W=(0,w.concat)(t.update(s),t.final())}catch{}if(!W)throw new E.JWEDecryptionFailed;return W}(t,Q,s,G,X,Y);case"A128GCM":case"A192GCM":case"A256GCM":return function(t,r,s,u,h,w){let A=parseInt(t.slice(1,4),10),R=`aes-${A}-gcm`;if(!(0,J.default)(R))throw new E.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);try{let t=(0,p.createDecipheriv)(R,r,u,{authTagLength:16});t.setAuthTag(h),w.byteLength&&t.setAAD(w,{plaintextLength:s.length});let E=t.update(s);return t.final(),E}catch{throw new E.JWEDecryptionFailed}}(t,Q,s,G,X,Y);default:throw new E.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},48177:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113);r.default=(t,r)=>(0,p.createHash)(t).update(r).digest()},6285:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662);r.default=function(t){switch(t){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new p.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}},8514:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ecdhAllowed=r.generateEpk=r.deriveKey=void 0;let p=s(6113),u=s(73837),h=s(51755),w=s(9557),E=s(18662),A=s(70654),R=s(26504),I=s(63817),U=s(68503),N=s(74049),W=(0,u.promisify)(p.generateKeyPair);async function deriveKey(t,r,s,u,h=new Uint8Array(0),E=new Uint8Array(0)){let W,J;if((0,A.isCryptoKey)(t))(0,R.checkEncCryptoKey)(t,"ECDH"),W=p.KeyObject.from(t);else if((0,I.default)(t))W=t;else throw TypeError((0,U.default)(t,...N.types));if((0,A.isCryptoKey)(r))(0,R.checkEncCryptoKey)(r,"ECDH","deriveBits"),J=p.KeyObject.from(r);else if((0,I.default)(r))J=r;else throw TypeError((0,U.default)(r,...N.types));let K=(0,w.concat)((0,w.lengthAndInput)(w.encoder.encode(s)),(0,w.lengthAndInput)(h),(0,w.lengthAndInput)(E),(0,w.uint32be)(u)),G=(0,p.diffieHellman)({privateKey:J,publicKey:W});return(0,w.concatKdf)(G,u,K)}async function generateEpk(t){let r;if((0,A.isCryptoKey)(t))r=p.KeyObject.from(t);else if((0,I.default)(t))r=t;else throw TypeError((0,U.default)(t,...N.types));switch(r.asymmetricKeyType){case"x25519":return W("x25519");case"x448":return W("x448");case"ec":{let t=(0,h.default)(r);return W("ec",{namedCurve:t})}default:throw new E.JOSENotSupported("Invalid or unsupported EPK")}}r.deriveKey=deriveKey,r.generateEpk=generateEpk,r.ecdhAllowed=t=>["P-256","P-384","P-521","X25519","X448"].includes((0,h.default)(t))},5563:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(42321),h=s(16811),w=s(9557),E=s(53411),A=s(70654),R=s(26504),I=s(63817),U=s(68503),N=s(18662),W=s(81608),J=s(74049);r.default=(t,r,s,K,G)=>{let X;if((0,A.isCryptoKey)(s))(0,R.checkEncCryptoKey)(s,t,"encrypt"),X=p.KeyObject.from(s);else if(s instanceof Uint8Array||(0,I.default)(s))X=s;else throw TypeError((0,U.default)(s,...J.types,"Uint8Array"));switch((0,h.default)(t,X),(0,u.default)(t,K),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(t,r,s,u,h){let A=parseInt(t.slice(1,4),10);(0,I.default)(s)&&(s=s.export());let R=s.subarray(A>>3),U=s.subarray(0,A>>3),J=`aes-${A}-cbc`;if(!(0,W.default)(J))throw new N.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let K=(0,p.createCipheriv)(J,R,u),G=(0,w.concat)(K.update(r),K.final()),X=parseInt(t.slice(-3),10),Y=(0,E.default)(h,u,G,X,U,A);return{ciphertext:G,tag:Y}}(t,r,X,K,G);case"A128GCM":case"A192GCM":case"A256GCM":return function(t,r,s,u,h){let w=parseInt(t.slice(1,4),10),E=`aes-${w}-gcm`;if(!(0,W.default)(E))throw new N.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let A=(0,p.createCipheriv)(E,s,u,{authTagLength:16});h.byteLength&&A.setAAD(h,{plaintextLength:r.length});let R=A.update(r);A.final();let I=A.getAuthTag();return{ciphertext:R,tag:I}}(t,r,X,K,G);default:throw new N.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},70409:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(13685),u=s(95687),h=s(82361),w=s(18662),E=s(9557),fetchJwks=async(t,r,s)=>{let A;switch(t.protocol){case"https:":A=u.get;break;case"http:":A=p.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:R,headers:I}=s,U=A(t.href,{agent:R,timeout:r,headers:I}),[N]=await Promise.race([(0,h.once)(U,"response"),(0,h.once)(U,"timeout")]);if(!N)throw U.destroy(),new w.JWKSTimeout;if(200!==N.statusCode)throw new w.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let W=[];for await(let t of N)W.push(t);try{return JSON.parse(E.decoder.decode((0,E.concat)(...W)))}catch{throw new w.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};r.default=fetchJwks},71730:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwkImport=r.jwkExport=r.rsaPssParams=r.oneShotCallback=void 0;let[s,p]=process.versions.node.split(".").map(t=>parseInt(t,10));r.oneShotCallback=s>=16||15===s&&p>=13,r.rsaPssParams=!("electron"in process.versions)&&(s>=17||16===s&&p>=9),r.jwkExport=s>=16||15===s&&p>=9,r.jwkImport=s>=16||15===s&&p>=12},68714:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=r.generateSecret=void 0;let p=s(6113),u=s(73837),h=s(27227),w=s(92664),E=s(18662),A=(0,u.promisify)(p.generateKeyPair);async function generateSecret(t,r){let s;switch(t){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":s=parseInt(t.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":s=parseInt(t.slice(1,4),10);break;default:throw new E.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,p.createSecretKey)((0,h.default)(new Uint8Array(s>>3)))}async function generateKeyPair(t,r){var s,p;switch(t){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let t=null!==(s=null==r?void 0:r.modulusLength)&&void 0!==s?s:2048;if("number"!=typeof t||t<2048)throw new E.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let p=await A("rsa",{modulusLength:t,publicExponent:65537});return(0,w.setModulusLength)(p.privateKey,t),(0,w.setModulusLength)(p.publicKey,t),p}case"ES256":return A("ec",{namedCurve:"P-256"});case"ES256K":return A("ec",{namedCurve:"secp256k1"});case"ES384":return A("ec",{namedCurve:"P-384"});case"ES512":return A("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==r?void 0:r.crv){case void 0:case"Ed25519":return A("ed25519");case"Ed448":return A("ed448");default:throw new E.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let u=null!==(p=null==r?void 0:r.crv)&&void 0!==p?p:"P-256";switch(u){case void 0:case"P-256":case"P-384":case"P-521":return A("ec",{namedCurve:u});case"X25519":return A("x25519");case"X448":return A("x448");default:throw new E.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new E.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}r.generateSecret=generateSecret,r.generateKeyPair=generateKeyPair},51755:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setCurve=r.weakMap=void 0;let p=s(14300),u=s(6113),h=s(18662),w=s(70654),E=s(63817),A=s(68503),R=s(74049),I=p.Buffer.from([42,134,72,206,61,3,1,7]),U=p.Buffer.from([43,129,4,0,34]),N=p.Buffer.from([43,129,4,0,35]),W=p.Buffer.from([43,129,4,0,10]);r.weakMap=new WeakMap;let namedCurveToJOSE=t=>{switch(t){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new h.JOSENotSupported("Unsupported key curve for this operation")}},getNamedCurve=(t,s)=>{var p;let J;if((0,w.isCryptoKey)(t))J=u.KeyObject.from(t);else if((0,E.default)(t))J=t;else throw TypeError((0,A.default)(t,...R.types));if("secret"===J.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(J.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${J.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${J.asymmetricKeyType.slice(1)}`;case"ec":{if(r.weakMap.has(J))return r.weakMap.get(J);let t=null===(p=J.asymmetricKeyDetails)||void 0===p?void 0:p.namedCurve;if(t||"private"!==J.type){if(!t){let r=J.export({format:"der",type:"spki"}),s=r[1]<128?14:15,p=r[s],u=r.slice(s+1,s+1+p);if(u.equals(I))t="prime256v1";else if(u.equals(U))t="secp384r1";else if(u.equals(N))t="secp521r1";else if(u.equals(W))t="secp256k1";else throw new h.JOSENotSupported("Unsupported key curve for this operation")}}else t=getNamedCurve((0,u.createPublicKey)(J),!0);if(s)return t;let w=namedCurveToJOSE(t);return r.weakMap.set(J,w),w}default:throw TypeError("Invalid asymmetric key type for this operation")}};r.setCurve=function(t,s){r.weakMap.set(t,s)},r.default=getNamedCurve},5841:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(70654),h=s(26504),w=s(68503),E=s(74049);r.default=function(t,r,s){if(r instanceof Uint8Array){if(!t.startsWith("HS"))throw TypeError((0,w.default)(r,...E.types));return(0,p.createSecretKey)(r)}if(r instanceof p.KeyObject)return r;if((0,u.isCryptoKey)(r))return(0,h.checkSigCryptoKey)(r,t,s),p.KeyObject.from(r);throw TypeError((0,w.default)(r,...E.types,"Uint8Array"))}},18459:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(18662);r.default=function(t){switch(t){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new p.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}},74049:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.types=void 0;let p=s(70654),u=s(63817);r.default=t=>(0,u.default)(t)||(0,p.isCryptoKey)(t);let h=["KeyObject"];r.types=h,(globalThis.CryptoKey||(null===p.default||void 0===p.default?void 0:p.default.CryptoKey))&&h.push("CryptoKey")},63817:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(73837);r.default=u.types.isKeyObject?t=>u.types.isKeyObject(t):t=>null!=t&&t instanceof p.KeyObject},11799:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(14300),u=s(6113),h=s(28110),w=s(18662),E=s(51755),A=s(92664),R=s(61559),I=s(71730);r.default=t=>{if(I.jwkImport&&"oct"!==t.kty)return t.d?(0,u.createPrivateKey)({format:"jwk",key:t}):(0,u.createPublicKey)({format:"jwk",key:t});switch(t.kty){case"oct":return(0,u.createSecretKey)((0,h.decode)(t.k));case"RSA":{let r=new R.default,s=void 0!==t.d,h=p.Buffer.from(t.n,"base64"),w=p.Buffer.from(t.e,"base64");s?(r.zero(),r.unsignedInteger(h),r.unsignedInteger(w),r.unsignedInteger(p.Buffer.from(t.d,"base64")),r.unsignedInteger(p.Buffer.from(t.p,"base64")),r.unsignedInteger(p.Buffer.from(t.q,"base64")),r.unsignedInteger(p.Buffer.from(t.dp,"base64")),r.unsignedInteger(p.Buffer.from(t.dq,"base64")),r.unsignedInteger(p.Buffer.from(t.qi,"base64"))):(r.unsignedInteger(h),r.unsignedInteger(w));let E=r.end(),I={key:E,format:"der",type:"pkcs1"},U=s?(0,u.createPrivateKey)(I):(0,u.createPublicKey)(I);return(0,A.setModulusLength)(U,h.length<<3),U}case"EC":{let r=new R.default,s=void 0!==t.d,h=p.Buffer.concat([p.Buffer.alloc(1,4),p.Buffer.from(t.x,"base64"),p.Buffer.from(t.y,"base64")]);if(s){r.zero();let s=new R.default;s.oidFor("ecPublicKey"),s.oidFor(t.crv),r.add(s.end());let w=new R.default;w.one(),w.octStr(p.Buffer.from(t.d,"base64"));let A=new R.default;A.bitStr(h);let I=A.end(p.Buffer.from([161]));w.add(I);let U=w.end(),N=new R.default;N.add(U);let W=N.end(p.Buffer.from([4]));r.add(W);let J=r.end(),K=(0,u.createPrivateKey)({key:J,format:"der",type:"pkcs8"});return(0,E.setCurve)(K,t.crv),K}let w=new R.default;w.oidFor("ecPublicKey"),w.oidFor(t.crv),r.add(w.end()),r.bitStr(h);let A=r.end(),I=(0,u.createPublicKey)({key:A,format:"der",type:"spki"});return(0,E.setCurve)(I,t.crv),I}case"OKP":{let r=new R.default,s=void 0!==t.d;if(s){r.zero();let s=new R.default;s.oidFor(t.crv),r.add(s.end());let h=new R.default;h.octStr(p.Buffer.from(t.d,"base64"));let w=h.end(p.Buffer.from([4]));r.add(w);let E=r.end();return(0,u.createPrivateKey)({key:E,format:"der",type:"pkcs8"})}let h=new R.default;h.oidFor(t.crv),r.add(h.end()),r.bitStr(p.Buffer.from(t.x,"base64"));let w=r.end();return(0,u.createPublicKey)({key:w,format:"der",type:"spki"})}default:throw new w.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},179:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(28110),h=s(59026),w=s(18662),E=s(51755),A=s(70654),R=s(63817),I=s(68503),U=s(74049),N=s(71730),keyToJWK=t=>{let r;if((0,A.isCryptoKey)(t)){if(!t.extractable)throw TypeError("CryptoKey is not extractable");r=p.KeyObject.from(t)}else if((0,R.default)(t))r=t;else if(t instanceof Uint8Array)return{kty:"oct",k:(0,u.encode)(t)};else throw TypeError((0,I.default)(t,...U.types,"Uint8Array"));if(N.jwkExport){if("secret"!==r.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(r.asymmetricKeyType))throw new w.JOSENotSupported("Unsupported key asymmetricKeyType");return r.export({format:"jwk"})}switch(r.type){case"secret":return{kty:"oct",k:(0,u.encode)(r.export())};case"private":case"public":switch(r.asymmetricKeyType){case"rsa":{let t;let s=r.export({format:"der",type:"pkcs1"}),p=new h.default(s);"private"===r.type&&p.unsignedInteger();let w=(0,u.encode)(p.unsignedInteger()),E=(0,u.encode)(p.unsignedInteger());return"private"===r.type&&(t={d:(0,u.encode)(p.unsignedInteger()),p:(0,u.encode)(p.unsignedInteger()),q:(0,u.encode)(p.unsignedInteger()),dp:(0,u.encode)(p.unsignedInteger()),dq:(0,u.encode)(p.unsignedInteger()),qi:(0,u.encode)(p.unsignedInteger())}),p.end(),{kty:"RSA",n:w,e:E,...t}}case"ec":{let t,s,h;let A=(0,E.default)(r);switch(A){case"secp256k1":t=64,s=33,h=-1;break;case"P-256":t=64,s=36,h=-1;break;case"P-384":t=96,s=35,h=-3;break;case"P-521":t=132,s=35,h=-3;break;default:throw new w.JOSENotSupported("Unsupported curve")}if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"EC",crv:A,x:(0,u.encode)(s.subarray(-t,-t/2)),y:(0,u.encode)(s.subarray(-t/2))}}let R=r.export({type:"pkcs8",format:"der"});return R.length<100&&(s+=h),{...keyToJWK((0,p.createPublicKey)(r)),d:(0,u.encode)(R.subarray(s,s+t/2))}}case"ed25519":case"x25519":{let t=(0,E.default)(r);if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"OKP",crv:t,x:(0,u.encode)(s.subarray(-32))}}let s=r.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,p.createPublicKey)(r)),d:(0,u.encode)(s.subarray(-32))}}case"ed448":case"x448":{let t=(0,E.default)(r);if("public"===r.type){let s=r.export({type:"spki",format:"der"});return{kty:"OKP",crv:t,x:(0,u.encode)(s.subarray("Ed448"===t?-57:-56))}}let s=r.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,p.createPublicKey)(r)),d:(0,u.encode)(s.subarray("Ed448"===t?-57:-56))}}default:throw new w.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new w.JOSENotSupported("Unsupported key type")}};r.default=keyToJWK},47244:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=s(51755),h=s(18662),w=s(92664),E=s(71730),A={padding:p.constants.RSA_PKCS1_PSS_PADDING,saltLength:p.constants.RSA_PSS_SALTLEN_DIGEST},R=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);r.default=function(t,r){switch(t){case"EdDSA":if(!["ed25519","ed448"].includes(r.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return r;case"RS256":case"RS384":case"RS512":if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,w.default)(r,t),r;case E.rsaPssParams&&"PS256":case E.rsaPssParams&&"PS384":case E.rsaPssParams&&"PS512":if("rsa-pss"===r.asymmetricKeyType){let{hashAlgorithm:s,mgf1HashAlgorithm:p,saltLength:u}=r.asymmetricKeyDetails,h=parseInt(t.slice(-3),10);if(void 0!==s&&(s!==`sha${h}`||p!==s))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}`);if(void 0!==u&&u>h>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}`)}else if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,w.default)(r,t),{key:r,...A};case!E.rsaPssParams&&"PS256":case!E.rsaPssParams&&"PS384":case!E.rsaPssParams&&"PS512":if("rsa"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,w.default)(r,t),{key:r,...A};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==r.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let s=(0,u.default)(r),p=R.get(t);if(s!==p)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${p}, got ${s}`);return{dsaEncoding:"ieee-p1363",key:r}}default:throw new h.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}},85443:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let p=s(73837),u=s(6113),h=s(27227),w=s(9557),E=s(28110),A=s(13775),R=s(43395),I=s(70654),U=s(26504),N=s(63817),W=s(68503),J=s(74049),K=(0,p.promisify)(u.pbkdf2);function getPassword(t,r){if((0,N.default)(t))return t.export();if(t instanceof Uint8Array)return t;if((0,I.isCryptoKey)(t))return(0,U.checkEncCryptoKey)(t,r,"deriveBits","deriveKey"),u.KeyObject.from(t).export();throw TypeError((0,W.default)(t,...J.types,"Uint8Array"))}let encrypt=async(t,r,s,p=2048,u=(0,h.default)(new Uint8Array(16)))=>{(0,R.default)(u);let I=(0,w.p2s)(t,u),U=parseInt(t.slice(13,16),10)>>3,N=getPassword(r,t),W=await K(N,I,p,U,`sha${t.slice(8,11)}`),J=await (0,A.wrap)(t.slice(-6),W,s);return{encryptedKey:J,p2c:p,p2s:(0,E.encode)(u)}};r.encrypt=encrypt;let decrypt=async(t,r,s,p,u)=>{(0,R.default)(u);let h=(0,w.p2s)(t,u),E=parseInt(t.slice(13,16),10)>>3,I=getPassword(r,t),U=await K(I,h,p,E,`sha${t.slice(8,11)}`);return(0,A.unwrap)(t.slice(-6),U,s)};r.decrypt=decrypt},27227:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=s(6113);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return p.randomFillSync}})},31892:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let p=s(6113),u=s(92664),h=s(70654),w=s(26504),E=s(63817),A=s(68503),R=s(74049),checkKey=(t,r)=>{if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,u.default)(t,r)},resolvePadding=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return p.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return p.constants.RSA_PKCS1_PADDING;default:return}},resolveOaepHash=t=>{switch(t){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function ensureKeyObject(t,r,...s){if((0,E.default)(t))return t;if((0,h.isCryptoKey)(t))return(0,w.checkEncCryptoKey)(t,r,...s),p.KeyObject.from(t);throw TypeError((0,A.default)(t,...R.types))}r.encrypt=(t,r,s)=>{let u=resolvePadding(t),h=resolveOaepHash(t),w=ensureKeyObject(r,t,"wrapKey","encrypt");return checkKey(w,t),(0,p.publicEncrypt)({key:w,oaepHash:h,padding:u},s)},r.decrypt=(t,r,s)=>{let u=resolvePadding(t),h=resolveOaepHash(t),w=ensureKeyObject(r,t,"unwrapKey","decrypt");return checkKey(w,t),(0,p.privateDecrypt)({key:w,oaepHash:h,padding:u},s)}},83601:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="node:crypto"},31314:(t,r,s)=>{"use strict";let p;Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),h=s(73837),w=s(6285),E=s(18459),A=s(47244),R=s(5841);p=u.sign.length>3?(0,h.promisify)(u.sign):u.sign;let sign=async(t,r,s)=>{let h=(0,R.default)(t,r,"sign");if(t.startsWith("HS")){let r=u.createHmac((0,E.default)(t),h);return r.update(s),r.digest()}return p((0,w.default)(t),s,(0,A.default)(t,h))};r.default=sign},69035:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(6113),u=p.timingSafeEqual;r.default=u},37281:(t,r,s)=>{"use strict";let p;Object.defineProperty(r,"__esModule",{value:!0});let u=s(6113),h=s(73837),w=s(6285),E=s(47244),A=s(31314),R=s(5841),I=s(71730);p=u.verify.length>4&&I.oneShotCallback?(0,h.promisify)(u.verify):u.verify;let verify=async(t,r,s,h)=>{let I=(0,R.default)(t,r,"verify");if(t.startsWith("HS")){let r=await (0,A.default)(t,I,h);try{return u.timingSafeEqual(s,r)}catch{return!1}}let U=(0,w.default)(t),N=(0,E.default)(t,I);try{return await p(U,h,N,s)}catch{return!1}};r.default=verify},70654:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCryptoKey=void 0;let p=s(6113),u=s(73837),h=p.webcrypto;r.default=h,r.isCryptoKey=u.types.isCryptoKey?t=>u.types.isCryptoKey(t):t=>!1},49352:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deflate=r.inflate=void 0;let p=s(73837),u=s(59796),h=s(18662),w=(0,p.promisify)(u.inflateRaw),E=(0,p.promisify)(u.deflateRaw);r.inflate=t=>w(t,{maxOutputLength:25e4}).catch(()=>{throw new h.JWEDecompressionFailed}),r.deflate=t=>E(t)},26673:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=void 0;let p=s(28110);r.encode=p.encode,r.decode=p.decode},10070:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeJwt=void 0;let p=s(26673),u=s(9557),h=s(86935),w=s(18662);r.decodeJwt=function(t){let r,s;if("string"!=typeof t)throw new w.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:E,length:A}=t.split(".");if(5===A)throw new w.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==A)throw new w.JWTInvalid("Invalid JWT");if(!E)throw new w.JWTInvalid("JWTs must contain a payload");try{r=(0,p.decode)(E)}catch{throw new w.JWTInvalid("Failed to base64url decode the payload")}try{s=JSON.parse(u.decoder.decode(r))}catch{throw new w.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,h.default)(s))throw new w.JWTInvalid("Invalid JWT Claims Set");return s}},81315:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeProtectedHeader=void 0;let p=s(26673),u=s(9557),h=s(86935);r.decodeProtectedHeader=function(t){let r;if("string"==typeof t){let s=t.split(".");(3===s.length||5===s.length)&&([r]=s)}else if("object"==typeof t&&t){if("protected"in t)r=t.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof r||!r)throw Error();let t=JSON.parse(u.decoder.decode((0,p.decode)(r)));if(!(0,h.default)(t))throw Error();return t}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},18662:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWSSignatureVerificationFailed=r.JWKSTimeout=r.JWKSMultipleMatchingKeys=r.JWKSNoMatchingKey=r.JWKSInvalid=r.JWKInvalid=r.JWTInvalid=r.JWSInvalid=r.JWEInvalid=r.JWEDecompressionFailed=r.JWEDecryptionFailed=r.JOSENotSupported=r.JOSEAlgNotAllowed=r.JWTExpired=r.JWTClaimValidationFailed=r.JOSEError=void 0;let JOSEError=class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(r=Error.captureStackTrace)||void 0===r||r.call(Error,this,this.constructor)}};r.JOSEError=JOSEError,r.JWTClaimValidationFailed=class extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",s="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=s}},r.JWTExpired=class extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",s="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=s}},r.JOSEAlgNotAllowed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}},r.JOSENotSupported=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}},r.JWEDecryptionFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}},r.JWEDecompressionFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}},r.JWEInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}},r.JWSInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}},r.JWTInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}},r.JWKInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}},r.JWKSInvalid=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}},r.JWKSNoMatchingKey=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}},r.JWKSMultipleMatchingKeys=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}},Symbol.asyncIterator,r.JWKSTimeout=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}},r.JWSSignatureVerificationFailed=class extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}},16628:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=s(83601);r.default=p.default},8605:t=>{"use strict";function plural(t,r,s,p){return Math.round(t/s)+" "+p+(r>=1.5*s?"s":"")}t.exports=function(t,r){r=r||{};var s,p,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===u&&isFinite(t))return r.long?(s=Math.abs(t))>=864e5?plural(t,s,864e5,"day"):s>=36e5?plural(t,s,36e5,"hour"):s>=6e4?plural(t,s,6e4,"minute"):s>=1e3?plural(t,s,1e3,"second"):t+" ms":(p=Math.abs(t))>=864e5?Math.round(t/864e5)+"d":p>=36e5?Math.round(t/36e5)+"h":p>=6e4?Math.round(t/6e4)+"m":p>=1e3?Math.round(t/1e3)+"s":t+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},32133:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.UnsupportedStrategy=r.UnknownError=r.OAuthCallbackError=r.MissingSecret=r.MissingAuthorize=r.MissingAdapterMethods=r.MissingAdapter=r.MissingAPIRoute=r.InvalidCallbackUrl=r.AccountNotLinkedError=void 0,r.adapterErrorHandler=function(t,r){if(t)return Object.keys(t).reduce(function(s,p){return s[p]=(0,h.default)(u.default.mark(function _callee2(){var s,h,w,E,A,R=arguments;return u.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:for(u.prev=0,h=Array(s=R.length),w=0;w<s;w++)h[w]=R[w];return r.debug("adapter_".concat(p),{args:h}),E=t[p],u.next=6,E.apply(void 0,h);case 6:return u.abrupt("return",u.sent);case 9:throw u.prev=9,u.t0=u.catch(0),r.error("adapter_error_".concat(p),u.t0),(A=new W(u.t0)).name="".concat(capitalize(p),"Error"),A;case 15:case"end":return u.stop()}},_callee2,null,[[0,9]])})),s},{})},r.capitalize=capitalize,r.eventsErrorHandler=function(t,r){return Object.keys(t).reduce(function(s,p){return s[p]=(0,h.default)(u.default.mark(function _callee(){var s,h=arguments;return u.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,s=t[p],u.next=4,s.apply(void 0,h);case 4:return u.abrupt("return",u.sent);case 7:u.prev=7,u.t0=u.catch(0),r.error("".concat(upperSnake(p),"_EVENT_ERROR"),u.t0);case 10:case"end":return u.stop()}},_callee,null,[[0,7]])})),s},{})},r.upperSnake=upperSnake;var u=p(s(21264)),h=p(s(48824)),w=p(s(92174)),E=p(s(36707)),A=p(s(91390)),R=p(s(17257)),I=p(s(51327)),U=p(s(52603)),N=p(s(49903));function _callSuper(t,r,s){return r=(0,I.default)(r),(0,R.default)(t,_isNativeReflectConstruct()?Reflect.construct(r,s||[],(0,I.default)(t).constructor):r.apply(t,s))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}var W=r.UnknownError=function(t){function UnknownError(t){var r,s;return(0,E.default)(this,UnknownError),(s=_callSuper(this,UnknownError,[null!==(r=null==t?void 0:t.message)&&void 0!==r?r:t])).name="UnknownError",s.code=t.code,t instanceof Error&&(s.stack=t.stack),s}return(0,U.default)(UnknownError,t),(0,A.default)(UnknownError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,N.default)(Error));function upperSnake(t){return t.replace(/([A-Z])/g,"_$1").toUpperCase()}function capitalize(t){return"".concat(t[0].toUpperCase()).concat(t.slice(1))}r.OAuthCallbackError=function(t){function OAuthCallbackError(){var t;(0,E.default)(this,OAuthCallbackError);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,OAuthCallbackError,[].concat(s)),(0,w.default)(t,"name","OAuthCallbackError"),t}return(0,U.default)(OAuthCallbackError,t),(0,A.default)(OAuthCallbackError)}(W),r.AccountNotLinkedError=function(t){function AccountNotLinkedError(){var t;(0,E.default)(this,AccountNotLinkedError);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,AccountNotLinkedError,[].concat(s)),(0,w.default)(t,"name","AccountNotLinkedError"),t}return(0,U.default)(AccountNotLinkedError,t),(0,A.default)(AccountNotLinkedError)}(W),r.MissingAPIRoute=function(t){function MissingAPIRoute(){var t;(0,E.default)(this,MissingAPIRoute);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,MissingAPIRoute,[].concat(s)),(0,w.default)(t,"name","MissingAPIRouteError"),(0,w.default)(t,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),t}return(0,U.default)(MissingAPIRoute,t),(0,A.default)(MissingAPIRoute)}(W),r.MissingSecret=function(t){function MissingSecret(){var t;(0,E.default)(this,MissingSecret);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,MissingSecret,[].concat(s)),(0,w.default)(t,"name","MissingSecretError"),(0,w.default)(t,"code","NO_SECRET"),t}return(0,U.default)(MissingSecret,t),(0,A.default)(MissingSecret)}(W),r.MissingAuthorize=function(t){function MissingAuthorize(){var t;(0,E.default)(this,MissingAuthorize);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,MissingAuthorize,[].concat(s)),(0,w.default)(t,"name","MissingAuthorizeError"),(0,w.default)(t,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),t}return(0,U.default)(MissingAuthorize,t),(0,A.default)(MissingAuthorize)}(W),r.MissingAdapter=function(t){function MissingAdapter(){var t;(0,E.default)(this,MissingAdapter);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,MissingAdapter,[].concat(s)),(0,w.default)(t,"name","MissingAdapterError"),(0,w.default)(t,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),t}return(0,U.default)(MissingAdapter,t),(0,A.default)(MissingAdapter)}(W),r.MissingAdapterMethods=function(t){function MissingAdapterMethods(){var t;(0,E.default)(this,MissingAdapterMethods);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,MissingAdapterMethods,[].concat(s)),(0,w.default)(t,"name","MissingAdapterMethodsError"),(0,w.default)(t,"code","MISSING_ADAPTER_METHODS_ERROR"),t}return(0,U.default)(MissingAdapterMethods,t),(0,A.default)(MissingAdapterMethods)}(W),r.UnsupportedStrategy=function(t){function UnsupportedStrategy(){var t;(0,E.default)(this,UnsupportedStrategy);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,UnsupportedStrategy,[].concat(s)),(0,w.default)(t,"name","UnsupportedStrategyError"),(0,w.default)(t,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),t}return(0,U.default)(UnsupportedStrategy,t),(0,A.default)(UnsupportedStrategy)}(W),r.InvalidCallbackUrl=function(t){function InvalidCallbackUrl(){var t;(0,E.default)(this,InvalidCallbackUrl);for(var r=arguments.length,s=Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=_callSuper(this,InvalidCallbackUrl,[].concat(s)),(0,w.default)(t,"name","InvalidCallbackUrl"),(0,w.default)(t,"code","INVALID_CALLBACK_URL_ERROR"),t}return(0,U.default)(InvalidCallbackUrl,t),(0,A.default)(InvalidCallbackUrl)}(W)},80749:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.AuthHandler=AuthHandler;var u=_interopRequireWildcard(s(20546)),h=s(72538),w=_interopRequireWildcard(s(93693)),E=p(s(53450)),A=s(22563),R=s(27985),I=s(50358),U=s(95011);function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var p={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var w=u?Object.getOwnPropertyDescriptor(t,h):null;w&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=t[h]}return p.default=t,s&&s.set(t,p),p}async function getBody(t){try{return await t.json()}catch(t){}}async function toInternalRequest(t){var r,s,p,u;if(t instanceof Request){let r=new URL(t.url),w=r.pathname.split("/").slice(3),E=Object.fromEntries(t.headers),A=Object.fromEntries(r.searchParams);return A.nextauth=w,{action:w[0],method:t.method,headers:E,body:await getBody(t),cookies:(0,U.parse)(null!==(s=t.headers.get("cookie"))&&void 0!==s?s:""),providerId:w[1],error:null!==(p=r.searchParams.get("error"))&&void 0!==p?p:w[1],origin:(0,h.detectOrigin)(null!==(u=E["x-forwarded-host"])&&void 0!==u?u:E.host,E["x-forwarded-proto"]),query:A}}let{headers:w}=t,E=null!==(r=null==w?void 0:w["x-forwarded-host"])&&void 0!==r?r:null==w?void 0:w.host;return t.origin=(0,h.detectOrigin)(E,null==w?void 0:w["x-forwarded-proto"]),t}async function AuthHandler(t){var r,s,p,h,U,N,W;let{options:J,req:K}=t,G=await toInternalRequest(K);(0,u.setLogger)(J.logger,J.debug);let X=(0,R.assertConfig)({options:J,req:G});if(Array.isArray(X))X.forEach(u.default.warn);else if(X instanceof Error){if(u.default.error(X.code,X),!["signin","signout","error","verify-request"].includes(G.action)||"GET"!==G.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:t,theme:r}=J,s=(null==t?void 0:t.error)&&(null===(U=G.query)||void 0===U||null===(U=U.callbackUrl)||void 0===U?void 0:U.startsWith(t.error));if(!(null!=t&&t.error)||s){s&&u.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==t?void 0:t.error} should not require authentication`));let p=(0,E.default)({theme:r});return p.error({error:"configuration"})}return{redirect:`${t.error}?error=Configuration`}}let{action:Y,providerId:Q,error:Z,method:ee="GET"}=G,{options:et,cookies:er}=await (0,A.init)({authOptions:J,action:Y,providerId:Q,origin:G.origin,callbackUrl:null!==(r=null===(s=G.body)||void 0===s?void 0:s.callbackUrl)&&void 0!==r?r:null===(p=G.query)||void 0===p?void 0:p.callbackUrl,csrfToken:null===(h=G.body)||void 0===h?void 0:h.csrfToken,cookies:G.cookies,isPost:"POST"===ee}),ei=new I.SessionStore(et.cookies.sessionToken,G,et.logger);if("GET"===ee){let t=(0,E.default)({...et,query:G.query,cookies:er}),{pages:r}=et;switch(Y){case"providers":return await w.providers(et.providers);case"session":{let t=await w.session({options:et,sessionStore:ei});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"}],body:{csrfToken:et.csrfToken},cookies:er};case"signin":if(r.signIn){let t=`${r.signIn}${r.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(et.callbackUrl)}`;return Z&&(t=`${t}&error=${encodeURIComponent(Z)}`),{redirect:t,cookies:er}}return t.signin();case"signout":if(r.signOut)return{redirect:r.signOut,cookies:er};return t.signout();case"callback":if(et.provider){let t=await w.callback({body:G.body,query:G.query,headers:G.headers,cookies:G.cookies,method:ee,options:et,sessionStore:ei});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}break;case"verify-request":if(r.verifyRequest)return{redirect:r.verifyRequest,cookies:er};return t.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(Z))return{redirect:`${et.url}/signin?error=${Z}`,cookies:er};if(r.error)return{redirect:`${r.error}${r.error.includes("?")?"&":"?"}error=${Z}`,cookies:er};return t.error({error:Z})}}else if("POST"===ee)switch(Y){case"signin":if(et.csrfTokenVerified&&et.provider){let t=await w.signin({query:G.query,body:G.body,options:et});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}return{redirect:`${et.url}/signin?csrf=true`,cookies:er};case"signout":if(et.csrfTokenVerified){let t=await w.signout({options:et,sessionStore:ei});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}return{redirect:`${et.url}/signout?csrf=true`,cookies:er};case"callback":if(et.provider){if("credentials"===et.provider.type&&!et.csrfTokenVerified)return{redirect:`${et.url}/signin?csrf=true`,cookies:er};let t=await w.callback({body:G.body,query:G.query,headers:G.headers,cookies:G.cookies,method:ee,options:et,sessionStore:ei});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}break;case"_log":if(J.logger)try{let{code:t,level:r,...s}=null!==(N=G.body)&&void 0!==N?N:{};u.default[r](t,s)}catch(t){u.default.error("LOGGER_ERROR",t)}return{};case"session":if(et.csrfTokenVerified){let t=await w.session({options:et,sessionStore:ei,newSession:null===(W=G.body)||void 0===W?void 0:W.data,isUpdate:!0});return t.cookies&&er.push(...t.cookies),{...t,cookies:er}}return{status:400,body:{},cookies:er}}return{status:400,body:`Error: This action with HTTP ${ee} is not supported by NextAuth.js`}}},22563:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.init=init;var u=s(6113),h=p(s(20546)),w=s(32133),E=p(s(67721)),A=s(49105),R=_interopRequireWildcard(s(50358)),I=_interopRequireWildcard(s(87938)),U=s(11410),N=s(3826),W=s(51454),J=p(s(44254));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}function _interopRequireWildcard(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var p={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var w=u?Object.getOwnPropertyDescriptor(t,h):null;w&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=t[h]}return p.default=t,s&&s.set(t,p),p}async function init({authOptions:t,providerId:r,action:s,origin:p,cookies:K,callbackUrl:G,csrfToken:X,isPost:Y}){var Q,Z;let ee=(0,J.default)(p),et=(0,A.createSecret)({authOptions:t,url:ee}),{providers:er,provider:ei}=(0,E.default)({providers:t.providers,url:ee,providerId:r}),en={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...t,url:ee,action:s,provider:ei,cookies:{...R.defaultCookies(null!==(Q=t.useSecureCookies)&&void 0!==Q?Q:ee.base.startsWith("https://")),...t.cookies},secret:et,providers:er,session:{strategy:t.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>{var t;return null!==(t=null===u.randomUUID||void 0===u.randomUUID?void 0:(0,u.randomUUID)())&&void 0!==t?t:(0,u.randomBytes)(32).toString("hex")},...t.session},jwt:{secret:et,maxAge:2592e3,encode:I.encode,decode:I.decode,...t.jwt},events:(0,w.eventsErrorHandler)(null!==(Z=t.events)&&void 0!==Z?Z:{},h.default),adapter:(0,w.adapterErrorHandler)(t.adapter,h.default),callbacks:{...U.defaultCallbacks,...t.callbacks},logger:h.default,callbackUrl:ee.origin},eo=[],{csrfToken:ea,cookie:es,csrfTokenVerified:ec}=(0,N.createCSRFToken)({options:en,cookieValue:null==K?void 0:K[en.cookies.csrfToken.name],isPost:Y,bodyValue:X});en.csrfToken=ea,en.csrfTokenVerified=ec,es&&eo.push({name:en.cookies.csrfToken.name,value:es,options:en.cookies.csrfToken.options});let{callbackUrl:el,callbackUrlCookie:ep}=await (0,W.createCallbackUrl)({options:en,cookieValue:null==K?void 0:K[en.cookies.callbackUrl.name],paramValue:G});return en.callbackUrl=el,ep&&eo.push({name:en.cookies.callbackUrl.name,value:ep,options:en.cookies.callbackUrl.options}),{options:en,cookies:eo}}},27985:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.assertConfig=function(t){var r,s,p,A,R,I,U;let N,W,J;let{options:K,req:G}=t,X=[];if(!E&&(G.origin||X.push("NEXTAUTH_URL"),K.secret,K.debug&&X.push("DEBUG_ENABLED")),!K.secret)return new u.MissingSecret("Please define a `secret` in production.");if(!(null!==(r=G.query)&&void 0!==r&&r.nextauth)&&!G.action)return new u.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let Y=null===(s=G.query)||void 0===s?void 0:s.callbackUrl,Q=(0,h.default)(G.origin);if(Y&&!isValidHttpUrl(Y,Q.base))return new u.InvalidCallbackUrl(`Invalid callback URL. Received: ${Y}`);let{callbackUrl:Z}=(0,w.defaultCookies)(null!==(p=K.useSecureCookies)&&void 0!==p?p:Q.base.startsWith("https://")),ee=null===(A=G.cookies)||void 0===A?void 0:A[null!==(R=null===(I=K.cookies)||void 0===I||null===(I=I.callbackUrl)||void 0===I?void 0:I.name)&&void 0!==R?R:Z.name];if(ee&&!isValidHttpUrl(ee,Q.base))return new u.InvalidCallbackUrl(`Invalid callback URL. Received: ${ee}`);for(let t of K.providers)"credentials"===t.type?N=!0:"email"===t.type?W=!0:"twitter"===t.id&&"2.0"===t.version&&(J=!0);if(N){let t=(null===(U=K.session)||void 0===U?void 0:U.strategy)==="database",r=!K.providers.some(t=>"credentials"!==t.type);if(t&&r)return new u.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");let s=K.providers.some(t=>"credentials"===t.type&&!t.authorize);if(s)return new u.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(W){let{adapter:t}=K;if(!t)return new u.MissingAdapter("E-mail login requires an adapter.");let r=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(r=>!t[r]);if(r.length)return new u.MissingAdapterMethods(`Required adapter methods were missing: ${r.join(", ")}`)}return E||(J&&X.push("TWITTER_OAUTH_2_BETA"),E=!0),X};var u=s(32133),h=p(s(44254)),w=s(50358);let E=!1;function isValidHttpUrl(t,r){try{return/^https?:/.test(new URL(t,t.startsWith("/")?r:void 0).protocol)}catch(t){return!1}}},62742:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=callbackHandler;var p=s(32133),u=s(49105);async function callbackHandler(t){var r,s,h,w,E,A;let{sessionToken:R,profile:I,account:U,options:N}=t;if(!(null!=U&&U.providerAccountId)||!U.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(U.type))throw Error("Provider not supported");let{adapter:W,jwt:J,events:K,session:{strategy:G,generateSessionToken:X}}=N;if(!W)return{user:I,account:U};let{createUser:Y,updateUser:Q,getUser:Z,getUserByAccount:ee,getUserByEmail:et,linkAccount:er,createSession:ei,getSessionAndUser:en,deleteSession:eo}=W,ea=null,es=null,ec=!1,el="jwt"===G;if(R){if(el)try{(ea=await J.decode({...J,token:R}))&&"sub"in ea&&ea.sub&&(es=await Z(ea.sub))}catch(t){}else{let t=await en(R);t&&(ea=t.session,es=t.user)}}if("email"===U.type){let t=await et(I.email);if(t)(null===(r=es)||void 0===r?void 0:r.id)!==t.id&&!el&&R&&await eo(R),es=await Q({id:t.id,emailVerified:new Date}),await (null===(s=K.updateUser)||void 0===s?void 0:s.call(K,{user:es}));else{let{id:t,...r}={...I,emailVerified:new Date};es=await Y(r),await (null===(h=K.createUser)||void 0===h?void 0:h.call(K,{user:es})),ec=!0}return{session:ea=el?{}:await ei({sessionToken:await X(),userId:es.id,expires:(0,u.fromDate)(N.session.maxAge)}),user:es,isNewUser:ec}}if("oauth"===U.type){let t=await ee({providerAccountId:U.providerAccountId,provider:U.provider});if(t){if(es){if(t.id===es.id)return{session:ea,user:es,isNewUser:ec};throw new p.AccountNotLinkedError("The account is already associated with another user")}return{session:ea=el?{}:await ei({sessionToken:await X(),userId:t.id,expires:(0,u.fromDate)(N.session.maxAge)}),user:t,isNewUser:ec}}{if(es)return await er({...U,userId:es.id}),await (null===(A=K.linkAccount)||void 0===A?void 0:A.call(K,{user:es,account:U,profile:I})),{session:ea,user:es,isNewUser:ec};let t=I.email?await et(I.email):null;if(t){let r=N.provider;if(null!=r&&r.allowDangerousEmailAccountLinking)es=t;else throw new p.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:t,...r}={...I,emailVerified:null};es=await Y(r)}return await (null===(w=K.createUser)||void 0===w?void 0:w.call(K,{user:es})),await er({...U,userId:es.id}),await (null===(E=K.linkAccount)||void 0===E?void 0:E.call(K,{user:es,account:U,profile:I})),{session:ea=el?{}:await ei({sessionToken:await X(),userId:es.id,expires:(0,u.fromDate)(N.session.maxAge)}),user:es,isNewUser:!0}}}throw Error("Unsupported account type")}},51454:(t,r)=>{"use strict";async function createCallbackUrl({options:t,paramValue:r,cookieValue:s}){let{url:p,callbacks:u}=t,h=p.origin;return r?h=await u.redirect({url:r,baseUrl:p.origin}):s&&(h=await u.redirect({url:s,baseUrl:p.origin})),{callbackUrl:h,callbackUrlCookie:h!==s?h:void 0}}Object.defineProperty(r,"__esModule",{value:!0}),r.createCallbackUrl=createCallbackUrl},50358:(t,r)=>{"use strict";function _classPrivateFieldInitSpec(t,r,s){_checkPrivateRedeclaration(t,r),r.set(t,s)}function _checkPrivateRedeclaration(t,r){if(r.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(t,r){return t.get(_assertClassBrand(t,r))}function _classPrivateFieldSet(t,r,s){return t.set(_assertClassBrand(t,r),s),s}function _assertClassBrand(t,r,s){if("function"==typeof t?t===r:t.has(r))return arguments.length<3?r:s;throw TypeError("Private element is not present on this object")}Object.defineProperty(r,"__esModule",{value:!0}),r.SessionStore=void 0,r.defaultCookies=function(t){let r=t?"__Secure-":"";return{sessionToken:{name:`${r}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},callbackUrl:{name:`${r}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},csrfToken:{name:`${t?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},pkceCodeVerifier:{name:`${r}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},state:{name:`${r}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},nonce:{name:`${r}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}}}};var s=new WeakMap,p=new WeakMap,u=new WeakMap,h=new WeakSet;function _chunk(t){let r=Math.ceil(t.value.length/3933);if(1===r)return _classPrivateFieldGet(s,this)[t.name]=t.value,[t];let p=[];for(let u=0;u<r;u++){let r=`${t.name}.${u}`,h=t.value.substr(3933*u,3933);p.push({...t,name:r,value:h}),_classPrivateFieldGet(s,this)[r]=h}return _classPrivateFieldGet(u,this).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:t.value.length,chunks:p.map(t=>t.value.length+163)}),p}function _clean(){let t={};for(let u in _classPrivateFieldGet(s,this)){var r;null===(r=_classPrivateFieldGet(s,this))||void 0===r||delete r[u],t[u]={name:u,value:"",options:{..._classPrivateFieldGet(p,this).options,maxAge:0}}}return t}r.SessionStore=class{constructor(t,r,w){(function(t,r){_checkPrivateRedeclaration(t,r),r.add(t)})(this,h),_classPrivateFieldInitSpec(this,s,{}),_classPrivateFieldInitSpec(this,p,void 0),_classPrivateFieldInitSpec(this,u,void 0),_classPrivateFieldSet(u,this,w),_classPrivateFieldSet(p,this,t);let{cookies:E}=r,{name:A}=t;if("function"==typeof(null==E?void 0:E.getAll))for(let{name:t,value:r}of E.getAll())t.startsWith(A)&&(_classPrivateFieldGet(s,this)[t]=r);else if(E instanceof Map)for(let t of E.keys())t.startsWith(A)&&(_classPrivateFieldGet(s,this)[t]=E.get(t));else for(let t in E)t.startsWith(A)&&(_classPrivateFieldGet(s,this)[t]=E[t])}get value(){let t=Object.keys(_classPrivateFieldGet(s,this)).sort((t,r)=>{var s,p;let u=parseInt(null!==(s=t.split(".").pop())&&void 0!==s?s:"0"),h=parseInt(null!==(p=r.split(".").pop())&&void 0!==p?p:"0");return u-h});return t.map(t=>_classPrivateFieldGet(s,this)[t]).join("")}chunk(t,r){let s=_assertClassBrand(h,this,_clean).call(this),u=_assertClassBrand(h,this,_chunk).call(this,{name:_classPrivateFieldGet(p,this).name,value:t,options:{..._classPrivateFieldGet(p,this).options,...r}});for(let t of u)s[t.name]=t;return Object.values(s)}clean(){return Object.values(_assertClassBrand(h,this,_clean).call(this))}}},3826:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCSRFToken=function({options:t,cookieValue:r,isPost:s,bodyValue:u}){if(r){let[h,w]=r.split("|"),E=(0,p.createHash)("sha256").update(`${h}${t.secret}`).digest("hex");if(w===E){let t=s&&h===u;return{csrfTokenVerified:t,csrfToken:h}}}let h=(0,p.randomBytes)(32).toString("hex"),w=(0,p.createHash)("sha256").update(`${h}${t.secret}`).digest("hex"),E=`${h}|${w}`;return{cookie:E,csrfToken:h}};var p=s(6113)},11410:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultCallbacks=void 0,r.defaultCallbacks={signIn:()=>!0,redirect:({url:t,baseUrl:r})=>t.startsWith("/")?`${r}${t}`:new URL(t).origin===r?t:r,session:({session:t})=>t,jwt:({token:t})=>t}},3727:(t,r)=>{"use strict";async function getAdapterUserFromEmail({email:t,adapter:r}){let{getUserByEmail:s}=r,p=t?await s(t):null;return p||{id:t,email:t,emailVerified:null}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=getAdapterUserFromEmail},81499:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=email;var p=s(6113),u=s(49105);async function email(t,r){var s,h,w,E;let{url:A,adapter:R,provider:I,callbackUrl:U,theme:N}=r,W=null!==(s=await (null===(h=I.generateVerificationToken)||void 0===h?void 0:h.call(I)))&&void 0!==s?s:(0,p.randomBytes)(32).toString("hex"),J=new Date(Date.now()+(null!==(w=I.maxAge)&&void 0!==w?w:86400)*1e3),K=new URLSearchParams({callbackUrl:U,token:W,email:t}),G=`${A}/callback/${I.id}?${K}`;return await Promise.all([I.sendVerificationRequest({identifier:t,token:W,expires:J,url:G,provider:I,theme:N}),null===(E=R.createVerificationToken)||void 0===E?void 0:E.call(R,{identifier:t,token:(0,u.hashToken)(W,r),expires:J})]),`${A}/verify-request?${new URLSearchParams({provider:I.id,type:I.type})}`}},35896:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=getAuthorizationUrl;var p=s(55431),u=s(13715),h=function(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var p={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var w=u?Object.getOwnPropertyDescriptor(t,h):null;w&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=t[h]}return p.default=t,s&&s.set(t,p),p}(s(7519));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}async function getAuthorizationUrl({options:t,query:r}){var s,w,E;let{logger:A,provider:R}=t,I={};if("string"==typeof R.authorization){let t=new URL(R.authorization),r=Object.fromEntries(t.searchParams);I={...I,...r}}else I={...I,...null===(w=R.authorization)||void 0===w?void 0:w.params};if(I={...I,...r},null!==(s=R.version)&&void 0!==s&&s.startsWith("1.")){let r=(0,u.oAuth1Client)(t),s=await r.getOAuthRequestToken(I),p=`${null===(E=R.authorization)||void 0===E?void 0:E.url}?${new URLSearchParams({oauth_token:s.oauth_token,oauth_token_secret:s.oauth_token_secret,...s.params})}`;return u.oAuth1TokenStore.set(s.oauth_token,s.oauth_token_secret),A.debug("GET_AUTHORIZATION_URL",{url:p,provider:R}),{redirect:p}}let U=await (0,p.openidClient)(t),N=I,W=[];await h.state.create(t,W,N),await h.pkce.create(t,W,N),await h.nonce.create(t,W,N);let J=U.authorizationUrl(N);return A.debug("GET_AUTHORIZATION_URL",{url:J,cookies:W,provider:R}),{redirect:J,cookies:W}}},15721:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=oAuthCallback;var p=s(78165),u=s(55431),h=s(13715),w=function(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var p={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var w=u?Object.getOwnPropertyDescriptor(t,h):null;w&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=t[h]}return p.default=t,s&&s.set(t,p),p}(s(7519)),E=s(32133);function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}async function oAuthCallback(t){var r,s,A,R,I,U;let{options:N,query:W,body:J,method:K,cookies:G}=t,{logger:X,provider:Y}=N,Q=null!==(r=null==J?void 0:J.error)&&void 0!==r?r:null==W?void 0:W.error;if(Q){let t=Error(Q);throw X.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:t,error_description:null==W?void 0:W.error_description,providerId:Y.id}),X.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:J}),t}if(null!==(s=Y.version)&&void 0!==s&&s.startsWith("1."))try{let t=await (0,h.oAuth1Client)(N),{oauth_token:r,oauth_verifier:s}=null!=W?W:{},p=await t.getOAuthAccessToken(r,h.oAuth1TokenStore.get(r),s),u=await t.get(Y.profileUrl,p.oauth_token,p.oauth_token_secret);"string"==typeof u&&(u=JSON.parse(u));let w=await getProfile({profile:u,tokens:p,provider:Y,logger:X});return{...w,cookies:[]}}catch(t){throw X.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",t),t}null!=W&&W.oauth_token&&h.oAuth1TokenStore.delete(W.oauth_token);try{let t,r;let s=await (0,u.openidClient)(N),h={},E=[];await w.state.use(G,E,N,h),await w.pkce.use(G,E,N,h),await w.nonce.use(G,E,N,h);let Q={...s.callbackParams({url:`http://n?${new URLSearchParams(W)}`,body:J,method:K}),...null===(A=Y.token)||void 0===A?void 0:A.params};if(null!==(R=Y.token)&&void 0!==R&&R.request){let r=await Y.token.request({provider:Y,params:Q,checks:h,client:s});t=new p.TokenSet(r.tokens)}else t=Y.idToken?await s.callback(Y.callbackUrl,Q,h):await s.oauthCallback(Y.callbackUrl,Q,h);Array.isArray(t.scope)&&(t.scope=t.scope.join(" ")),r=null!==(I=Y.userinfo)&&void 0!==I&&I.request?await Y.userinfo.request({provider:Y,tokens:t,client:s}):Y.idToken?t.claims():await s.userinfo(t,{params:null===(U=Y.userinfo)||void 0===U?void 0:U.params});let Z=await getProfile({profile:r,provider:Y,tokens:t,logger:X});return{...Z,cookies:E}}catch(t){throw new E.OAuthCallbackError(t)}}async function getProfile({profile:t,tokens:r,provider:s,logger:p}){try{var u;p.debug("PROFILE_DATA",{OAuthProfile:t});let h=await s.profile(t,r);if(h.email=null===(u=h.email)||void 0===u?void 0:u.toLowerCase(),!h.id)throw TypeError(`Profile id is missing in ${s.name} OAuth profile response`);return{profile:h,account:{provider:s.id,type:s.type,providerAccountId:h.id.toString(),...r},OAuthProfile:t}}catch(r){p.error("OAUTH_PARSE_PROFILE_ERROR",{error:r,OAuthProfile:t})}}},7519:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pkce=r.nonce=r.PKCE_CODE_CHALLENGE_METHOD=void 0,r.signCookie=signCookie,r.state=void 0;var p=s(78165),u=function(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=_getRequireWildcardCache(r);if(s&&s.has(t))return s.get(t);var p={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&({}).hasOwnProperty.call(t,h)){var w=u?Object.getOwnPropertyDescriptor(t,h):null;w&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=t[h]}return p.default=t,s&&s.set(t,p),p}(s(87938));function _getRequireWildcardCache(t){if("function"!=typeof WeakMap)return null;var r=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(t){return t?s:r})(t)}async function signCookie(t,r,s,p){let{cookies:h,logger:w}=p;w.debug(`CREATE_${t.toUpperCase()}`,{value:r,maxAge:s});let{name:E}=h[t],A=new Date;return A.setTime(A.getTime()+1e3*s),{name:E,value:await u.encode({...p.jwt,maxAge:s,token:{value:r},salt:E}),options:{...h[t].options,expires:A}}}let h=r.PKCE_CODE_CHALLENGE_METHOD="S256";r.pkce={async create(t,r,s){var u,w;if(!(null!==(u=t.provider)&&void 0!==u&&null!==(u=u.checks)&&void 0!==u&&u.includes("pkce")))return;let E=p.generators.codeVerifier(),A=p.generators.codeChallenge(E);s.code_challenge=A,s.code_challenge_method=h;let R=null!==(w=t.cookies.pkceCodeVerifier.options.maxAge)&&void 0!==w?w:900;r.push(await signCookie("pkceCodeVerifier",E,R,t))},async use(t,r,s,p){var h;if(!(null!==(h=s.provider)&&void 0!==h&&null!==(h=h.checks)&&void 0!==h&&h.includes("pkce")))return;let w=null==t?void 0:t[s.cookies.pkceCodeVerifier.name];if(!w)throw TypeError("PKCE code_verifier cookie was missing.");let{name:E}=s.cookies.pkceCodeVerifier,A=await u.decode({...s.jwt,token:w,salt:E});if(!(null!=A&&A.value))throw TypeError("PKCE code_verifier value could not be parsed.");r.push({name:E,value:"",options:{...s.cookies.pkceCodeVerifier.options,maxAge:0}}),p.code_verifier=A.value}},r.state={async create(t,r,s){var u,h;if(!(null!==(u=t.provider.checks)&&void 0!==u&&u.includes("state")))return;let w=p.generators.state();s.state=w;let E=null!==(h=t.cookies.state.options.maxAge)&&void 0!==h?h:900;r.push(await signCookie("state",w,E,t))},async use(t,r,s,p){var h;if(!(null!==(h=s.provider.checks)&&void 0!==h&&h.includes("state")))return;let w=null==t?void 0:t[s.cookies.state.name];if(!w)throw TypeError("State cookie was missing.");let{name:E}=s.cookies.state,A=await u.decode({...s.jwt,token:w,salt:E});if(!(null!=A&&A.value))throw TypeError("State value could not be parsed.");r.push({name:E,value:"",options:{...s.cookies.state.options,maxAge:0}}),p.state=A.value}},r.nonce={async create(t,r,s){var u,h;if(!(null!==(u=t.provider.checks)&&void 0!==u&&u.includes("nonce")))return;let w=p.generators.nonce();s.nonce=w;let E=null!==(h=t.cookies.nonce.options.maxAge)&&void 0!==h?h:900;r.push(await signCookie("nonce",w,E,t))},async use(t,r,s,p){var h;if(!(null!==(h=s.provider)&&void 0!==h&&null!==(h=h.checks)&&void 0!==h&&h.includes("nonce")))return;let w=null==t?void 0:t[s.cookies.nonce.name];if(!w)throw TypeError("Nonce cookie was missing.");let{name:E}=s.cookies.nonce,A=await u.decode({...s.jwt,token:w,salt:E});if(!(null!=A&&A.value))throw TypeError("Nonce value could not be parsed.");r.push({name:E,value:"",options:{...s.cookies.nonce.options,maxAge:0}}),p.nonce=A.value}}},13715:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.oAuth1Client=function(t){var r,s;let u=t.provider,h=new p.OAuth(u.requestTokenUrl,u.accessTokenUrl,u.clientId,u.clientSecret,null!==(r=u.version)&&void 0!==r?r:"1.0",u.callbackUrl,null!==(s=u.encoding)&&void 0!==s?s:"HMAC-SHA1"),w=h.get.bind(h);h.get=async(...t)=>await new Promise((r,s)=>{w(...t,(t,p)=>{if(t)return s(t);r(p)})});let E=h.getOAuthAccessToken.bind(h);h.getOAuthAccessToken=async(...t)=>await new Promise((r,s)=>{E(...t,(t,p,u)=>{if(t)return s(t);r({oauth_token:p,oauth_token_secret:u})})});let A=h.getOAuthRequestToken.bind(h);return h.getOAuthRequestToken=async(t={})=>await new Promise((r,s)=>{A(t,(t,p,u,h)=>{if(t)return s(t);r({oauth_token:p,oauth_token_secret:u,params:h})})}),h},r.oAuth1TokenStore=void 0;var p=s(72369);r.oAuth1TokenStore=new Map},55431:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.openidClient=openidClient;var p=s(78165);async function openidClient(t){let r;let s=t.provider;if(s.httpOptions&&p.custom.setHttpOptionsDefaults(s.httpOptions),s.wellKnown)r=await p.Issuer.discover(s.wellKnown);else{var u,h,w;r=new p.Issuer({issuer:s.issuer,authorization_endpoint:null===(u=s.authorization)||void 0===u?void 0:u.url,token_endpoint:null===(h=s.token)||void 0===h?void 0:h.url,userinfo_endpoint:null===(w=s.userinfo)||void 0===w?void 0:w.url,jwks_uri:s.jwks_endpoint})}let E=new r.Client({client_id:s.clientId,client_secret:s.clientSecret,redirect_uris:[s.callbackUrl],...s.client},s.jwks);return E[p.custom.clock_tolerance]=10,E}},67721:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){let{url:r,providerId:s}=t,u=t.providers.map(({options:t,...s})=>{var u,h;if("oauth"===s.type){let u=normalizeOAuthOptions(s),w=normalizeOAuthOptions(t,!0),E=null!==(h=null==w?void 0:w.id)&&void 0!==h?h:s.id;return(0,p.merge)(u,{...w,signinUrl:`${r}/signin/${E}`,callbackUrl:`${r}/callback/${E}`})}let w=null!==(u=null==t?void 0:t.id)&&void 0!==u?u:s.id;return(0,p.merge)(s,{...t,signinUrl:`${r}/signin/${w}`,callbackUrl:`${r}/callback/${w}`})});return{providers:u,provider:u.find(({id:t})=>t===s)}};var p=s(96300);function normalizeOAuthOptions(t,r=!1){var s,p,u,h,w;if(!t)return;let E=Object.entries(t).reduce((t,[r,s])=>{if(["authorization","token","userinfo"].includes(r)&&"string"==typeof s){var p;let u=new URL(s);t[r]={url:`${u.origin}${u.pathname}`,params:Object.fromEntries(null!==(p=u.searchParams)&&void 0!==p?p:[])}}else t[r]=s;return t},{});return r||null!==(s=E.version)&&void 0!==s&&s.startsWith("1.")||(E.idToken=!!(null!==(p=null!==(u=E.idToken)&&void 0!==u?u:null===(h=E.wellKnown)||void 0===h?void 0:h.includes("openid-configuration"))&&void 0!==p?p:null===(w=E.authorization)||void 0===w||null===(w=w.params)||void 0===w||null===(w=w.scope)||void 0===w?void 0:w.includes("openid")),E.checks||(E.checks=["state"])),E}},49105:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSecret=function(t){var r;let{authOptions:s,url:u}=t;return null!==(r=s.secret)&&void 0!==r?r:(0,p.createHash)("sha256").update(JSON.stringify({...u,...s})).digest("hex")},r.fromDate=function(t,r=Date.now()){return new Date(r+1e3*t)},r.hashToken=function(t,r){var s;let{provider:u,secret:h}=r;return(0,p.createHash)("sha256").update(`${t}${null!==(s=u.secret)&&void 0!==s?s:h}`).digest("hex")};var p=s(6113)},96369:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var r;let{url:s,error:u="default",theme:h}=t,w=`${s}/signin`,E={default:{status:200,heading:"Error",message:(0,p.h)("p",null,(0,p.h)("a",{className:"site",href:null==s?void 0:s.origin},null==s?void 0:s.host))},configuration:{status:500,heading:"Server error",message:(0,p.h)("div",null,(0,p.h)("p",null,"There is a problem with the server configuration."),(0,p.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,p.h)("div",null,(0,p.h)("p",null,"You do not have permission to sign in."),(0,p.h)("p",null,(0,p.h)("a",{className:"button",href:w},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,p.h)("div",null,(0,p.h)("p",null,"The sign in link is no longer valid."),(0,p.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,p.h)("a",{className:"button",href:w},"Sign in")}},{status:A,heading:R,message:I,signin:U}=null!==(r=E[u.toLowerCase()])&&void 0!==r?r:E.default;return{status:A,html:(0,p.h)("div",{className:"error"},(null==h?void 0:h.brandColor)&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==h?void 0:h.brandColor}
        }
      `}}),(0,p.h)("div",{className:"card"},(null==h?void 0:h.logo)&&(0,p.h)("img",{src:h.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,R),(0,p.h)("div",{className:"message"},I),U))}};var p=s(22838)},53450:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){let{url:r,theme:s,query:p,cookies:I}=t;function send({html:t,title:r,status:p}){var h;return{cookies:I,status:p,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,R.default)()}</style><title>${r}</title></head><body class="__next-auth-theme-${null!==(h=null==s?void 0:s.colorScheme)&&void 0!==h?h:"auto"}"><div class="page">${(0,u.default)(t)}</div></body></html>`}}return{signin:r=>send({html:(0,h.default)({csrfToken:t.csrfToken,providers:t.providers,callbackUrl:t.callbackUrl,theme:s,...p,...r}),title:"Sign In"}),signout:p=>send({html:(0,w.default)({csrfToken:t.csrfToken,url:r,theme:s,...p}),title:"Sign Out"}),verifyRequest:t=>send({html:(0,E.default)({url:r,theme:s,...t}),title:"Verify Request"}),error:t=>send({...(0,A.default)({url:r,theme:s,...t}),title:"Error"})}};var u=p(s(54412)),h=p(s(29181)),w=p(s(30264)),E=p(s(60923)),A=p(s(96369)),R=p(s(67630))},29181:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var r;let{csrfToken:s,providers:p,callbackUrl:w,theme:E,email:A,error:R}=t,I=p.filter(t=>"oauth"===t.type||"email"===t.type||"credentials"===t.type&&!!t.credentials);"undefined"!=typeof document&&E.buttonText&&document.documentElement.style.setProperty("--button-text-color",E.buttonText),"undefined"!=typeof document&&E.brandColor&&document.documentElement.style.setProperty("--brand-color",E.brandColor);let U={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},N=R&&(null!==(r=U[R])&&void 0!==r?r:U.default),W="https://authjs.dev/img/providers";return(0,u.h)("div",{className:"signin"},E.brandColor&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${E.brandColor}
        }
      `}}),E.buttonText&&(0,u.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${E.buttonText}
        }
      `}}),(0,u.h)("div",{className:"card"},E.logo&&(0,u.h)("img",{src:E.logo,alt:"Logo",className:"logo"}),N&&(0,u.h)("div",{className:"error"},(0,u.h)("p",null,N)),I.map((t,r)=>{let p,E,R,U,N,J;if("oauth"===t.type){var K;({bg:p="",text:E="",logo:R="",bgDark:N=p,textDark:J=E,logoDark:U=""}=null!==(K=t.style)&&void 0!==K?K:{}),R=R.startsWith("/")?`${W}${R}`:R,(U=U.startsWith("/")?`${W}${U}`:U||R)||(U=R)}return(0,u.h)("div",{key:t.id,className:"provider"},"oauth"===t.type&&(0,u.h)("form",{action:t.signinUrl,method:"POST"},(0,u.h)("input",{type:"hidden",name:"csrfToken",value:s}),w&&(0,u.h)("input",{type:"hidden",name:"callbackUrl",value:w}),(0,u.h)("button",{type:"submit",className:"button",style:{"--provider-bg":p,"--provider-dark-bg":N,"--provider-color":E,"--provider-dark-color":J,"--provider-bg-hover":hexToRgba(p,.8),"--provider-dark-bg-hover":hexToRgba(N,.8)}},R&&(0,u.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${R.startsWith("/")?W:""}${R}`}),U&&(0,u.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${R.startsWith("/")?W:""}${U}`}),(0,u.h)("span",null,"Sign in with ",t.name))),("email"===t.type||"credentials"===t.type)&&r>0&&"email"!==I[r-1].type&&"credentials"!==I[r-1].type&&(0,u.h)("hr",null),"email"===t.type&&(0,u.h)("form",{action:t.signinUrl,method:"POST"},(0,u.h)("input",{type:"hidden",name:"csrfToken",value:s}),(0,u.h)("label",{className:"section-header",htmlFor:`input-email-for-${t.id}-provider`},"Email"),(0,u.h)("input",{id:`input-email-for-${t.id}-provider`,autoFocus:!0,type:"email",name:"email",value:A,placeholder:"email@example.com",required:!0}),(0,u.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",t.name)),"credentials"===t.type&&(0,u.h)("form",{action:t.callbackUrl,method:"POST"},(0,u.h)("input",{type:"hidden",name:"csrfToken",value:s}),Object.keys(t.credentials).map(r=>{var s,p,w;return(0,u.h)("div",{key:`input-group-${t.id}`},(0,u.h)("label",{className:"section-header",htmlFor:`input-${r}-for-${t.id}-provider`},null!==(s=t.credentials[r].label)&&void 0!==s?s:r),(0,u.h)("input",(0,h.default)({name:r,id:`input-${r}-for-${t.id}-provider`,type:null!==(p=t.credentials[r].type)&&void 0!==p?p:"text",placeholder:null!==(w=t.credentials[r].placeholder)&&void 0!==w?w:""},t.credentials[r])))}),(0,u.h)("button",{type:"submit"},"Sign in with ",t.name)),("email"===t.type||"credentials"===t.type)&&r+1<I.length&&(0,u.h)("hr",null))})))};var u=s(22838),h=p(s(14432));function hexToRgba(t,r=1){if(!t)return;3===(t=t.replace(/^#/,"")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);let s=parseInt(t,16);r=Math.min(Math.max(r,0),1);let p=`rgba(${s>>16&255}, ${s>>8&255}, ${255&s}, ${r})`;return p}},30264:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){let{url:r,csrfToken:s,theme:u}=t;return(0,p.h)("div",{className:"signout"},u.brandColor&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${u.brandColor}
        }
      `}}),u.buttonText&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${u.buttonText}
        }
      `}}),(0,p.h)("div",{className:"card"},u.logo&&(0,p.h)("img",{src:u.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,"Signout"),(0,p.h)("p",null,"Are you sure you want to sign out?"),(0,p.h)("form",{action:`${r}/signout`,method:"POST"},(0,p.h)("input",{type:"hidden",name:"csrfToken",value:s}),(0,p.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))};var p=s(22838)},60923:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){let{url:r,theme:s}=t;return(0,p.h)("div",{className:"verify-request"},s.brandColor&&(0,p.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${s.brandColor}
        }
      `}}),(0,p.h)("div",{className:"card"},s.logo&&(0,p.h)("img",{src:s.logo,alt:"Logo",className:"logo"}),(0,p.h)("h1",null,"Check your email"),(0,p.h)("p",null,"A sign in link has been sent to your email address."),(0,p.h)("p",null,(0,p.h)("a",{className:"site",href:r.origin},r.host))))};var p=s(22838)},38840:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.default=callback;var u=p(s(15721)),h=p(s(62742)),w=s(49105),E=p(s(3727));async function callback(t){var r,s,p,A,R,I;let{options:U,query:N,body:W,method:J,headers:K,sessionStore:G}=t,{provider:X,adapter:Y,url:Q,callbackUrl:Z,pages:ee,jwt:et,events:er,callbacks:ei,session:{strategy:en,maxAge:eo},logger:ea}=U,es=[],ec="jwt"===en;if("oauth"===X.type)try{let{profile:p,account:w,OAuthProfile:E,cookies:A}=await (0,u.default)({query:N,body:W,method:J,options:U,cookies:t.cookies});A.length&&es.push(...A);try{if(ea.debug("OAUTH_CALLBACK_RESPONSE",{profile:p,account:w,OAuthProfile:E}),!p||!w||!E)return{redirect:`${Q}/signin`,cookies:es};let t=p;if(Y){let{getUserByAccount:r}=Y,s=await r({providerAccountId:w.providerAccountId,provider:X.id});s&&(t=s)}try{let r=await ei.signIn({user:t,account:w,profile:E});if(!r)return{redirect:`${Q}/error?error=AccessDenied`,cookies:es};if("string"==typeof r)return{redirect:r,cookies:es}}catch(t){return{redirect:`${Q}/error?error=${encodeURIComponent(t.message)}`,cookies:es}}let{user:u,session:A,isNewUser:R}=await (0,h.default)({sessionToken:G.value,profile:p,account:w,options:U});if(ec){let t={name:u.name,email:u.email,picture:u.image,sub:null===(s=u.id)||void 0===s?void 0:s.toString()},r=await ei.jwt({token:t,user:u,account:w,profile:E,isNewUser:R,trigger:R?"signUp":"signIn"}),p=await et.encode({...et,token:r}),h=new Date;h.setTime(h.getTime()+1e3*eo);let A=G.chunk(p,{expires:h});es.push(...A)}else es.push({name:U.cookies.sessionToken.name,value:A.sessionToken,options:{...U.cookies.sessionToken.options,expires:A.expires}});if(await (null===(r=er.signIn)||void 0===r?void 0:r.call(er,{user:u,account:w,profile:p,isNewUser:R})),R&&ee.newUser)return{redirect:`${ee.newUser}${ee.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(Z)}`,cookies:es};return{redirect:Z,cookies:es}}catch(t){if("AccountNotLinkedError"===t.name)return{redirect:`${Q}/error?error=OAuthAccountNotLinked`,cookies:es};if("CreateUserError"===t.name)return{redirect:`${Q}/error?error=OAuthCreateAccount`,cookies:es};return ea.error("OAUTH_CALLBACK_HANDLER_ERROR",t),{redirect:`${Q}/error?error=Callback`,cookies:es}}}catch(t){if("OAuthCallbackError"===t.name)return ea.error("OAUTH_CALLBACK_ERROR",{error:t,providerId:X.id}),{redirect:`${Q}/error?error=OAuthCallback`,cookies:es};return ea.error("OAUTH_CALLBACK_ERROR",t),{redirect:`${Q}/error?error=Callback`,cookies:es}}else if("email"===X.type)try{let t=null==N?void 0:N.token,r=null==N?void 0:N.email;if(!t)return{redirect:`${Q}/error?error=configuration`,cookies:es};let s=await Y.useVerificationToken({identifier:r,token:(0,w.hashToken)(t,U)}),u=!s||s.expires.valueOf()<Date.now()||r&&s.identifier!==r;if(u)return{redirect:`${Q}/error?error=Verification`,cookies:es};let R=await (0,E.default)({email:s.identifier,adapter:Y}),I={providerAccountId:R.email,type:"email",provider:X.id};try{let t=await ei.signIn({user:R,account:I});if(!t)return{redirect:`${Q}/error?error=AccessDenied`,cookies:es};if("string"==typeof t)return{redirect:t,cookies:es}}catch(t){return{redirect:`${Q}/error?error=${encodeURIComponent(t.message)}`,cookies:es}}let{user:W,session:J,isNewUser:K}=await (0,h.default)({sessionToken:G.value,profile:R,account:I,options:U});if(ec){let t={name:W.name,email:W.email,picture:W.image,sub:null===(A=W.id)||void 0===A?void 0:A.toString()},r=await ei.jwt({token:t,user:W,account:I,isNewUser:K,trigger:K?"signUp":"signIn"}),s=await et.encode({...et,token:r}),p=new Date;p.setTime(p.getTime()+1e3*eo);let u=G.chunk(s,{expires:p});es.push(...u)}else es.push({name:U.cookies.sessionToken.name,value:J.sessionToken,options:{...U.cookies.sessionToken.options,expires:J.expires}});if(await (null===(p=er.signIn)||void 0===p?void 0:p.call(er,{user:W,account:I,isNewUser:K})),K&&ee.newUser)return{redirect:`${ee.newUser}${ee.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(Z)}`,cookies:es};return{redirect:Z,cookies:es}}catch(t){if("CreateUserError"===t.name)return{redirect:`${Q}/error?error=EmailCreateAccount`,cookies:es};return ea.error("CALLBACK_EMAIL_ERROR",t),{redirect:`${Q}/error?error=Callback`,cookies:es}}else if("credentials"===X.type&&"POST"===J){let t;try{if(!(t=await X.authorize(W,{query:N,body:W,headers:K,method:J})))return{status:401,redirect:`${Q}/error?${new URLSearchParams({error:"CredentialsSignin",provider:X.id})}`,cookies:es}}catch(t){return{status:401,redirect:`${Q}/error?error=${encodeURIComponent(t.message)}`,cookies:es}}let r={providerAccountId:t.id,type:"credentials",provider:X.id};try{let s=await ei.signIn({user:t,account:r,credentials:W});if(!s)return{status:403,redirect:`${Q}/error?error=AccessDenied`,cookies:es};if("string"==typeof s)return{redirect:s,cookies:es}}catch(t){return{redirect:`${Q}/error?error=${encodeURIComponent(t.message)}`,cookies:es}}let s={name:t.name,email:t.email,picture:t.image,sub:null===(R=t.id)||void 0===R?void 0:R.toString()},p=await ei.jwt({token:s,user:t,account:r,isNewUser:!1,trigger:"signIn"}),u=await et.encode({...et,token:p}),h=new Date;h.setTime(h.getTime()+1e3*eo);let w=G.chunk(u,{expires:h});return es.push(...w),await (null===(I=er.signIn)||void 0===I?void 0:I.call(er,{user:t,account:r})),{redirect:Z,cookies:es}}return{status:500,body:`Error: Callback for provider type ${X.type} not supported`,cookies:es}}},93693:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"callback",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"providers",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"session",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"signin",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"signout",{enumerable:!0,get:function(){return w.default}});var u=p(s(38840)),h=p(s(68966)),w=p(s(15681)),E=p(s(14393)),A=p(s(4137))},4137:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return{headers:[{key:"Content-Type",value:"application/json"}],body:t.reduce((t,{id:r,name:s,type:p,signinUrl:u,callbackUrl:h})=>(t[r]={id:r,name:s,type:p,signinUrl:u,callbackUrl:h},t),{})}}},14393:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=session;var p=s(49105);async function session(t){var r,s,u,h,w,E;let{options:A,sessionStore:R,newSession:I,isUpdate:U}=t,{adapter:N,jwt:W,events:J,callbacks:K,logger:G,session:{strategy:X,maxAge:Y}}=A,Q={body:{},headers:[{key:"Content-Type",value:"application/json"}],cookies:[]},Z=R.value;if(!Z)return Q;if("jwt"===X)try{let t=await W.decode({...W,token:Z});if(!t)throw Error("JWT invalid");let u=await K.jwt({token:t,...U&&{trigger:"update"},session:I}),h=(0,p.fromDate)(Y),w=await K.session({session:{user:{name:null==t?void 0:t.name,email:null==t?void 0:t.email,image:null==t?void 0:t.picture},expires:h.toISOString()},token:u});Q.body=w;let E=await W.encode({...W,token:u,maxAge:A.session.maxAge}),N=R.chunk(E,{expires:h});null===(r=Q.cookies)||void 0===r||r.push(...N),await (null===(s=J.session)||void 0===s?void 0:s.call(J,{session:w,token:u}))}catch(t){G.error("JWT_SESSION_ERROR",t),null===(u=Q.cookies)||void 0===u||u.push(...R.clean())}else try{let{getSessionAndUser:t,deleteSession:r,updateSession:s}=N,u=await t(Z);if(u&&u.session.expires.valueOf()<Date.now()&&(await r(Z),u=null),u){let{user:t,session:r}=u,E=A.session.updateAge,R=r.expires.valueOf()-1e3*Y+1e3*E,N=(0,p.fromDate)(Y);R<=Date.now()&&await s({sessionToken:Z,expires:N});let W=await K.session({session:{user:{name:t.name,email:t.email,image:t.image},expires:r.expires.toISOString()},user:t,newSession:I,...U?{trigger:"update"}:{}});Q.body=W,null===(h=Q.cookies)||void 0===h||h.push({name:A.cookies.sessionToken.name,value:Z,options:{...A.cookies.sessionToken.options,expires:N}}),await (null===(w=J.session)||void 0===w?void 0:w.call(J,{session:W}))}else Z&&(null===(E=Q.cookies)||void 0===E||E.push(...R.clean()))}catch(t){G.error("SESSION_ERROR",t)}return Q}},68966:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.default=signin;var u=p(s(35896)),h=p(s(81499)),w=p(s(3727));async function signin(t){let{options:r,query:s,body:p}=t,{url:E,callbacks:A,logger:R,provider:I}=r;if(!I.type)return{status:500,text:`Error: Type not specified for ${I.name}`};if("oauth"===I.type)try{let t=await (0,u.default)({options:r,query:s});return t}catch(t){return R.error("SIGNIN_OAUTH_ERROR",{error:t,providerId:I.id}),{redirect:`${E}/error?error=OAuthSignin`}}else if("email"===I.type){var U;let t=null==p?void 0:p.email;if(!t)return{redirect:`${E}/error?error=EmailSignin`};let s=null!==(U=I.normalizeIdentifier)&&void 0!==U?U:t=>{let[r,s]=t.toLowerCase().trim().split("@");return s=s.split(",")[0],`${r}@${s}`};try{t=s(null==p?void 0:p.email)}catch(t){return R.error("SIGNIN_EMAIL_ERROR",{error:t,providerId:I.id}),{redirect:`${E}/error?error=EmailSignin`}}let u=await (0,w.default)({email:t,adapter:r.adapter}),N={providerAccountId:t,userId:t,type:"email",provider:I.id};try{let t=await A.signIn({user:u,account:N,email:{verificationRequest:!0}});if(!t)return{redirect:`${E}/error?error=AccessDenied`};if("string"==typeof t)return{redirect:t}}catch(t){return{redirect:`${E}/error?${new URLSearchParams({error:t})}`}}try{let s=await (0,h.default)(t,r);return{redirect:s}}catch(t){return R.error("SIGNIN_EMAIL_ERROR",{error:t,providerId:I.id}),{redirect:`${E}/error?error=EmailSignin`}}}return{redirect:`${E}/signin`}}},15681:(t,r)=>{"use strict";async function signout(t){var r,s;let{options:p,sessionStore:u}=t,{adapter:h,events:w,jwt:E,callbackUrl:A,logger:R,session:I}=p,U=null==u?void 0:u.value;if(!U)return{redirect:A};if("jwt"===I.strategy)try{let t=await E.decode({...E,token:U});await (null===(r=w.signOut)||void 0===r?void 0:r.call(w,{token:t}))}catch(t){R.error("SIGNOUT_ERROR",t)}else try{let t=await h.deleteSession(U);await (null===(s=w.signOut)||void 0===s?void 0:s.call(w,{session:t}))}catch(t){R.error("SIGNOUT_ERROR",t)}let N=u.clean();return{redirect:A,cookies:N}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=signout},67630:t=>{"use strict";t.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},87938:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0});var u={encode:!0,decode:!0,getToken:!0};r.decode=decode,r.encode=encode,r.getToken=getToken;var h=s(92473),w=p(s(85808)),E=s(62903),A=s(50358),R=s(73725);Object.keys(R).forEach(function(t){!("default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(u,t))&&(t in r&&r[t]===R[t]||Object.defineProperty(r,t,{enumerable:!0,get:function(){return R[t]}}))});let now=()=>Date.now()/1e3|0;async function encode(t){let{token:r={},secret:s,maxAge:p=2592e3,salt:u=""}=t,w=await getDerivedEncryptionKey(s,u);return await new h.EncryptJWT(r).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(now()+p).setJti((0,E.v4)()).encrypt(w)}async function decode(t){let{token:r,secret:s,salt:p=""}=t;if(!r)return null;let u=await getDerivedEncryptionKey(s,p),{payload:w}=await (0,h.jwtDecrypt)(r,u,{clockTolerance:15});return w}async function getToken(t){var r,s,p,u;let{req:h,secureCookie:w=null!==(r=null===(s=process.env.NEXTAUTH_URL)||void 0===s?void 0:s.startsWith("https://"))&&void 0!==r?r:!!process.env.VERCEL,cookieName:E=w?"__Secure-next-auth.session-token":"next-auth.session-token",raw:R,decode:I=decode,logger:U=console,secret:N=null!==(p=process.env.NEXTAUTH_SECRET)&&void 0!==p?p:process.env.AUTH_SECRET}=t;if(!h)throw Error("Must pass `req` to JWT getToken()");let W=new A.SessionStore({name:E,options:{secure:w}},{cookies:h.cookies,headers:h.headers},U),J=W.value,K=h.headers instanceof Headers?h.headers.get("authorization"):null===(u=h.headers)||void 0===u?void 0:u.authorization;if(!J&&(null==K?void 0:K.split(" ")[0])==="Bearer"){let t=K.split(" ")[1];J=decodeURIComponent(t)}if(!J)return null;if(R)return J;try{return await I({token:J,secret:N})}catch(t){return null}}async function getDerivedEncryptionKey(t,r){return await (0,w.default)("sha256",t,r,`NextAuth.js Generated Encryption Key${r?` (${r})`:""}`,32)}},73725:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},40674:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getServerSession=getServerSession,r.unstable_getServerSession=unstable_getServerSession;var p=s(80749),u=s(30515);async function NextAuthApiHandler(t,r,s){var h,w,E,A,R,I,U,N,W;let{nextauth:J,...K}=t.query;null!==(h=s.secret)&&void 0!==h||(s.secret=null!==(w=null!==(E=null===(A=s.jwt)||void 0===A?void 0:A.secret)&&void 0!==E?E:process.env.NEXTAUTH_SECRET)&&void 0!==w?w:process.env.AUTH_SECRET);let G=await (0,p.AuthHandler)({req:{body:t.body,query:K,cookies:t.cookies,headers:t.headers,method:t.method,action:null==J?void 0:J[0],providerId:null==J?void 0:J[1],error:null!==(R=t.query.error)&&void 0!==R?R:null==J?void 0:J[1]},options:s});if(r.status(null!==(I=G.status)&&void 0!==I?I:200),null===(U=G.cookies)||void 0===U||U.forEach(t=>(0,u.setCookie)(r,t)),null===(N=G.headers)||void 0===N||N.forEach(t=>r.setHeader(t.key,t.value)),G.redirect){if((null===(W=t.body)||void 0===W?void 0:W.json)!=="true"){r.status(302).setHeader("Location",G.redirect),r.end();return}return r.json({url:G.redirect})}return r.send(G.body)}async function NextAuthRouteHandler(t,r,h){var w,E,A,R;null!==(w=h.secret)&&void 0!==w||(h.secret=null!==(E=process.env.NEXTAUTH_SECRET)&&void 0!==E?E:process.env.AUTH_SECRET);let{headers:I,cookies:U}=s(24596),N=null===(A=await r.params)||void 0===A?void 0:A.nextauth,W=Object.fromEntries(t.nextUrl.searchParams),J=await (0,u.getBody)(t),K=await (0,p.AuthHandler)({req:{body:J,query:W,cookies:Object.fromEntries((await U()).getAll().map(t=>[t.name,t.value])),headers:Object.fromEntries(await I()),method:t.method,action:null==N?void 0:N[0],providerId:null==N?void 0:N[1],error:null!==(R=W.error)&&void 0!==R?R:null==N?void 0:N[1]},options:h}),G=(0,u.toResponse)(K),X=G.headers.get("Location");return(null==J?void 0:J.json)==="true"&&X?(G.headers.delete("Location"),G.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:X}),{status:K.status,headers:G.headers})):G}async function getServerSession(...t){var r,h,w;let E,A,R;let I=0===t.length||1===t.length;if(I){R=Object.assign({},t[0],{providers:[]});let{headers:r,cookies:p}=s(24596);E={headers:Object.fromEntries(await r()),cookies:Object.fromEntries((await p()).getAll().map(t=>[t.name,t.value]))},A={getHeader(){},setCookie(){},setHeader(){}}}else E=t[0],A=t[1],R=Object.assign({},t[2],{providers:[]});null!==(h=(r=R).secret)&&void 0!==h||(r.secret=null!==(w=process.env.NEXTAUTH_SECRET)&&void 0!==w?w:process.env.AUTH_SECRET);let U=await (0,p.AuthHandler)({options:R,req:{action:"session",method:"GET",cookies:E.cookies,headers:E.headers}}),{body:N,cookies:W,status:J=200}=U;if(null==W||W.forEach(t=>(0,u.setCookie)(A,t)),N&&"string"!=typeof N&&Object.keys(N).length){if(200===J)return I&&delete N.expires,N;throw Error(N.message)}return null}async function unstable_getServerSession(...t){return await getServerSession(...t)}r.default=function(...t){var r;return 1===t.length?async(r,s)=>null!=s&&s.params?await NextAuthRouteHandler(r,s,t[0]):await NextAuthApiHandler(r,s,t[0]):null!==(r=t[1])&&void 0!==r&&r.params?NextAuthRouteHandler(...t):NextAuthApiHandler(...t)}},30515:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBody=getBody,r.setCookie=function(t,r){var s;let u=null!==(s=t.getHeader("Set-Cookie"))&&void 0!==s?s:[];Array.isArray(u)||(u=[u]);let{name:h,value:w,options:E}=r,A=(0,p.serialize)(h,w,E);u.push(A),t.setHeader("Set-Cookie",u)},r.toResponse=function(t){var r,s,u;let h=new Headers(null===(r=t.headers)||void 0===r?void 0:r.reduce((t,{key:r,value:s})=>(t[r]=s,t),{}));null===(s=t.cookies)||void 0===s||s.forEach(t=>{let{name:r,value:s,options:u}=t,w=(0,p.serialize)(r,s,u);h.has("Set-Cookie")?h.append("Set-Cookie",w):h.set("Set-Cookie",w)});let w=t.body;"application/json"===h.get("content-type")?w=JSON.stringify(t.body):"application/x-www-form-urlencoded"===h.get("content-type")&&(w=new URLSearchParams(t.body).toString());let E=t.redirect?302:null!==(u=t.status)&&void 0!==u?u:200,A=new Response(w,{headers:h,status:E});return t.redirect&&A.headers.set("Location",t.redirect),A};var p=s(95011);async function getBody(t){if(!("body"in t)||!t.body||"POST"!==t.method)return;let r=t.headers.get("content-type");if(null!=r&&r.includes("application/json"))return await t.json();if(null!=r&&r.includes("application/x-www-form-urlencoded")){let r=new URLSearchParams(await t.text());return Object.fromEntries(r)}}},83603:(t,r,s)=>{"use strict";r.Z=function(t){return{id:"email",type:"email",name:"Email",server:{host:"localhost",port:25,auth:{user:"",pass:""}},from:"NextAuth <no-reply@example.com>",maxAge:86400,async sendVerificationRequest(t){let{identifier:r,url:s,provider:u,theme:h}=t,{host:w}=new URL(s),E=(0,p.createTransport)(u.server),A=await E.sendMail({to:r,from:u.from,subject:`Sign in to ${w}`,text:function({url:t,host:r}){return`Sign in to ${r}
${t}

`}({url:s,host:w}),html:function(t){let{url:r,host:s,theme:p}=t,u=s.replace(/\./g,"&#8203;."),h=p.brandColor||"#346df1",w=p.buttonText||"#fff",E={background:"#f9f9f9",text:"#444",mainBackground:"#fff",buttonBackground:h,buttonBorder:h,buttonText:w};return`
<body style="background: ${E.background};">
  <table width="100%" border="0" cellspacing="20" cellpadding="0"
    style="background: ${E.mainBackground}; max-width: 600px; margin: auto; border-radius: 10px;">
    <tr>
      <td align="center"
        style="padding: 10px 0px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; color: ${E.text};">
        Sign in to <strong>${u}</strong>
      </td>
    </tr>
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td align="center" style="border-radius: 5px;" bgcolor="${E.buttonBackground}"><a href="${r}"
                target="_blank"
                style="font-size: 18px; font-family: Helvetica, Arial, sans-serif; color: ${E.buttonText}; text-decoration: none; border-radius: 5px; padding: 10px 20px; border: 1px solid ${E.buttonBorder}; display: inline-block; font-weight: bold;">Sign
                in</a></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 0px 0px 10px 0px; font-size: 16px; line-height: 22px; font-family: Helvetica, Arial, sans-serif; color: ${E.text};">
        If you did not request this email you can safely ignore it.
      </td>
    </tr>
  </table>
</body>
`}({url:s,host:w,theme:h})}),R=A.rejected.concat(A.pending).filter(Boolean);if(R.length)throw Error(`Email (${R.join(", ")}) could not be sent`)},options:t}};var p=s(66709)},90596:(t,r)=>{"use strict";r.Z=function(t){return{id:"github",name:"GitHub",type:"oauth",authorization:{url:"https://github.com/login/oauth/authorize",params:{scope:"read:user user:email"}},token:"https://github.com/login/oauth/access_token",userinfo:{url:"https://api.github.com/user",async request({client:t,tokens:r}){let s=await t.userinfo(r.access_token);if(!s.email){let t=await fetch("https://api.github.com/user/emails",{headers:{Authorization:`token ${r.access_token}`}});if(t.ok){var p;let r=await t.json();s.email=(null!==(p=r.find(t=>t.primary))&&void 0!==p?p:r[0]).email}}return s}},profile(t){var r;return{id:t.id.toString(),name:null!==(r=t.name)&&void 0!==r?r:t.login,email:t.email,image:t.avatar_url}},style:{logo:"/github.svg",bg:"#24292f",text:"#fff"},options:t}}},72538:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.detectOrigin=function(t,r){var s;return(null!==(s=process.env.VERCEL)&&void 0!==s?s:process.env.AUTH_TRUST_HOST)?`${"http"===r?"http":"https"}://${t}`:process.env.NEXTAUTH_URL}},20546:(t,r,s)=>{"use strict";var p=s(2049);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.proxyLogger=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;arguments.length>1&&arguments[1];try{return t}catch(t){return h}},r.setLogger=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;r||(h.debug=function(){}),t.error&&(h.error=t.error),t.warn&&(h.warn=t.warn),t.debug&&(h.debug=t.debug)},p(s(21264)),p(s(92174)),p(s(48824));var u=s(32133),h={error:function(t,r){r=function formatError(t){var r;return t instanceof Error&&!(t instanceof u.UnknownError)?{message:t.message,stack:t.stack,name:t.name}:(null!=t&&t.error&&(t.error=formatError(t.error),t.message=null!==(r=t.message)&&void 0!==r?r:t.error.message),t)}(r),console.error("[next-auth][error][".concat(t,"]"),"\nhttps://next-auth.js.org/errors#".concat(t.toLowerCase()),r.message,r)},warn:function(t){console.warn("[next-auth][warn][".concat(t,"]"),"\nhttps://next-auth.js.org/warnings#".concat(t.toLowerCase()))},debug:function(t,r){console.log("[next-auth][debug][".concat(t,"]"),r)}};r.default=h},96300:(t,r)=>{"use strict";function isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.merge=function merge(t,...r){if(!r.length)return t;let s=r.shift();if(isObject(t)&&isObject(s))for(let r in s)isObject(s[r])?(t[r]||Object.assign(t,{[r]:{}}),merge(t[r],s[r])):Object.assign(t,{[r]:s[r]});return merge(t,...r)}},44254:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var r;let s=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);let p=new URL(null!==(r=t)&&void 0!==r?r:s),u=("/"===p.pathname?s.pathname:p.pathname).replace(/\/$/,""),h=`${p.origin}${u}`;return{origin:p.origin,host:p.host,path:u,base:h,toString:()=>h}}},82005:t=>{"use strict";let Tokenizer=class Tokenizer{constructor(t){this.str=(t||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let t=[];for(let t=0,r=this.str.length;t<r;t++){let s=this.str.charAt(t),p=t<r-1?this.str.charAt(t+1):null;this.checkChar(s,p)}return this.list.forEach(r=>{r.value=(r.value||"").toString().trim(),r.value&&t.push(r)}),t}checkChar(t,r){if(this.escaped);else if(t===this.operatorExpecting){this.node={type:"operator",value:t},r&&![" ","	","\r","\n",",",";"].includes(r)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&t in this.operators){this.node={type:"operator",value:t},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[t],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&"\\"===t){this.escaped=!0;return}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),"\n"===t&&(t=" "),(t.charCodeAt(0)>=33||[" ","	"].includes(t))&&(this.node.value+=t),this.escaped=!1}};t.exports=function addressparser(t,r){r=r||{};let s=new Tokenizer(t).tokenize(),p=[],u=[],h=[];if(s.forEach(t=>{"operator"===t.type&&(","===t.value||";"===t.value)?(u.length&&p.push(u),u=[]):u.push(t)}),u.length&&p.push(u),p.forEach(t=>{(t=function(t){let r,s,p,u=!1,h="text",w=[],E={address:[],comment:[],group:[],text:[]};for(s=0,p=t.length;s<p;s++){let r=t[s],p=s?t[s-1]:null;if("operator"===r.type)switch(r.value){case"<":h="address";break;case"(":h="comment";break;case":":h="group",u=!0;break;default:h="text"}else r.value&&("address"===h&&(r.value=r.value.replace(/^[^<]*<\s*/,"")),p&&p.noBreak&&E[h].length?E[h][E[h].length-1]+=r.value:E[h].push(r.value))}if(!E.text.length&&E.comment.length&&(E.text=E.comment,E.comment=[]),u)E.text=E.text.join(" "),w.push({name:E.text||r&&r.name,group:E.group.length?addressparser(E.group.join(",")):[]});else{if(!E.address.length&&E.text.length){for(s=E.text.length-1;s>=0;s--)if(E.text[s].match(/^[^@\s]+@[^@\s]+$/)){E.address=E.text.splice(s,1);break}let _regexHandler=function(t){return E.address.length?t:(E.address=[t.trim()]," ")};if(!E.address.length)for(s=E.text.length-1;s>=0&&(E.text[s]=E.text[s].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,_regexHandler).trim(),!E.address.length);s--);}if(!E.text.length&&E.comment.length&&(E.text=E.comment,E.comment=[]),E.address.length>1&&(E.text=E.text.concat(E.address.splice(1))),E.text=E.text.join(" "),E.address=E.address.join(" "),!E.address&&u)return[];(r={address:E.address||E.text||"",name:E.text||E.address||""}).address===r.name&&((r.address||"").match(/@/)?r.name="":r.address=""),w.push(r)}return w}(t)).length&&(h=h.concat(t))}),r.flatten){let t=[],walkAddressList=r=>{r.forEach(r=>{if(r.group)return walkAddressList(r.group);t.push(r)})};return walkAddressList(h),t}return h}},45066:(t,r,s)=>{"use strict";let p=s(12781).Transform;function encode(t){return"string"==typeof t&&(t=Buffer.from(t,"utf-8")),t.toString("base64")}function wrap(t,r){if(t=(t||"").toString(),r=r||76,t.length<=r)return t;let s=[],p=0,u=1024*r;for(;p<t.length;){let h=t.substr(p,u).replace(RegExp(".{"+r+"}","g"),"$&\r\n").trim();s.push(h),p+=u}return s.join("\r\n").trim()}t.exports={encode,wrap,Encoder:class extends p{constructor(t){super(),this.options=t||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(t,r,s){if("buffer"!==r&&(t=Buffer.from(t,r)),!t||!t.length)return setImmediate(s);this.inputBytes+=t.length,this._remainingBytes&&this._remainingBytes.length&&(t=Buffer.concat([this._remainingBytes,t],this._remainingBytes.length+t.length),this._remainingBytes=!1),t.length%3?(this._remainingBytes=t.slice(t.length-t.length%3),t=t.slice(0,t.length-t.length%3)):this._remainingBytes=!1;let p=this._curLine+encode(t);if(this.options.lineLength){let t=(p=wrap(p,this.options.lineLength)).lastIndexOf("\n");t<0?(this._curLine=p,p=""):t===p.length-1?this._curLine="":(this._curLine=p.substr(t+1),p=p.substr(0,t+1))}p&&(this.outputBytes+=p.length,this.push(Buffer.from(p,"ascii"))),setImmediate(s)}_flush(t){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=encode(this._remainingBytes)),this._curLine&&(this._curLine=wrap(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),t()}}}},47159:(t,r,s)=>{"use strict";let p=s(93135),u=s(50224),h=s(70037),w=s(12781).PassThrough,E=s(57147),A=s(71017),R=s(6113);let DKIMSigner=class DKIMSigner{constructor(t,r,s,p){this.options=t||{},this.keys=r,this.cacheTreshold=Number(this.options.cacheTreshold)||131072,this.hashAlgo=this.options.hashAlgo||"sha256",this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=!!this.cacheDir&&A.join(this.cacheDir,"message."+Date.now()+"-"+R.randomBytes(14).toString("hex")),this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=s,this.output=p,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",t=>{this.hasErrored=!0,this.cleanup(),p.emit("error",t)})}cleanup(){this.cache&&this.cachePath&&E.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=E.createReadStream(this.cachePath),this.cache.once("error",t=>{this.cleanup(),this.output.emit("error",t)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let t=this.chunks[this.readPos++];if(!1===this.output.write(t))return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let t=0,signNextKey=()=>{if(t>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let r=this.keys[t++],s=h(this.headers,this.hashAlgo,this.bodyHash,{domainName:r.domainName,keySelector:r.keySelector,privateKey:r.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return s&&this.output.write(Buffer.from(s+"\r\n")),setImmediate(signNextKey)};if(this.bodyHash&&this.headers)return signNextKey();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=E.createWriteStream(this.cachePath),this.cache.once("error",t=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;null!==this.relaxedBody.read(););}),this.hasErrored=!0,this.output.emit("error",t)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new p,this.relaxedBody=new u({hashAlgo:this.hashAlgo}),this.parser.on("headers",t=>{this.headers=t}),this.relaxedBody.on("hash",t=>{this.bodyHash=t}),this.relaxedBody.on("readable",()=>{let t;if(!this.cache){for(;null!==(t=this.relaxedBody.read());)if(this.chunks.push(t),this.chunklen+=t.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}};t.exports=class{constructor(t){this.options=t||{},this.keys=[].concat(this.options.keys||{domainName:t.domainName,keySelector:t.keySelector,privateKey:t.privateKey})}sign(t,r){let s=new w,p=t,u=!1;Buffer.isBuffer(t)?(u=t,p=new w):"string"==typeof t&&(u=Buffer.from(t),p=new w);let h=this.options;r&&Object.keys(r).length&&(h={},Object.keys(this.options||{}).forEach(t=>{h[t]=this.options[t]}),Object.keys(r||{}).forEach(t=>{t in h||(h[t]=r[t])}));let E=new DKIMSigner(h,this.keys,p,s);return setImmediate(()=>{E.signStream(),u&&setImmediate(()=>{p.end(u)})}),s}}},93135:(t,r,s)=>{"use strict";let p=s(12781).Transform;t.exports=class extends p{constructor(t){super(t),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(t){let r=this.lastBytes.length,s=Math.min(t.length,r);for(let t=0,p=r-s;t<p;t++)this.lastBytes[t]=this.lastBytes[t+s];for(let p=1;p<=s;p++)this.lastBytes[r-p]=t[t.length-p]}checkHeaders(t){if(this.headersParsed)return!0;let r=this.lastBytes.length,s=0;this.curLinePos=0;for(let p=0,u=this.lastBytes.length+t.length;p<u;p++)if(10===(p<r?this.lastBytes[p]:t[p-r])&&p){let u=p-1<r?this.lastBytes[p-1]:t[p-1-r],h=p>1&&(p-2<r?this.lastBytes[p-2]:t[p-2-r]);if(10===u||13===u&&10===h){this.headersParsed=!0,s=p-r+1,this.headerBytes+=s;break}}if(this.headersParsed){if(this.headerChunks.push(t.slice(0,s)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),t.length-1>s){let r=t.slice(s);this.bodySize+=r.length,setImmediate(()=>this.push(r))}return!1}return this.headerBytes+=t.length,this.headerChunks.push(t),this.updateLastBytes(t),!1}_transform(t,r,s){let p;if(!t||!t.length)return s();"string"==typeof t&&(t=Buffer.from(t,r));try{p=this.checkHeaders(t)}catch(t){return s(t)}p&&(this.bodySize+=t.length,this.push(t)),setImmediate(s)}_flush(t){if(this.headerChunks){let t=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=t.length,this.push(t),this.headerChunks=null}t()}parseHeaders(){let t=(this.rawHeaders||"").toString().split(/\r?\n/);for(let r=t.length-1;r>0;r--)/^\s/.test(t[r])&&(t[r-1]+="\n"+t[r],t.splice(r,1));return t.filter(t=>t.trim()).map(t=>({key:t.substr(0,t.indexOf(":")).trim().toLowerCase(),line:t}))}}},50224:(t,r,s)=>{"use strict";let p=s(12781).Transform,u=s(6113);t.exports=class extends p{constructor(t){super(),t=t||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=u.createHash(t.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=t.debug,this._debugBody=!!t.debug&&[]}updateHash(t){let r;let s="",p="file";for(let r=t.length-1;r>=0;r--){let u=t[r];if("file"===p&&(10===u||13===u));else if("file"===p&&(9===u||32===u))p="line";else if("line"===p&&(9===u||32===u));else if(("file"===p||"line"===p)&&(p="body",r===t.length-1))break;if(0===r){if("file"===p&&(!this.remainder||/[\r\n]$/.test(this.remainder))||"line"===p&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=t.toString("binary");return}if("line"===p||"file"===p){s=t.toString("binary"),t=!1;break}}if("body"===p){s=t.slice(r+1).toString("binary"),t=t.slice(0,r+1);break}}let u=!!this.remainder;if(t&&!u)for(let r=0,s=t.length;r<s;r++){if(r&&10===t[r]&&13!==t[r-1]||r&&13===t[r]&&32===t[r-1]){u=!0;break}if(r&&32===t[r]&&32===t[r-1]){u=!0;break}if(9===t[r]){u=!0;break}}u?(r=this.remainder+(t?t.toString("binary"):""),this.remainder=s,r=r.replace(/\r?\n/g,"\n").replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,"\r\n"),t=Buffer.from(r,"binary")):s&&(this.remainder=s),this.debug&&this._debugBody.push(t),this.bodyHash.update(t)}_transform(t,r,s){if(!t||!t.length)return s();"string"==typeof t&&(t=Buffer.from(t,r)),this.updateHash(t),this.byteLength+=t.length,this.push(t),s()}_flush(t){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from("\r\n")),this.byteLength||this.push(Buffer.from("\r\n")),this.emit("hash",this.bodyHash.digest("base64"),!!this.debug&&Buffer.concat(this._debugBody)),t()}}},70037:(t,r,s)=>{"use strict";let p=s(71154),u=s(29571),h=s(6113);function relaxedHeaders(t,r,s){let p=new Set,u=new Set,h=new Map;(s||"").toLowerCase().split(":").forEach(t=>{u.add(t.trim())}),(r||"").toLowerCase().split(":").filter(t=>!u.has(t.trim())).forEach(t=>{p.add(t.trim())});for(let r=t.length-1;r>=0;r--){let s=t[r];p.has(s.key)&&!h.has(s.key)&&h.set(s.key,relaxedHeaderLine(s.line))}let w=[],E=[];return p.forEach(t=>{h.has(t)&&(E.push(t),w.push(t+":"+h.get(t)))}),{headers:w.join("\r\n")+"\r\n",fieldNames:E.join(":")}}function relaxedHeaderLine(t){return t.substr(t.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}t.exports=(t,r,s,w)=>{let E,A;let R=relaxedHeaders(t,(w=w||{}).headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",w.skipFields),I=function(t,r,s,h,w){let E=["v=1","a=rsa-"+h,"c=relaxed/relaxed","d="+p.toASCII(t),"q=dns/txt","s="+r,"bh="+w,"h="+s].join("; ");return u.foldLines("DKIM-Signature: "+E,76)+";\r\n b="}(w.domainName,w.keySelector,R.fieldNames,r,s);R.headers+="dkim-signature:"+relaxedHeaderLine(I),(E=h.createSign(("rsa-"+r).toUpperCase())).update(R.headers);try{A=E.sign(w.privateKey,"base64")}catch(t){return!1}return I+A.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,"$&\r\n ").trim()},t.exports.relaxedHeaders=relaxedHeaders},36703:(t,r,s)=>{"use strict";let p=s(57310);t.exports=class{constructor(t){this.options=t||{},this.cookies=[]}set(t,r){let s,u=p.parse(r||""),h=this.parse(t);return h.domain?(s=h.domain.replace(/^\./,""),(u.hostname.length<s.length||("."+u.hostname).substr(-s.length+1)!=="."+s)&&(h.domain=u.hostname)):h.domain=u.hostname,h.path||(h.path=this.getPath(u.pathname)),h.expires||(h.expires=new Date(Date.now()+1e3*(Number(this.options.sessionTimeout||1800)||1800))),this.add(h)}get(t){return this.list(t).map(t=>t.name+"="+t.value).join("; ")}list(t){let r,s,p=[];for(r=this.cookies.length-1;r>=0;r--){if(s=this.cookies[r],this.isExpired(s)){this.cookies.splice(r,r);continue}this.match(s,t)&&p.unshift(s)}return p}parse(t){let r={};return(t||"").toString().split(";").forEach(t=>{let s,p=t.split("="),u=p.shift().trim().toLowerCase(),h=p.join("=").trim();if(u)switch(u){case"expires":"Invalid Date"!==(h=new Date(h)).toString()&&(r.expires=h);break;case"path":r.path=h;break;case"domain":(s=h.toLowerCase()).length&&"."!==s.charAt(0)&&(s="."+s),r.domain=s;break;case"max-age":r.expires=new Date(Date.now()+1e3*(Number(h)||0));break;case"secure":r.secure=!0;break;case"httponly":r.httponly=!0;break;default:r.name||(r.name=u,r.value=h)}}),r}match(t,r){let s=p.parse(r||"");return(s.hostname===t.domain||"."===t.domain.charAt(0)&&("."+s.hostname).substr(-t.domain.length)===t.domain)&&this.getPath(s.pathname).substr(0,t.path.length)===t.path&&(!t.secure||"https:"===s.protocol)}add(t){let r,s;if(!t||!t.name)return!1;for(r=0,s=this.cookies.length;r<s;r++)if(this.compare(this.cookies[r],t)){if(this.isExpired(t))return this.cookies.splice(r,1),!1;return this.cookies[r]=t,!0}return this.isExpired(t)||this.cookies.push(t),!0}compare(t,r){return t.name===r.name&&t.path===r.path&&t.domain===r.domain&&t.secure===r.secure&&t.httponly==t.httponly}isExpired(t){return t.expires&&t.expires<new Date||!t.value}getPath(t){let r=(t||"/").split("/");return r.pop(),"/"!==(r=r.join("/").trim()).charAt(0)&&(r="/"+r),"/"!==r.substr(-1)&&(r+="/"),r}}},92024:(t,r,s)=>{"use strict";let p=s(13685),u=s(95687),h=s(57310),w=s(59796),E=s(12781).PassThrough,A=s(36703),R=s(93259),I=s(41808);t.exports=function(t,r){return function nmfetch(t,r){let s,U,N;(r=r||{}).fetchRes=r.fetchRes||new E,r.cookies=r.cookies||new A,r.redirects=r.redirects||0,r.maxRedirects=isNaN(r.maxRedirects)?5:r.maxRedirects,r.cookie&&([].concat(r.cookie||[]).forEach(s=>{r.cookies.set(s,t)}),r.cookie=!1);let W=r.fetchRes,J=h.parse(t),K=(r.method||"").toString().trim().toUpperCase()||"GET",G=!1,X="https:"===J.protocol?u:p,Y={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+R.version};if(Object.keys(r.headers||{}).forEach(t=>{Y[t.toLowerCase().trim()]=r.headers[t]}),r.userAgent&&(Y["user-agent"]=r.userAgent),J.auth&&(Y.Authorization="Basic "+Buffer.from(J.auth).toString("base64")),(s=r.cookies.get(t))&&(Y.cookie=s),r.body){if(!1!==r.contentType&&(Y["Content-Type"]=r.contentType||"application/x-www-form-urlencoded"),"function"==typeof r.body.pipe)Y["Transfer-Encoding"]="chunked",(U=r.body).on("error",r=>{G||(G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r))});else{if(r.body instanceof Buffer)U=r.body;else if("object"==typeof r.body)try{U=Buffer.from(Object.keys(r.body).map(t=>{let s=r.body[t].toString().trim();return encodeURIComponent(t)+"="+encodeURIComponent(s)}).join("&"))}catch(r){if(G)return;G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r);return}else U=Buffer.from(r.body.toString().trim());Y["Content-Type"]=r.contentType||"application/x-www-form-urlencoded",Y["Content-Length"]=U.length}K=(r.method||"").toString().trim().toUpperCase()||"POST"}let Q={method:K,host:J.hostname,path:J.path,port:J.port?J.port:"https:"===J.protocol?443:80,headers:Y,rejectUnauthorized:!1,agent:!1};r.tls&&Object.keys(r.tls).forEach(t=>{Q[t]=r.tls[t]}),"https:"!==J.protocol||!J.hostname||J.hostname===Q.host||I.isIP(J.hostname)||Q.servername||(Q.servername=J.hostname);try{N=X.request(Q)}catch(r){return G=!0,setImmediate(()=>{r.type="FETCH",r.sourceUrl=t,W.emit("error",r)}),W}return r.timeout&&N.setTimeout(r.timeout,()=>{if(G)return;G=!0,N.abort();let r=Error("Request Timeout");r.type="FETCH",r.sourceUrl=t,W.emit("error",r)}),N.on("error",r=>{G||(G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r))}),N.on("response",s=>{let p;if(!G){switch(s.headers["content-encoding"]){case"gzip":case"deflate":p=w.createUnzip()}if(s.headers["set-cookie"]&&[].concat(s.headers["set-cookie"]||[]).forEach(s=>{r.cookies.set(s,t)}),[301,302,303,307,308].includes(s.statusCode)&&s.headers.location){if(r.redirects++,r.redirects>r.maxRedirects){G=!0;let r=Error("Maximum redirect count exceeded");r.type="FETCH",r.sourceUrl=t,W.emit("error",r),N.abort();return}return r.method="GET",r.body=!1,nmfetch(h.resolve(t,s.headers.location),r)}if(W.statusCode=s.statusCode,W.headers=s.headers,s.statusCode>=300&&!r.allowErrorResponse){G=!0;let r=Error("Invalid status code "+s.statusCode);r.type="FETCH",r.sourceUrl=t,W.emit("error",r),N.abort();return}s.on("error",r=>{G||(G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r),N.abort())}),p?(s.pipe(p).pipe(W),p.on("error",r=>{G||(G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r),N.abort())})):s.pipe(W)}}),setImmediate(()=>{if(U)try{if("function"==typeof U.pipe)return U.pipe(N);N.write(U)}catch(r){G=!0,r.type="FETCH",r.sourceUrl=t,W.emit("error",r);return}N.end()}),W}(t,r)},t.exports.Cookies=A},1897:(t,r,s)=>{"use strict";let p=s(93259),u=s(27281);t.exports=class{constructor(t){t=t||{},this.options=t||{},this.name="JSONTransport",this.version=p.version,this.logger=u.getLogger(this.options,{component:this.options.component||"json-transport"})}send(t,r){t.message.keepBcc=!0;let s=t.data.envelope||t.message.getEnvelope(),p=t.message.messageId(),u=[].concat(s.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:p},"Composing JSON structure of %s to <%s>",p,u.join(", ")),setImmediate(()=>{t.normalize((t,u)=>t?(this.logger.error({err:t,tnx:"send",messageId:p},"Failed building JSON structure for %s. %s",p,t.message),r(t)):(delete u.envelope,delete u.normalizedHeaders,r(null,{envelope:s,messageId:p,message:this.options.skipEncoding?u:JSON.stringify(u)})))})}}},6097:(t,r,s)=>{"use strict";let p=s(94882),u=s(29571),h=s(27281).parseDataURI;t.exports=class{constructor(t){this.mail=t||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(t=>/^text\/html\b/i.test(t.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&1===this._attachments.attached.length,this.mail.raw?this.message=new p("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(t=>{let r=t.replace(/-(\w)/g,(t,r)=>r.toUpperCase());this.mail[r]&&this.message.setHeader(t,this.mail[r])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(t){let r,s;let p=[].concat(this.mail.attachments||[]).map((t,r)=>{let s;let p=/^message\//i.test(t.contentType);/^data:/i.test(t.path||t.href)&&(t=this._processDataUrl(t));let h=t.contentType||u.detectMimeType(t.filename||t.path||t.href||"bin"),w=/^image\//i.test(h);return s={contentType:h,contentDisposition:t.contentDisposition||(p||w&&t.cid?"inline":"attachment"),contentTransferEncoding:"contentTransferEncoding"in t?t.contentTransferEncoding:"base64"},t.filename?s.filename=t.filename:!p&&!1!==t.filename&&(s.filename=(t.path||t.href||"").split("/").pop().split("?").shift()||"attachment-"+(r+1),0>s.filename.indexOf(".")&&(s.filename+="."+u.detectExtension(s.contentType))),/^https?:\/\//i.test(t.path)&&(t.href=t.path,t.path=void 0),t.cid&&(s.cid=t.cid),t.raw?s.raw=t.raw:t.path?s.content={path:t.path}:t.href?s.content={href:t.href,httpHeaders:t.httpHeaders}:s.content=t.content||"",t.encoding&&(s.encoding=t.encoding),t.headers&&(s.headers=t.headers),s});return(this.mail.icalEvent&&(r="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},s={},Object.keys(r).forEach(t=>{s[t]=r[t]}),s.contentType="application/ics",s.headers||(s.headers={}),s.filename=s.filename||"invite.ics",s.headers["Content-Disposition"]="attachment",s.headers["Content-Transfer-Encoding"]="base64"),t)?{attached:p.filter(t=>!t.cid).concat(s||[]),related:p.filter(t=>!!t.cid)}:{attached:p.concat(s||[]),related:[]}}getAlternatives(){let t=[],r,s,p,h,w,E;return this.mail.text&&((r="object"==typeof this.mail.text&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?this.mail.text:{content:this.mail.text}).contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&((p="object"==typeof this.mail.watchHtml&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?this.mail.watchHtml:{content:this.mail.watchHtml}).contentType="text/watch-html; charset=utf-8"),this.mail.amp&&((h="object"==typeof this.mail.amp&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?this.mail.amp:{content:this.mail.amp}).contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(w="object"==typeof this.mail.icalEvent&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?this.mail.icalEvent:{content:this.mail.icalEvent},E={},Object.keys(w).forEach(t=>{E[t]=w[t]}),E.content&&"object"==typeof E.content&&(E.content._resolve=!0),E.filename=!1,E.contentType="text/calendar; charset=utf-8; method="+(E.method||"PUBLISH").toString().trim().toUpperCase(),E.headers||(E.headers={})),this.mail.html&&((s="object"==typeof this.mail.html&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?this.mail.html:{content:this.mail.html}).contentType="text/html; charset=utf-8"),[].concat(r||[]).concat(p||[]).concat(h||[]).concat(s||[]).concat(E||[]).concat(this.mail.alternatives||[]).forEach(r=>{let s;/^data:/i.test(r.path||r.href)&&(r=this._processDataUrl(r)),s={contentType:r.contentType||u.detectMimeType(r.filename||r.path||r.href||"txt"),contentTransferEncoding:r.contentTransferEncoding},r.filename&&(s.filename=r.filename),/^https?:\/\//i.test(r.path)&&(r.href=r.path,r.path=void 0),r.raw?s.raw=r.raw:r.path?s.content={path:r.path}:r.href?s.content={href:r.href}:s.content=r.content||"",r.encoding&&(s.encoding=r.encoding),r.headers&&(s.headers=r.headers),t.push(s)}),t}_createMixed(t){let r;return r=t?t.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new p("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(r):this._useRelated&&this._createRelated(r),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(t=>{this._useRelated&&t===this._htmlNode||this._createContentNode(r,t)}),r}_createAlternative(t){let r;return r=t?t.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new p("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(t=>{this._useRelated&&this._htmlNode===t?this._createRelated(r):this._createContentNode(r,t)}),r}_createRelated(t){let r;return r=t?t.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new p('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(r,this._htmlNode),this._attachments.related.forEach(t=>this._createContentNode(r,t)),r}_createContentNode(t,r){let s;(r=r||{}).content=r.content||"";let u=(r.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return s=t?t.createChild(r.contentType,{filename:r.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):new p(r.contentType,{filename:r.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),r.headers&&s.addHeader(r.headers),r.cid&&s.setHeader("Content-Id","<"+r.cid.replace(/[<>]/g,"")+">"),r.contentTransferEncoding?s.setHeader("Content-Transfer-Encoding",r.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(r.contentType)&&s.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(r.contentType)||r.contentDisposition)&&s.setHeader("Content-Disposition",r.contentDisposition||(r.cid&&/^image\//i.test(r.contentType)?"inline":"attachment")),"string"!=typeof r.content||["utf8","usascii","ascii"].includes(u)||(r.content=Buffer.from(r.content,u)),r.raw?s.setRaw(r.raw):s.setContent(r.content),s}_processDataUrl(t){let r;return(t.path||t.href).match(/^data:/)&&(r=h(t.path||t.href)),r&&(t.content=r.data,t.contentType=t.contentType||r.contentType,"path"in t&&(t.path=!1),"href"in t&&(t.href=!1)),t}}},34007:(t,r,s)=>{"use strict";let p=s(82361),u=s(27281),h=s(80909),w=s(6097),E=s(47159),A=s(20604),R=s(73837),I=s(57310),U=s(93259),N=s(56046),W=s(41808),J=s(9523),K=s(6113);t.exports=class extends p{constructor(t,r,s){super(),this.options=r||{},this._defaults=s||{},this._defaultPlugins={compile:[(...t)=>this._convertDataImages(...t)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=!!this.options.dkim&&new E(this.options.dkim),this.transporter=t,this.transporter.mailer=this,this.logger=u.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),"function"==typeof this.transporter.on&&(this.transporter.on("log",t=>{this.logger.debug({tnx:"transport"},"%s: %s",t.type,t.message)}),this.transporter.on("error",t=>{this.logger.error({err:t,tnx:"transport"},"Transport Error: %s",t.message),this.emit("error",t)}),this.transporter.on("idle",(...t)=>{this.emit("idle",...t)})),["close","isIdle","verify"].forEach(t=>{this[t]=(...r)=>"function"==typeof this.transporter[t]?("verify"===t&&"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[t](...r)):(this.logger.warn({tnx:"transport",methodName:t},"Non existing method %s called for transport",t),!1)}),this.options.proxy&&"string"==typeof this.options.proxy&&this.setupProxy(this.options.proxy)}use(t,r){return t=(t||"").toString(),this._userPlugins.hasOwnProperty(t)?this._userPlugins[t].push(r):this._userPlugins[t]=[r],this}sendMail(t,r=null){let s;r||(s=new Promise((t,s)=>{r=u.callbackPromise(t,s)})),"function"==typeof this.getSocket&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let p=new N(this,t);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",p,t=>{if(t)return this.logger.error({err:t,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",t.message),r(t);p.message=new w(p.data).compile(),p.setMailerHeader(),p.setPriorityHeaders(),p.setListHeaders(),this._processPlugins("stream",p,t=>{if(t)return this.logger.error({err:t,tnx:"plugin",action:"stream"},"PluginStream Error: %s",t.message),r(t);(p.data.dkim||this.dkim)&&p.message.processFunc(t=>{let r=p.data.dkim?new E(p.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:p.message.messageId(),dkimDomains:r.keys.map(t=>t.keySelector+"."+t.domainName).join(", ")},"Signing outgoing message with %s keys",r.keys.length),r.sign(t,p.data._dkim)}),this.transporter.send(p,(...t)=>{t[0]&&this.logger.error({err:t[0],tnx:"transport",action:"send"},"Send Error: %s",t[0].message),r(...t)})})}),s}getVersionString(){return R.format("%s (%s; +%s; %s/%s)",U.name,U.version,U.homepage,this.transporter.name,this.transporter.version)}_processPlugins(t,r,s){if(t=(t||"").toString(),!this._userPlugins.hasOwnProperty(t))return s();let p=this._userPlugins[t]||[],u=this._defaultPlugins[t]||[];if(p.length&&this.logger.debug({tnx:"transaction",pluginCount:p.length,step:t},"Using %s plugins for %s",p.length,t),p.length+u.length===0)return s();let h=0,w="default",processPlugins=()=>{let t="default"===w?u:p;if(h>=t.length){if("default"!==w||!p.length)return s();w="user",h=0,t=p}(0,t[h++])(r,t=>{if(t)return s(t);processPlugins()})};processPlugins()}setupProxy(t){let r=I.parse(t);this.getSocket=(t,s)=>{let p=r.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+p))return this.meta.get("proxy_handler_"+p)(r,t,s);switch(p){case"http":case"https":A(r.href,t.port,t.host,(t,r)=>t?s(t):s(null,{connection:r}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return s(Error("Socks module not loaded"));let connect=p=>{let u=!!this.meta.get("proxy_socks_module").SocksClient,h=u?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),w=Number(r.protocol.replace(/\D/g,""))||5,E={proxy:{ipaddress:p,port:Number(r.port),type:w},[u?"destination":"target"]:{host:t.host,port:t.port},command:"connect"};if(r.auth){let t=decodeURIComponent(r.auth.split(":").shift()),s=decodeURIComponent(r.auth.split(":").pop());u?(E.proxy.userId=t,E.proxy.password=s):4===w?E.userid=t:E.authentication={username:t,password:s}}h.createConnection(E,(t,r)=>t?s(t):s(null,{connection:r.socket||r}))};if(W.isIP(r.hostname))return connect(r.hostname);return J.resolve(r.hostname,(t,r)=>{if(t)return s(t);connect(Array.isArray(r)?r[0]:r)})}}s(Error("Unknown proxy configuration"))}}_convertDataImages(t,r){if(!this.options.attachDataUrls&&!t.data.attachDataUrls||!t.data.html)return r();t.resolveContent(t.data,"html",(s,p)=>{if(s)return r(s);let u=0;p=(p||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(r,s,p,w)=>{let E=K.randomBytes(10).toString("hex")+"@localhost";return t.data.attachments||(t.data.attachments=[]),Array.isArray(t.data.attachments)||(t.data.attachments=[].concat(t.data.attachments||[])),t.data.attachments.push({path:p,cid:E,filename:"image-"+ ++u+"."+h.detectExtension(w)}),s+"cid:"+E}),t.data.html=p,r()})}set(t,r){return this.meta.set(t,r)}get(t){return this.meta.get(t)}}},56046:(t,r,s)=>{"use strict";let p=s(27281),u=s(94882),h=s(29571);t.exports=class{constructor(t,r){this.mailer=t,this.data={},this.message=null,r=r||{};let s=t.options||{},p=t._defaults||{};Object.keys(r).forEach(t=>{this.data[t]=r[t]}),this.data.headers=this.data.headers||{},Object.keys(p).forEach(t=>{t in this.data?"headers"===t&&Object.keys(p.headers).forEach(t=>{t in this.data.headers||(this.data.headers[t]=p.headers[t])}):this.data[t]=p[t]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(t=>{t in s&&(this.data[t]=s[t])})}resolveContent(...t){return p.resolveContent(...t)}resolveAll(t){let r=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((t,s)=>{r.push([this.data.alternatives,s])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((t,s)=>{!t.filename&&(t.filename=(t.path||t.href||"").split("/").pop().split("?").shift()||"attachment-"+(s+1),0>t.filename.indexOf(".")&&(t.filename+="."+h.detectExtension(t.contentType))),t.contentType||(t.contentType=h.detectMimeType(t.filename||t.path||t.href||"bin")),r.push([this.data.attachments,s])});let s=new u;["from","to","cc","bcc","sender","replyTo"].forEach(t=>{let r;this.message?r=[].concat(s._parseAddresses(this.message.getHeader("replyTo"===t?"reply-to":t))||[]):this.data[t]&&(r=[].concat(s._parseAddresses(this.data[t])||[])),r&&r.length?this.data[t]=r:t in this.data&&(this.data[t]=null)}),["from","sender"].forEach(t=>{this.data[t]&&(this.data[t]=this.data[t].shift())});let w=0,resolveNext=()=>{if(w>=r.length)return t(null,this.data);let s=r[w++];if(!s[0]||!s[0][s[1]])return resolveNext();p.resolveContent(...s,(r,p)=>{if(r)return t(r);let u={content:p};s[0][s[1]]&&"object"==typeof s[0][s[1]]&&!Buffer.isBuffer(s[0][s[1]])&&Object.keys(s[0][s[1]]).forEach(t=>{t in u||["content","path","href","raw"].includes(t)||(u[t]=s[0][s[1]][t])}),s[0][s[1]]=u,resolveNext()})};setImmediate(()=>resolveNext())}normalize(t){let r=this.data.envelope||this.message.getEnvelope(),s=this.message.messageId();this.resolveAll((p,u)=>p?t(p):(u.envelope=r,u.messageId=s,["html","text","watchHtml","amp"].forEach(t=>{u[t]&&u[t].content&&("string"==typeof u[t].content?u[t]=u[t].content:Buffer.isBuffer(u[t].content)&&(u[t]=u[t].content.toString()))}),u.icalEvent&&Buffer.isBuffer(u.icalEvent.content)&&(u.icalEvent.content=u.icalEvent.content.toString("base64"),u.icalEvent.encoding="base64"),u.alternatives&&u.alternatives.length&&u.alternatives.forEach(t=>{t&&t.content&&Buffer.isBuffer(t.content)&&(t.content=t.content.toString("base64"),t.encoding="base64")}),u.attachments&&u.attachments.length&&u.attachments.forEach(t=>{t&&t.content&&Buffer.isBuffer(t.content)&&(t.content=t.content.toString("base64"),t.encoding="base64")}),u.normalizedHeaders={},Object.keys(u.headers||{}).forEach(t=>{let r=[].concat(u.headers[t]||[]).shift();(r=r&&r.value||r)&&(["references","in-reply-to","message-id","content-id"].includes(t)&&(r=this.message._encodeHeaderValue(t,r)),u.normalizedHeaders[t]=r)}),u.list&&"object"==typeof u.list&&this._getListHeaders(u.list).forEach(t=>{u.normalizedHeaders[t.key]=t.value.map(t=>t&&t.value||t).join(", ")}),u.references&&(u.normalizedHeaders.references=this.message._encodeHeaderValue("references",u.references)),u.inReplyTo&&(u.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",u.inReplyTo)),t(null,u)))}setMailerHeader(){this.message&&this.data.xMailer&&this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(this.message&&this.data.priority)switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low")}}setListHeaders(){this.message&&this.data.list&&"object"==typeof this.data.list&&this.data.list&&"object"==typeof this.data.list&&this._getListHeaders(this.data.list).forEach(t=>{t.value.forEach(r=>{this.message.addHeader(t.key,r)})})}_getListHeaders(t){return Object.keys(t).map(r=>({key:"list-"+r.toLowerCase().trim(),value:[].concat(t[r]||[]).map(t=>({prepared:!0,foldLines:!0,value:[].concat(t||[]).map(t=>{if("string"==typeof t&&(t={url:t}),t&&t.url){if("id"===r.toLowerCase().trim()){let r=t.comment||"";return r=h.isPlainText(r)?'"'+r+'"':h.encodeWord(r),(t.comment?r+" ":"")+this._formatListUrl(t.url).replace(/^<[^:]+\/{,2}/,"")}let s=t.comment||"";return h.isPlainText(s)||(s=h.encodeWord(s)),this._formatListUrl(t.url)+(t.comment?" ("+s+")":"")}return""}).filter(t=>t).join(", ")}))}))}_formatListUrl(t){return(t=t.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(t))?"<"+t+">":/^[^@]+@[^@]+$/.test(t)?"<mailto:"+t+">":"<http://"+t+">"}}},29571:(t,r,s)=>{"use strict";let p=s(45066),u=s(34482),h=s(80909);t.exports={isPlainText:(t,r)=>!("string"!=typeof t||(r?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(t)),hasLongerLines:(t,r)=>t.length>131072||RegExp("^.{"+(r+1)+",}","m").test(t),encodeWord(t,r,s){let h;r=(r||"Q").toString().toUpperCase().trim().charAt(0);let w="UTF-8";if((s=s||0)&&s>7+w.length&&(s-=7+w.length),"Q"===r?h=u.encode(t).replace(/[^a-z0-9!*+\-/=]/gi,t=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return" "===t?"_":"="+(1===r.length?"0"+r:r)}):"B"===r&&(h="string"==typeof t?t:p.encode(t),s=s?Math.max(3,(s-s%4)/4*3):0),s&&("B"!==r?h:p.encode(t)).length>s){if("Q"===r)h=this.splitMimeEncodedString(h,s).join("?= =?"+w+"?"+r+"?");else{let t=[],u="";for(let r=0,w=h.length;r<w;r++){let E=h.charAt(r);/[\ud83c\ud83d\ud83e]/.test(E)&&r<w-1&&(E+=h.charAt(++r)),Buffer.byteLength(u+E)<=s||0===r?u+=E:(t.push(p.encode(u)),u=E)}u&&t.push(p.encode(u)),h=t.length>1?t.join("?= =?"+w+"?"+r+"?"):t.join("")}}else"B"===r&&(h=p.encode(t));return"=?"+w+"?"+r+"?"+h+("?="===h.substr(-2)?"":"?=")},encodeWords(t,r,s,p){s=s||0;let u=t.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!u)return t;if(p)return this.encodeWord(t,r,s);let h=t.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!h)return t;let w=u.index+(u[0].match(/[^\s]/)||{index:0}).index,E=h.index+(h[1]||"").length;return(w?t.substr(0,w):"")+this.encodeWord(t.substring(w,E),r||"Q",s)+(E<t.length?t.substr(E):"")},buildHeaderValue(t){let r=[];return Object.keys(t.params||{}).forEach(s=>{let p=t.params[s];!this.isPlainText(p,!0)||p.length>=75?this.buildHeaderParam(s,p,50).forEach(t=>{/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(t.value)&&"*"!==t.key.substr(-1)?r.push(t.key+"="+JSON.stringify(t.value)):r.push(t.key+"="+t.value)}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(p)?r.push(s+"="+JSON.stringify(p)):r.push(s+"="+p)}),t.value+(r.length?"; "+r.join("; "):"")},buildHeaderParam(t,r,s){let p,u,h,w,E,A,R=[],I="string"==typeof r?r:(r||"").toString(),U=0;if(s=s||50,this.isPlainText(r,!0)){if(I.length<=s)return[{key:t,value:I}];(I=I.replace(RegExp(".{"+s+"}","g"),t=>(R.push({line:t}),"")))&&R.push({line:I})}else{if(/[\uD800-\uDBFF]/.test(I)){for(E=0,p=[],A=I.length;E<A;E++)(h=(u=I.charAt(E)).charCodeAt(0))>=55296&&h<=56319&&E<A-1?(u+=I.charAt(E+1),p.push(u),E++):p.push(u);I=p}w="utf-8''";let t=!0;for(E=0,U=0,A=I.length;E<A;E++){if(u=I[E],t)u=this.safeEncodeURIComponent(u);else if((u=" "===u?u:this.safeEncodeURIComponent(u))!==I[E]){if((this.safeEncodeURIComponent(w)+u).length>=s)R.push({line:w,encoded:t}),w="",U=E-1;else{t=!0,E=U,w="";continue}}(w+u).length>=s?(R.push({line:w,encoded:t}),w=u=" "===I[E]?" ":this.safeEncodeURIComponent(I[E]),u===I[E]?(t=!1,U=E-1):t=!0):w+=u}w&&R.push({line:w,encoded:t})}return R.map((r,s)=>({key:t+"*"+s+(r.encoded?"*":""),value:r.line}))},parseHeaderValue(t){let r,s={value:!1,params:{}},p=!1,u="",h="value",w=!1,E=!1;for(let A=0,R=t.length;A<R;A++)if(r=t.charAt(A),"key"===h){if("="===r){p=u.trim().toLowerCase(),h="value",u="";continue}u+=r}else{if(E)u+=r;else if("\\"===r){E=!0;continue}else w&&r===w?w=!1:w||'"'!==r?w||";"!==r?u+=r:(!1===p?s.value=u.trim():s.params[p]=u.trim(),h="key",u=""):w=r;E=!1}return"value"===h?!1===p?s.value=u.trim():s.params[p]=u.trim():u.trim()&&(s.params[u.trim().toLowerCase()]=""),Object.keys(s.params).forEach(t=>{let r,p,u,h;(u=t.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(r=t.substr(0,u.index),p=Number(u[2]||u[3])||0,s.params[r]&&"object"==typeof s.params[r]||(s.params[r]={charset:!1,values:[]}),h=s.params[t],0===p&&"*"===u[0].substr(-1)&&(u=h.match(/^([^']*)'[^']*'(.*)$/))&&(s.params[r].charset=u[1]||"iso-8859-1",h=u[2]),s.params[r].values[p]=h,delete s.params[t])}),Object.keys(s.params).forEach(t=>{let r;s.params[t]&&Array.isArray(s.params[t].values)&&(r=s.params[t].values.map(t=>t||"").join(""),s.params[t].charset?s.params[t]="=?"+s.params[t].charset+"?Q?"+r.replace(/[=?_\s]/g,t=>{let r=t.charCodeAt(0).toString(16);return" "===t?"_":"%"+(r.length<2?"0":"")+r}).replace(/%/g,"=")+"?=":s.params[t]=r)}),s},detectExtension:t=>h.detectExtension(t),detectMimeType:t=>h.detectMimeType(t),foldLines(t,r,s){t=(t||"").toString(),r=r||76;let p=0,u=t.length,h="",w,E;for(;p<u;){if((w=t.substr(p,r)).length<r){h+=w;break}if(E=w.match(/^[^\n\r]*(\r?\n|\r)/)){h+=w=E[0],p+=w.length;continue}(E=w.match(/(\s+)[^\s]*$/))&&E[0].length-(s?(E[1]||"").length:0)<w.length?w=w.substr(0,w.length-(E[0].length-(s?(E[1]||"").length:0))):(E=t.substr(p+w.length).match(/^[^\s]+(\s*)/))&&(w+=E[0].substr(0,E[0].length-(s?0:(E[1]||"").length))),h+=w,(p+=w.length)<u&&(h+="\r\n")}return h},splitMimeEncodedString:(t,r)=>{let s,p,u,h,w=[];for(r=Math.max(r||0,12);t.length;){for((p=(s=t.substr(0,r)).match(/[=][0-9A-F]?$/i))&&(s=s.substr(0,p.index)),h=!1;!h;)h=!0,(p=t.substr(s.length).match(/^[=]([0-9A-F]{2})/i))&&(u=parseInt(p[1],16))<194&&u>127&&(s=s.substr(0,s.length-3),h=!1);s.length&&w.push(s),t=t.substr(s.length)}return w},encodeURICharComponent:t=>{let r="",s=t.charCodeAt(0).toString(16).toUpperCase();if(s.length%2&&(s="0"+s),s.length>2)for(let t=0,p=s.length/2;t<p;t++)r+="%"+s.substr(t,2);else r+="%"+s;return r},safeEncodeURIComponent(t){t=(t||"").toString();try{t=encodeURIComponent(t)}catch(r){return t.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return t.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,t=>this.encodeURICharComponent(t))}}},80909:(t,r,s)=>{"use strict";let p=s(71017),u="application/octet-stream",h=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),w=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);t.exports={detectMimeType(t){if(!t)return u;let r=p.parse(t),s=(r.ext.substr(1)||r.name||"").split("?").shift().trim().toLowerCase(),h=u;return(w.has(s)&&(h=w.get(s)),Array.isArray(h))?h[0]:h},detectExtension(t){if(!t)return"bin";let r=(t||"").toLowerCase().trim().split("/"),s=r.shift().trim(),p=r.join("/").trim();if(h.has(s+"/"+p)){let t=h.get(s+"/"+p);return Array.isArray(t)?t[0]:t}return"text"===s?"txt":"bin"}}},94882:(t,r,s)=>{"use strict";let p=s(6113),u=s(57147),h=s(71154),w=s(12781).PassThrough,E=s(27281),A=s(29571),R=s(34482),I=s(45066),U=s(82005),N=s(92024),W=s(94776),J=s(85591),K=s(23373);let MimeNode=class MimeNode{constructor(t,r){this.nodeCounter=0,r=r||{},this.baseBoundary=r.baseBoundary||p.randomBytes(8).toString("hex"),this.boundaryPrefix=r.boundaryPrefix||"--_NmP",this.disableFileAccess=!!r.disableFileAccess,this.disableUrlAccess=!!r.disableUrlAccess,this.normalizeHeaderKey=r.normalizeHeaderKey,this.date=new Date,this.rootNode=r.rootNode||this,this.keepBcc=!!r.keepBcc,r.filename&&(this.filename=r.filename,t||(t=A.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(r.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=r.parentNode,this.hostname=r.hostname,this.newline=r.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],t&&this.setHeader("Content-Type",t)}createChild(t,r){r||"object"!=typeof t||(r=t,t=void 0);let s=new MimeNode(t,r);return this.appendChild(s),s}appendChild(t){return t.rootNode!==this.rootNode&&(t.rootNode=this.rootNode,t._nodeId=++this.rootNode.nodeCounter),t.parentNode=this,this.childNodes.push(t),t}replace(t){return t===this?this:(this.parentNode.childNodes.forEach((r,s)=>{r===this&&(t.rootNode=this.rootNode,t.parentNode=this.parentNode,t._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,t.parentNode.childNodes[s]=t)}),t)}remove(){if(!this.parentNode)return this;for(let t=this.parentNode.childNodes.length-1;t>=0;t--)if(this.parentNode.childNodes[t]===this)return this.parentNode.childNodes.splice(t,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(t,r){let s=!1,p;if(!r&&t&&"object"==typeof t)return t.key&&"value"in t?this.setHeader(t.key,t.value):Array.isArray(t)?t.forEach(t=>{this.setHeader(t.key,t.value)}):Object.keys(t).forEach(r=>{this.setHeader(r,t[r])}),this;p={key:t=this._normalizeHeaderKey(t),value:r};for(let r=0,u=this._headers.length;r<u;r++)this._headers[r].key===t&&(s?(this._headers.splice(r,1),r--,u--):(this._headers[r]=p,s=!0));return s||this._headers.push(p),this}addHeader(t,r){return!r&&t&&"object"==typeof t?t.key&&t.value?this.addHeader(t.key,t.value):Array.isArray(t)?t.forEach(t=>{this.addHeader(t.key,t.value)}):Object.keys(t).forEach(r=>{this.addHeader(r,t[r])}):Array.isArray(r)?r.forEach(r=>{this.addHeader(t,r)}):this._headers.push({key:this._normalizeHeaderKey(t),value:r}),this}getHeader(t){t=this._normalizeHeaderKey(t);for(let r=0,s=this._headers.length;r<s;r++)if(this._headers[r].key===t)return this._headers[r].value}setContent(t){return this.content=t,"function"==typeof this.content.pipe?(this._contentErrorHandler=t=>{this.content.removeListener("error",this._contentErrorHandler),this.content=t},this.content.once("error",this._contentErrorHandler)):"string"==typeof this.content&&(this._isPlainText=A.isPlainText(this.content),this._isPlainText&&A.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(t){let r;t||(r=new Promise((r,s)=>{t=E.callbackPromise(r,s)}));let s=this.createReadStream(),p=[],u=0,h=!1;return s.on("readable",()=>{let t;for(;null!==(t=s.read());)p.push(t),u+=t.length}),s.once("error",r=>{if(!h)return h=!0,t(r)}),s.once("end",r=>{if(!h)return h=!0,r&&r.length&&(p.push(r),u+=r.length),t(null,Buffer.concat(p,u))}),r}getTransferEncoding(){let t=!1,r=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return!this.content||(t=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim())&&["base64","quoted-printable"].includes(t)||(/^text\//i.test(r)?t=this._isPlainText&&!this._hasLongLines?"7bit":"string"==typeof this.content||this.content instanceof Buffer?"Q"===this._getTextEncoding(this.content)?"quoted-printable":"base64":"B"===this.textEncoding?"base64":"quoted-printable":/^(multipart|message)\//i.test(r)||(t=t||"base64")),t}buildHeaders(){let t=this.getTransferEncoding(),r=[];if(t&&this.setHeader("Content-Transfer-Encoding",t),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let t=this._headers.length-2;t>=0;t--){let r=this._headers[t];"Content-Type"===r.key&&(this._headers.splice(t,1),this._headers.push(r))}}return this._headers.forEach(t=>{let s,p,u=t.key,h=t.value,w={};if(!h||"object"!=typeof h||["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(u)||(Object.keys(h).forEach(t=>{"value"!==t&&(w[t]=h[t])}),(h=(h.value||"").toString()).trim())){if(w.prepared){w.foldLines?r.push(A.foldLines(u+": "+h)):r.push(u+": "+h);return}switch(t.key){case"Content-Disposition":s=A.parseHeaderValue(h),this.filename&&(s.params.filename=this.filename),h=A.buildHeaderValue(s);break;case"Content-Type":s=A.parseHeaderValue(h),this._handleContentType(s),s.value.match(/^text\/plain\b/)&&"string"==typeof this.content&&/[\u0080-\uFFFF]/.test(this.content)&&(s.params.charset="utf-8"),h=A.buildHeaderValue(s),this.filename&&(((p=this._encodeWords(this.filename))!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(p))&&(p='"'+p+'"'),h+="; name="+p);break;case"Bcc":if(!this.keepBcc)return}if(((h=this._encodeHeaderValue(u,h))||"").toString().trim()){if("function"==typeof this.normalizeHeaderKey){let t=this.normalizeHeaderKey(u,h);t&&"string"==typeof t&&t.length&&(u=t)}r.push(A.foldLines(u+": "+h,76))}}}),r.join("\r\n")}createReadStream(t){let r;t=t||{};let s=new w(t),p=s;this.stream(s,t,t=>{if(t){p.emit("error",t);return}s.end()});for(let t=0,s=this._transforms.length;t<s;t++)r="function"==typeof this._transforms[t]?this._transforms[t]():this._transforms[t],p.once("error",t=>{r.emit("error",t)}),p=p.pipe(r);r=new W,p.once("error",t=>{r.emit("error",t)}),p=p.pipe(r);for(let t=0,s=this._processFuncs.length;t<s;t++)p=(r=this._processFuncs[t])(p);if(this.newline){let t=["win","windows","dos","\r\n"].includes(this.newline.toString().toLowerCase()),r=t?new J:new K,s=p.pipe(r);return p.on("error",t=>s.emit("error",t)),s}return p}transform(t){this._transforms.push(t)}processFunc(t){this._processFuncs.push(t)}stream(t,r,s){let p,u,h=this.getTransferEncoding(),w=!1,callback=t=>{w||(w=!0,s(t))},finalize=()=>{let s=0,processChildNode=()=>{if(s>=this.childNodes.length)return t.write("\r\n--"+this.boundary+"--\r\n"),callback();let p=this.childNodes[s++];t.write((s>1?"\r\n":"")+"--"+this.boundary+"\r\n"),p.stream(t,r,t=>{if(t)return callback(t);setImmediate(processChildNode)})};if(!this.multipart)return callback();setImmediate(processChildNode)};this._raw?setImmediate(()=>{if("[object Error]"===Object.prototype.toString.call(this._raw))return callback(this._raw);"function"==typeof this._raw.pipe&&this._raw.removeListener("error",this._contentErrorHandler);let r=this._getStream(this._raw);r.pipe(t,{end:!1}),r.on("error",r=>t.emit("error",r)),r.on("end",finalize)}):(t.write(this.buildHeaders()+"\r\n\r\n"),setImmediate(()=>{if(!this.content)return setImmediate(finalize);{if("[object Error]"===Object.prototype.toString.call(this.content))return callback(this.content);"function"==typeof this.content.pipe&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=t=>callback(t),this.content.once("error",this._contentErrorHandler));let createStream=()=>{["quoted-printable","base64"].includes(h)?((p=new("base64"===h?I:R).Encoder(r)).pipe(t,{end:!1}),p.once("end",finalize),p.once("error",t=>callback(t)),(u=this._getStream(this.content)).pipe(p)):((u=this._getStream(this.content)).pipe(t,{end:!1}),u.once("end",finalize)),u.once("error",t=>callback(t))};if(this.content._resolve){let t=[],r=0,s=!1,p=this._getStream(this.content);p.on("error",t=>{s||(s=!0,callback(t))}),p.on("readable",()=>{let s;for(;null!==(s=p.read());)t.push(s),r+=s.length}),p.on("end",()=>{s||(s=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(t,r),setImmediate(createStream))})}else setImmediate(createStream);return}}))}setEnvelope(t){let r;this._envelope={from:!1,to:[]},t.from&&(r=[],this._convertAddresses(this._parseAddresses(t.from),r),(r=r.filter(t=>t&&t.address)).length&&r[0]&&(this._envelope.from=r[0].address)),["to","cc","bcc"].forEach(r=>{t[r]&&this._convertAddresses(this._parseAddresses(t[r]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(t=>t.address).filter(t=>t);let s=["to","cc","bcc","from"];return Object.keys(t).forEach(r=>{s.includes(r)||(this._envelope[r]=t[r])}),this}getAddresses(){let t={};return this._headers.forEach(r=>{let s=r.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(s)&&(Array.isArray(t[s])||(t[s]=[]),this._convertAddresses(this._parseAddresses(r.value),t[s]))}),t}getEnvelope(){if(this._envelope)return this._envelope;let t={from:!1,to:[]};return this._headers.forEach(r=>{let s=[];"From"===r.key||!t.from&&["Reply-To","Sender"].includes(r.key)?(this._convertAddresses(this._parseAddresses(r.value),s),s.length&&s[0]&&(t.from=s[0].address)):["To","Cc","Bcc"].includes(r.key)&&this._convertAddresses(this._parseAddresses(r.value),t.to)}),t.to=t.to.map(t=>t.address),t}messageId(){let t=this.getHeader("Message-ID");return t||(t=this._generateMessageId(),this.setHeader("Message-ID",t)),t}setRaw(t){return this._raw=t,this._raw&&"function"==typeof this._raw.pipe&&(this._contentErrorHandler=t=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=t},this._raw.once("error",this._contentErrorHandler)),this}_getStream(t){let r;return t._resolvedValue?(r=new w,setImmediate(()=>{try{r.end(t._resolvedValue)}catch(t){r.emit("error",t)}}),r):"function"==typeof t.pipe?t:t&&"string"==typeof t.path&&!t.href?this.disableFileAccess?(r=new w,setImmediate(()=>r.emit("error",Error("File access rejected for "+t.path))),r):u.createReadStream(t.path):t&&"string"==typeof t.href?this.disableUrlAccess?(r=new w,setImmediate(()=>r.emit("error",Error("Url access rejected for "+t.href))),r):N(t.href,{headers:t.httpHeaders}):(r=new w,setImmediate(()=>{try{r.end(t||"")}catch(t){r.emit("error",t)}}),r)}_parseAddresses(t){return[].concat.apply([],[].concat(t).map(t=>t&&t.address?(t.address=this._normalizeAddress(t.address),t.name=t.name||"",[t]):U(t)))}_normalizeHeaderKey(t){return t=(t||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,t=>t.toUpperCase()).replace(/^Content-Features$/i,"Content-features")}_handleContentType(t){this.contentType=t.value.trim().toLowerCase(),this.multipart=!!/^multipart\//i.test(this.contentType)&&this.contentType.substr(this.contentType.indexOf("/")+1),this.multipart?this.boundary=t.params.boundary=t.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(t,r){switch(t=this._normalizeHeaderKey(t)){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(r));case"Message-ID":case"In-Reply-To":case"Content-Id":return"<"!==(r=(r||"").toString().replace(/\r?\n|\r/g," ")).charAt(0)&&(r="<"+r),">"!==r.charAt(r.length-1)&&(r+=">"),r;case"References":return(r=[].concat.apply([],[].concat(r||"").map(t=>(t=(t||"").toString().replace(/\r?\n|\r/g," ").trim()).replace(/<[^>]*>/g,t=>t.replace(/\s/g,"")).split(/\s+/))).map(t=>("<"!==t.charAt(0)&&(t="<"+t),">"!==t.charAt(t.length-1)&&(t+=">"),t))).join(" ").trim();case"Date":if("[object Date]"===Object.prototype.toString.call(r))return r.toUTCString().replace(/GMT/,"+0000");return r=(r||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(r);case"Content-Type":case"Content-Disposition":return(r||"").toString().replace(/\r?\n|\r/g," ");default:return r=(r||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(r)}}_convertAddresses(t,r){let s=[];return r=r||[],[].concat(t||[]).forEach(t=>{if(t.address)t.address=this._normalizeAddress(t.address),t.name?t.name&&s.push(`${this._encodeAddressName(t.name)} <${t.address}>`):s.push(t.address.indexOf(" ")>=0?`<${t.address}>`:`${t.address}`),t.address&&!r.filter(r=>r.address===t.address).length&&r.push(t);else if(t.group){let p=(t.group.length?this._convertAddresses(t.group,r):"").trim();s.push(`${this._encodeAddressName(t.name)}:${p};`)}}),s.join(", ")}_normalizeAddress(t){let r;let s=(t=(t||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim()).lastIndexOf("@");if(s<0)return t;let p=t.substr(0,s),u=t.substr(s+1);try{r=h.toASCII(u.toLowerCase())}catch(t){}return p.indexOf(" ")>=0&&('"'!==p.charAt(0)&&(p='"'+p),'"'!==p.substr(-1)&&(p+='"')),`${p}@${r}`}_encodeAddressName(t){return/^[\w ]*$/.test(t)?t:/^[\x20-\x7e]*$/.test(t)?'"'+t.replace(/([\\"])/g,"\\$1")+'"':A.encodeWord(t,this._getTextEncoding(t),52)}_encodeWords(t){return A.encodeWords(t,this._getTextEncoding(t),52,!0)}_getTextEncoding(t){t=(t||"").toString();let r=this.textEncoding;return r||(r=(t.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length<(t.match(/[a-z]/gi)||[]).length?"Q":"B"),r}_generateMessageId(){return"<"+[2,2,2,6].reduce((t,r)=>t+"-"+p.randomBytes(r).toString("hex"),p.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}};t.exports=MimeNode},94776:(t,r,s)=>{"use strict";let p=s(12781).Transform;t.exports=class extends p{constructor(){super(),this.lastByte=!1}_transform(t,r,s){t.length&&(this.lastByte=t[t.length-1]),this.push(t),s()}_flush(t){return 10===this.lastByte||(13===this.lastByte?this.push(Buffer.from("\n")):this.push(Buffer.from("\r\n"))),t()}}},23373:(t,r,s)=>{"use strict";let p=s(12781),u=p.Transform;t.exports=class extends u{constructor(t){super(t),this.options=t||{}}_transform(t,r,s){let p;let u=0;for(let r=0,s=t.length;r<s;r++)13===t[r]&&(p=t.slice(u,r),u=r+1,this.push(p));u&&u<t.length?(p=t.slice(u),this.push(p)):u||this.push(t),s()}}},85591:(t,r,s)=>{"use strict";let p=s(12781),u=p.Transform;t.exports=class extends u{constructor(t){super(t),this.options=t||{},this.lastByte=!1}_transform(t,r,s){let p;let u=0;for(let r=0,s=t.length;r<s;r++)10===t[r]&&(r&&13!==t[r-1]||!r&&13!==this.lastByte)&&(r>u&&(p=t.slice(u,r),this.push(p)),this.push(Buffer.from("\r\n")),u=r+1);u&&u<t.length?(p=t.slice(u),this.push(p)):u||this.push(t),this.lastByte=t[t.length-1],s()}}},66709:(t,r,s)=>{"use strict";let p=s(34007),u=s(27281),h=s(44531),w=s(44245),E=s(58640),A=s(26551),R=s(1897),I=s(14528),U=s(92024),N=s(93259),W=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),J=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),K=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,G=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),X=!1;t.exports.createTransport=function(t,r){let s,U;return("object"==typeof t&&"function"!=typeof t.send||"string"==typeof t&&/^(smtps?|direct):/i.test(t))&&(t=(U=(s="string"==typeof t?t:t.url)?u.parseConnectionUrl(s):t).pool?new h(U):U.sendmail?new E(U):U.streamTransport?new A(U):U.jsonTransport?new R(U):U.SES?new I(U):new w(U)),new p(t,U,r)},t.exports.createTestAccount=function(t,r){let s;if(r||"function"!=typeof t||(r=t,t=!1),r||(s=new Promise((t,s)=>{r=u.callbackPromise(t,s)})),G&&X)return setImmediate(()=>r(null,X)),s;t=t||W;let p=[],h=0,w={},E={requestor:N.name,version:N.version};K&&(w.Authorization="Bearer "+K);let A=U(t+"/user",{contentType:"application/json",method:"POST",headers:w,body:Buffer.from(JSON.stringify(E))});return A.on("readable",()=>{let t;for(;null!==(t=A.read());)p.push(t),h+=t.length}),A.once("error",t=>r(t)),A.once("end",()=>{let t,s,u=Buffer.concat(p,h);try{t=JSON.parse(u.toString())}catch(t){s=t}return s?r(s):"success"!==t.status||t.error?r(Error(t.error||"Request failed")):void(delete t.status,r(null,X=t))}),s},t.exports.getTestMessageUrl=function(t){if(!t||!t.response)return!1;let r=new Map;return t.response.replace(/\[([^\]]+)\]$/,(t,s)=>{s.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(t,s,p)=>{r.set(s,p)})}),!!(r.has("STATUS")&&r.has("MSGID"))&&(X.web||J)+"/message/"+r.get("MSGID")}},71154:t=>{"use strict";let r=/^xn--/,s=/[^\0-\x7F]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,w=String.fromCharCode;function error(t){throw RangeError(u[t])}function mapDomain(t,r){let s=t.split("@"),u="";s.length>1&&(u=s[0]+"@",t=s[1]),t=t.replace(p,".");let h=t.split("."),w=(function(t,r){let s=[],p=t.length;for(;p--;)s[p]=r(t[p]);return s})(h,r).join(".");return u+w}function ucs2decode(t){let r=[],s=0,p=t.length;for(;s<p;){let u=t.charCodeAt(s++);if(u>=55296&&u<=56319&&s<p){let p=t.charCodeAt(s++);(64512&p)==56320?r.push(((1023&u)<<10)+(1023&p)+65536):(r.push(u),s--)}else r.push(u)}return r}let digitToBasic=function(t,r){return t+22+75*(t<26)-((0!=r)<<5)},adapt=function(t,r,s){let p=0;for(t=s?h(t/700):t>>1,t+=h(t/r);t>455;p+=36)t=h(t/35);return h(p+36*t/(t+38))},decode=function(t){let r=[],s=t.length,p=0,u=128,w=72,E=t.lastIndexOf("-");E<0&&(E=0);for(let s=0;s<E;++s)t.charCodeAt(s)>=128&&error("not-basic"),r.push(t.charCodeAt(s));for(let R=E>0?E+1:0;R<s;){let E=p;for(let r=1,u=36;;u+=36){var A;R>=s&&error("invalid-input");let E=(A=t.charCodeAt(R++))>=48&&A<58?26+(A-48):A>=65&&A<91?A-65:A>=97&&A<123?A-97:36;E>=36&&error("invalid-input"),E>h((2147483647-p)/r)&&error("overflow"),p+=E*r;let I=u<=w?1:u>=w+26?26:u-w;if(E<I)break;let U=36-I;r>h(2147483647/U)&&error("overflow"),r*=U}let I=r.length+1;w=adapt(p-E,I,0==E),h(p/I)>2147483647-u&&error("overflow"),u+=h(p/I),p%=I,r.splice(p++,0,u)}return String.fromCodePoint(...r)},encode=function(t){let r=[];t=ucs2decode(t);let s=t.length,p=128,u=0,E=72;for(let s of t)s<128&&r.push(w(s));let A=r.length,R=A;for(A&&r.push("-");R<s;){let s=2147483647;for(let r of t)r>=p&&r<s&&(s=r);let I=R+1;for(let U of(s-p>h((2147483647-u)/I)&&error("overflow"),u+=(s-p)*I,p=s,t))if(U<p&&++u>2147483647&&error("overflow"),U===p){let t=u;for(let s=36;;s+=36){let p=s<=E?1:s>=E+26?26:s-E;if(t<p)break;let u=t-p,A=36-p;r.push(w(digitToBasic(p+u%A,0))),t=h(u/A)}r.push(w(digitToBasic(t,0))),E=adapt(u,I,R===A),u=0,++R}++u,++p}return r.join("")};t.exports={version:"2.3.1",ucs2:{decode:ucs2decode,encode:t=>String.fromCodePoint(...t)},decode:decode,encode:encode,toASCII:function(t){return mapDomain(t,function(t){return s.test(t)?"xn--"+encode(t):t})},toUnicode:function(t){return mapDomain(t,function(t){return r.test(t)?decode(t.slice(4).toLowerCase()):t})}}},34482:(t,r,s)=>{"use strict";let p=s(12781).Transform;function encode(t){let r;"string"==typeof t&&(t=Buffer.from(t,"utf-8"));let s=[[9],[10],[13],[32,60],[62,126]],p="";for(let u=0,h=t.length;u<h;u++){if(function(t,r){for(let s=r.length-1;s>=0;s--)if(r[s].length&&(1===r[s].length&&t===r[s][0]||2===r[s].length&&t>=r[s][0]&&t<=r[s][1]))return!0;return!1}(r=t[u],s)&&!((32===r||9===r)&&(u===h-1||10===t[u+1]||13===t[u+1]))){p+=String.fromCharCode(r);continue}p+="="+(r<16?"0":"")+r.toString(16).toUpperCase()}return p}function wrap(t,r){let s,p,u;if(t=(t||"").toString(),r=r||76,t.length<=r)return t;let h=0,w=t.length,E=Math.floor(r/3),A="";for(;h<w;){if(s=(u=t.substr(h,r)).match(/\r\n/)){A+=u=u.substr(0,s.index+s[0].length),h+=u.length;continue}if("\n"===u.substr(-1)){A+=u,h+=u.length;continue}if(s=u.substr(-E).match(/\n.*?$/)){A+=u=u.substr(0,u.length-(s[0].length-1)),h+=u.length;continue}if(u.length>r-E&&(s=u.substr(-E).match(/[ \t.,!?][^ \t.,!?]*$/)))u=u.substr(0,u.length-(s[0].length-1));else if(u.match(/[=][\da-f]{0,2}$/i))for((s=u.match(/[=][\da-f]{0,1}$/i))&&(u=u.substr(0,u.length-s[0].length));u.length>3&&u.length<w-h&&!u.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(s=u.match(/[=][\da-f]{2}$/gi))&&!((p=parseInt(s[0].substr(1,2),16))<128)&&(u=u.substr(0,u.length-3),!(p>=192)););h+u.length<w&&"\n"!==u.substr(-1)?(u.length===r&&u.match(/[=][\da-f]{2}$/i)?u=u.substr(0,u.length-3):u.length===r&&(u=u.substr(0,u.length-1)),h+=u.length,u+="=\r\n"):h+=u.length,A+=u}return A}t.exports={encode,wrap,Encoder:class extends p{constructor(t){super(),this.options=t||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(t,r,s){let p;if("buffer"!==r&&(t=Buffer.from(t,r)),!t||!t.length)return s();this.inputBytes+=t.length,this.options.lineLength?(p=(p=wrap(p=this._curLine+encode(t),this.options.lineLength)).replace(/(^|\n)([^\n]*)$/,(t,r,s)=>(this._curLine=s,r)))&&(this.outputBytes+=p.length,this.push(p)):(p=encode(t),this.outputBytes+=p.length,this.push(p,"ascii")),s()}_flush(t){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),t()}}}},58640:(t,r,s)=>{"use strict";let p=s(32081).spawn,u=s(93259),h=s(27281);t.exports=class{constructor(t){t=t||{},this._spawn=p,this.options=t||{},this.name="Sendmail",this.version=u.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=h.getLogger(this.options,{component:this.options.component||"sendmail"}),t&&("string"==typeof t?this.path=t:"object"==typeof t&&(t.path&&(this.path=t.path),Array.isArray(t.args)&&(this.args=t.args),this.winbreak=["win","windows","dos","\r\n"].includes((t.newline||"").toString().toLowerCase())))}send(t,r){let s,p,u;t.message.keepBcc=!0;let h=t.data.envelope||t.message.getEnvelope(),w=t.message.messageId(),E=[].concat(h.from||[]).concat(h.to||[]).some(t=>/^-/.test(t));if(E)return r(Error("Can not send mail. Invalid envelope addresses."));s=this.args?["-i"].concat(this.args).concat(h.to):["-i"].concat(h.from?["-f",h.from]:[]).concat(h.to);let callback=s=>{if(!u&&(u=!0,"function"==typeof r))return s?r(s):r(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:w,response:"Messages queued for delivery"})};try{p=this._spawn(this.path,s)}catch(t){return this.logger.error({err:t,tnx:"spawn",messageId:w},"Error occurred while spawning sendmail. %s",t.message),callback(t)}if(!p)return callback(Error("sendmail was not found"));{p.on("error",t=>{this.logger.error({err:t,tnx:"spawn",messageId:w},"Error occurred when sending message %s. %s",w,t.message),callback(t)}),p.once("exit",t=>{let r;if(!t)return callback();r=127===t?Error("Sendmail command not found, process exited with code "+t):Error("Sendmail exited with code "+t),this.logger.error({err:r,tnx:"stdin",messageId:w},"Error sending message %s to sendmail. %s",w,r.message),callback(r)}),p.once("close",callback),p.stdin.on("error",t=>{this.logger.error({err:t,tnx:"stdin",messageId:w},"Error occurred when piping message %s to sendmail. %s",w,t.message),callback(t)});let r=[].concat(h.to||[]);r.length>3&&r.push("...and "+r.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:w},"Sending message %s to <%s>",w,r.join(", "));let s=t.message.createReadStream();s.once("error",t=>{this.logger.error({err:t,tnx:"stdin",messageId:w},"Error occurred when generating message %s. %s",w,t.message),p.kill("SIGINT"),callback(t)}),s.pipe(p.stdin)}}}},14528:(t,r,s)=>{"use strict";let p=s(82361),u=s(93259),h=s(27281),w=s(85591);t.exports=class extends p{constructor(t){super(),t=t||{},this.options=t||{},this.ses=this.options.SES,this.name="SESTransport",this.version=u.version,this.logger=h.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(t,r){if(this.connections>=this.maxConnections||!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:t,callback:r});this._send(t,(...t)=>{setImmediate(()=>r(...t)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let t=this.pending.shift();this._send(t.mail,(...r)=>{setImmediate(()=>t.callback(...r)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let t=Date.now(),r=!1;for(let s=this.rateMessages.length-1;s>=0;s--)this.rateMessages[s].ts>=t-this.rateInterval&&(!r||this.rateMessages[s].ts<r)&&(r=this.rateMessages[s].ts),this.rateMessages[s].ts<t-this.rateInterval&&!this.rateMessages[s].pending&&this.rateMessages.splice(s,1);if(this.rateMessages.length<this.sendingRate)return!0;let s=Math.max(r+1001,t+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),t-s);try{this.sendingRateTTL.unref()}catch(t){}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(t,r){let s={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(s);let p=t.data.envelope||t.message.getEnvelope(),u=t.message.messageId(),h=[].concat(p.to||[]);h.length>3&&h.push("...and "+h.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:u},"Sending message %s to <%s>",u,h.join(", "));let getRawMessage=r=>{t.data._dkim||(t.data._dkim={}),t.data._dkim.skipFields&&"string"==typeof t.data._dkim.skipFields?t.data._dkim.skipFields+=":date:message-id":t.data._dkim.skipFields="date:message-id";let s=t.message.createReadStream(),p=s.pipe(new w),u=[],h=0;p.on("readable",()=>{let t;for(;null!==(t=p.read());)u.push(t),h+=t.length}),s.once("error",t=>p.emit("error",t)),p.once("error",t=>{r(t)}),p.once("end",()=>r(null,Buffer.concat(u,h)))};setImmediate(()=>getRawMessage((h,w)=>{var E;if(h)return this.logger.error({err:h,tnx:"send",messageId:u},"Failed creating message for %s. %s",u,h.message),s.pending=!1,r(h);let A={RawMessage:{Data:w},Source:p.from,Destinations:p.to};Object.keys(t.data.ses||{}).forEach(r=>{A[r]=t.data.ses[r]});let R=(this.ses.aws?this.ses.ses:this.ses)||{},I=this.ses.aws||{};E=(t,h)=>{(t||!h)&&(h="us-east-1"),("function"==typeof R.send&&I.SendRawEmailCommand?R.send(new I.SendRawEmailCommand(A)):R.sendRawEmail(A).promise()).then(t=>{"us-east-1"===h&&(h="email"),s.pending=!1,r(null,{envelope:{from:p.from,to:p.to},messageId:"<"+t.MessageId+(/@/.test(t.MessageId)?"":"@"+h+".amazonses.com")+">",response:t.MessageId,raw:w})}).catch(t=>{this.logger.error({err:t,tnx:"send"},"Send error for %s: %s",u,t.message),s.pending=!1,r(t)})},R.config&&"function"==typeof R.config.region?R.config.region().then(t=>E(null,t)).catch(t=>E(t)):E(null,R.config&&R.config.region||"us-east-1")}))}verify(t){let r;let s=(this.ses.aws?this.ses.ses:this.ses)||{},p=this.ses.aws||{},u={RawMessage:{Data:"From: invalid@invalid\r\nTo: invalid@invalid\r\n Subject: Invalid\r\n\r\nInvalid"},Source:"invalid@invalid",Destinations:["invalid@invalid"]};t||(r=new Promise((r,s)=>{t=h.callbackPromise(r,s)}));let cb=r=>r&&"InvalidParameterValue"!==(r.code||r.Code)?t(r):t(null,!0);return"function"==typeof s.send&&p.SendRawEmailCommand?(u.RawMessage.Data=Buffer.from(u.RawMessage.Data),s.send(new p.SendRawEmailCommand(u),cb)):s.sendRawEmail(u,cb),r}}},27281:(t,r,s)=>{"use strict";let p;let u=s(57310),h=s(73837),w=s(57147),E=s(92024),A=s(9523),R=s(41808),I=s(22037);try{p=I.networkInterfaces()}catch(t){}t.exports.networkInterfaces=p;let isFamilySupported=(r,s)=>{let p=t.exports.networkInterfaces;if(!p)return!0;let u=Object.keys(p).map(t=>p[t]).reduce((t,r)=>t.concat(r),[]).filter(t=>!t.internal||s).filter(t=>t.family==="IPv"+r||t.family===r).length>0;return u},resolver=(t,r,s,p)=>{s=s||{};let u=isFamilySupported(t,s.allowInternalNetworkInterfaces);if(!u)return p(null,[]);let h=A.Resolver?new A.Resolver(s):A;h["resolve"+t](r,(t,r)=>{if(t){switch(t.code){case A.NODATA:case A.NOTFOUND:case A.NOTIMP:case A.SERVFAIL:case A.CONNREFUSED:case A.REFUSED:case"EAI_AGAIN":return p(null,[])}return p(t)}return p(null,Array.isArray(r)?r:[].concat(r||[]))})},U=t.exports.dnsCache=new Map,formatDNSValue=(t,r)=>t?Object.assign({servername:t.servername,host:t.addresses&&t.addresses.length?1===t.addresses.length?t.addresses[0]:t.addresses[Math.floor(Math.random()*t.addresses.length)]:null},r||{}):Object.assign({},r||{});function resolveStream(t,r){let s=!1,p=[],u=0;t.on("error",t=>{s||(s=!0,r(t))}),t.on("readable",()=>{let r;for(;null!==(r=t.read());)p.push(r),u+=r.length}),t.on("end",()=>{let t;if(!s){s=!0;try{t=Buffer.concat(p,u)}catch(t){return r(t)}r(null,t)}})}t.exports.resolveHostname=(t,r)=>{let s;return(!(t=t||{}).host&&t.servername&&(t.host=t.servername),!t.host||R.isIP(t.host))?r(null,formatDNSValue({addresses:[t.host],servername:t.servername||!1},{cached:!1})):U.has(t.host)&&(!(s=U.get(t.host)).expires||s.expires>=Date.now())?r(null,formatDNSValue(s.value,{cached:!0})):void resolver(4,t.host,t,(p,u)=>{if(p)return s?r(null,formatDNSValue(s.value,{cached:!0,error:p})):r(p);if(u&&u.length){let s={addresses:u,servername:t.servername||t.host};return U.set(t.host,{value:s,expires:Date.now()+(t.dnsTtl||3e5)}),r(null,formatDNSValue(s,{cached:!1}))}resolver(6,t.host,t,(p,u)=>{if(p)return s?r(null,formatDNSValue(s.value,{cached:!0,error:p})):r(p);if(u&&u.length){let s={addresses:u,servername:t.servername||t.host};return U.set(t.host,{value:s,expires:Date.now()+(t.dnsTtl||3e5)}),r(null,formatDNSValue(s,{cached:!1}))}try{A.lookup(t.host,{all:!0},(p,u)=>{if(p)return s?r(null,formatDNSValue(s.value,{cached:!0,error:p})):r(p);let h=!!u&&u.filter(t=>isFamilySupported(t.family)).map(t=>t.address).shift();if(u&&u.length&&!h&&console.warn(`Failed to resolve IPv${u[0].family} addresses with current network`),!h&&s)return r(null,formatDNSValue(s.value,{cached:!0}));let w={addresses:h?[h]:[t.host],servername:t.servername||t.host};return U.set(t.host,{value:w,expires:Date.now()+(t.dnsTtl||3e5)}),r(null,formatDNSValue(w,{cached:!1}))})}catch(t){if(s)return r(null,formatDNSValue(s.value,{cached:!0,error:t}));return r(t)}})})},t.exports.parseConnectionUrl=t=>{t=t||"";let r={};return[u.parse(t,!0)].forEach(t=>{let s;switch(t.protocol){case"smtp:":r.secure=!1;break;case"smtps:":r.secure=!0;break;case"direct:":r.direct=!0}!isNaN(t.port)&&Number(t.port)&&(r.port=Number(t.port)),t.hostname&&(r.host=t.hostname),t.auth&&(s=t.auth.split(":"),r.auth||(r.auth={}),r.auth.user=s.shift(),r.auth.pass=s.join(":")),Object.keys(t.query||{}).forEach(s=>{let p=r,u=s,h=t.query[s];switch(isNaN(h)||(h=Number(h)),h){case"true":h=!0;break;case"false":h=!1}if(0===s.indexOf("tls."))u=s.substr(4),r.tls||(r.tls={}),p=r.tls;else if(s.indexOf(".")>=0)return;u in p||(p[u]=h)})}),r},t.exports._logFunc=(t,r,s,p,u,...h)=>{let w={};Object.keys(s||{}).forEach(t=>{"level"!==t&&(w[t]=s[t])}),Object.keys(p||{}).forEach(t=>{"level"!==t&&(w[t]=p[t])}),t[r](w,u,...h)},t.exports.getLogger=(r,s)=>{let p={},u=["trace","debug","info","warn","error","fatal"];if(!(r=r||{}).logger)return u.forEach(t=>{p[t]=()=>!1}),p;let w=r.logger;return!0===r.logger&&(w=function(t){let r=0,s=new Map;t.forEach(t=>{t.length>r&&(r=t.length)}),t.forEach(t=>{let p=t.toUpperCase();p.length<r&&(p+=" ".repeat(r-p.length)),s.set(t,p)});let print=(t,r,p,...u)=>{let w="";r&&("server"===r.tnx?w="S: ":"client"===r.tnx&&(w="C: "),r.sid&&(w="["+r.sid+"] "+w),r.cid&&(w="[#"+r.cid+"] "+w)),(p=h.format(p,...u)).split(/\r?\n/).forEach(r=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),s.get(t),w+r)})},p={};return t.forEach(t=>{p[t]=print.bind(null,t)}),p}(u)),u.forEach(r=>{p[r]=(p,u,...h)=>{t.exports._logFunc(w,r,s,p,u,...h)}}),p},t.exports.callbackPromise=(t,r)=>function(){let s=Array.from(arguments),p=s.shift();p?r(p):t(...s)},t.exports.parseDataURI=t=>{let r;let s=t.indexOf(",");if(!s)return t;let p=t.substring(s+1),u=t.substring(5,s).split(";"),h=u.length>1&&u[u.length-1];h&&0>h.indexOf("=")&&(r=h.toLowerCase(),u.pop());let w=u.shift()||"application/octet-stream",E={};for(let t of u){let r=t.indexOf("=");if(r>=0){let s=t.substring(0,r),p=t.substring(r+1);E[s]=p}}switch(r){case"base64":p=Buffer.from(p,"base64");break;case"utf8":p=Buffer.from(p);break;default:try{p=Buffer.from(decodeURIComponent(p))}catch(t){p=Buffer.from(p)}p=Buffer.from(p)}return{data:p,encoding:r,contentType:w,params:E}},t.exports.resolveContent=(r,s,p)=>{let u;p||(u=new Promise((r,s)=>{p=t.exports.callbackPromise(r,s)}));let h=r&&r[s]&&r[s].content||r[s],A=("object"==typeof r[s]&&r[s].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!h)return p(null,h);if("object"==typeof h){if("function"==typeof h.pipe)return resolveStream(h,(t,u)=>{if(t)return p(t);r[s].content?r[s].content=u:r[s]=u,p(null,u)});if(/^https?:\/\//i.test(h.path||h.href))return resolveStream(E(h.path||h.href),p);if(/^data:/i.test(h.path||h.href)){let r=t.exports.parseDataURI(h.path||h.href);return r&&r.data?p(null,r.data):p(null,Buffer.from(0))}if(h.path)return resolveStream(w.createReadStream(h.path),p)}return"string"!=typeof r[s].content||["utf8","usascii","ascii"].includes(A)||(h=Buffer.from(r[s].content,A)),setImmediate(()=>p(null,h)),u},t.exports.assign=function(){let t=Array.from(arguments),r=t.shift()||{};return t.forEach(t=>{Object.keys(t||{}).forEach(s=>{["tls","auth"].includes(s)&&t[s]&&"object"==typeof t[s]?(r[s]||(r[s]={}),Object.keys(t[s]).forEach(p=>{r[s][p]=t[s][p]})):r[s]=t[s]})}),r},t.exports.encodeXText=t=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(t))return t;let r=Buffer.from(t),s="";for(let t=0,p=r.length;t<p;t++){let p=r[t];p<33||p>126||43===p||61===p?s+="+"+(p<16?"0":"")+p.toString(16).toUpperCase():s+=String.fromCharCode(p)}return s}},2062:(t,r,s)=>{"use strict";let p=s(12781),u=p.Transform;t.exports=class extends u{constructor(t){super(t),this.options=t||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(t,r,s){let p,u=[],h=0,w,E,A=0;if(!t||!t.length)return s();for("string"==typeof t&&(t=Buffer.from(t)),this.inByteCount+=t.length,w=0,E=t.length;w<E;w++)46===t[w]?(!w||10!==t[w-1])&&(w||this.lastByte&&10!==this.lastByte)||(p=t.slice(A,w+1),u.push(p),u.push(Buffer.from(".")),h+=p.length+1,A=w+1):10===t[w]&&(w&&13!==t[w-1]||!w&&13!==this.lastByte)&&(w>A?(p=t.slice(A,w),u.push(p),h+=p.length+2):h+=2,u.push(Buffer.from("\r\n")),A=w+1);h?(A<t.length&&(p=t.slice(A),u.push(p),h+=p.length),this.outByteCount+=h,this.push(Buffer.concat(u,h))):(this.outByteCount+=t.length,this.push(t)),this.lastByte=t[t.length-1],s()}_flush(t){let r;r=10===this.lastByte?Buffer.from(".\r\n"):13===this.lastByte?Buffer.from("\n.\r\n"):Buffer.from("\r\n.\r\n"),this.outByteCount+=r.length,this.push(r),t()}}},20604:(t,r,s)=>{"use strict";let p=s(41808),u=s(24404),h=s(57310);t.exports=function httpProxyClient(t,r,s,w){let E,A,R,I=h.parse(t);E={host:I.hostname,port:Number(I.port)?Number(I.port):"https:"===I.protocol?443:80},"https:"===I.protocol?(E.rejectUnauthorized=!1,A=u.connect.bind(u)):A=p.connect.bind(p);let U=!1,tempSocketErr=t=>{if(!U){U=!0;try{R.destroy()}catch(t){}w(t)}},timeoutErr=()=>{let t=Error("Proxy socket timed out");t.code="ETIMEDOUT",tempSocketErr(t)};(R=A(E,()=>{if(U)return;let t={Host:s+":"+r,Connection:"close"};I.auth&&(t["Proxy-Authorization"]="Basic "+Buffer.from(I.auth).toString("base64")),R.write("CONNECT "+s+":"+r+" HTTP/1.1\r\n"+Object.keys(t).map(r=>r+": "+t[r]).join("\r\n")+"\r\n\r\n");let p="",onSocketData=t=>{let r,s;if(!U&&(p+=t.toString("binary"),r=p.match(/\r\n\r\n/))){if(R.removeListener("data",onSocketData),s=p.substr(r.index+r[0].length),p=p.substr(0,r.index),s&&R.unshift(Buffer.from(s,"binary")),U=!0,!(r=p.match(/^HTTP\/\d+\.\d+ (\d+)/i))||"2"!==(r[1]||"").charAt(0)){try{R.destroy()}catch(t){}return w(Error("Invalid response from proxy"+(r&&": "+r[1]||"")))}return R.removeListener("error",tempSocketErr),R.removeListener("timeout",timeoutErr),R.setTimeout(0),w(null,R)}};R.on("data",onSocketData)})).setTimeout(httpProxyClient.timeout||3e4),R.on("timeout",timeoutErr),R.once("error",tempSocketErr)}},65599:(t,r,s)=>{"use strict";let p=s(93259),u=s(82361).EventEmitter,h=s(41808),w=s(24404),E=s(22037),A=s(6113),R=s(2062),I=s(12781).PassThrough,U=s(27281);t.exports=class extends u{constructor(t){super(t),this.id=A.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=t||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:!h.isIP(this.host)&&this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,void 0===this.options.secure&&465===this.port&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=U.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(t=>{let r=(t||"").toString().trim().toUpperCase();r&&this.customAuth.set(r,this.options.customAuth[t])}),this.version=p.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=t=>this._onData(t),this._onSocketError=t=>this._onError(t,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(t){if("function"==typeof t){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),t()});let r=this._isDestroyedMessage("connect");if(r)return t(this._formatError(r,"ECONNECTION",!1,"CONN"))}let r={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||3e4};this.options.localAddress&&(r.localAddress=this.options.localAddress);let setupConnectionHandlers=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||12e4),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,setupConnectionHandlers(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(t=>{if(t){this._onError(Error("Error initiating TLS - "+(t.message||t)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}return this.options.socket?(this._socket=this.options.socket,U.resolveHostname(r,(t,s)=>{if(t)return setImmediate(()=>this._onError(t,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:r.host,resolved:s.host,cached:!!s.cached},"Resolved %s as %s [cache %s]",r.host,s.host,s.cached?"hit":"miss"),Object.keys(s).forEach(t=>{"_"!==t.charAt(0)&&s[t]&&(r[t]=s[t])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),setupConnectionHandlers()}catch(t){return setImmediate(()=>this._onError(t,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(t=>{r[t]=this.options.tls[t]}),this.servername&&!r.servername&&(r.servername=this.servername),U.resolveHostname(r,(t,s)=>{if(t)return setImmediate(()=>this._onError(t,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:r.host,resolved:s.host,cached:!!s.cached},"Resolved %s as %s [cache %s]",r.host,s.host,s.cached?"hit":"miss"),Object.keys(s).forEach(t=>{"_"!==t.charAt(0)&&s[t]&&(r[t]=s[t])});try{this._socket=w.connect(r,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),setupConnectionHandlers()}catch(t){return setImmediate(()=>this._onError(t,"ECONNECTION",!1,"CONN"))}})):U.resolveHostname(r,(t,s)=>{if(t)return setImmediate(()=>this._onError(t,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:r.host,resolved:s.host,cached:!!s.cached},"Resolved %s as %s [cache %s]",r.host,s.host,s.cached?"hit":"miss"),Object.keys(s).forEach(t=>{"_"!==t.charAt(0)&&s[t]&&(r[t]=s[t])});try{this._socket=h.connect(r,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),setupConnectionHandlers()}catch(t){return setImmediate(()=>this._onError(t,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let t="end";"init"===this.stage&&(t="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',t);let r=this._socket&&this._socket.socket||this._socket;if(r&&!r.destroyed)try{r[t]()}catch(t){}this._destroy()}login(t,r){let s=this._isDestroyedMessage("login");if(s)return r(this._formatError(s,"ECONNECTION",!1,"API"));if(this._auth=t||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,this._authMethod||!this._auth.oauth2||this._auth.credentials?this._authMethod&&("XOAUTH2"!==this._authMethod||this._auth.oauth2)||(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()):this._authMethod="XOAUTH2","XOAUTH2"!==this._authMethod&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass)){if(!(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod)))return r(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options}}if(this.customAuth.has(this._authMethod)){let t,s=this.customAuth.get(this._authMethod),p=!1,resolve=()=>{p||(p=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0))},reject=s=>{p||(p=!0,r(this._formatError(s,"EAUTH",t,"AUTH "+this._authMethod)))},u=s({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(r,s)=>{let p;return s||(p=new Promise((t,r)=>{s=U.callbackPromise(t,r)})),this._responseActions.push(p=>{t=p;let u=p.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),h={command:r,response:p};u?(h.status=Number(u[1])||0,u[2]&&(h.code=u[2]),h.text=p.substr(u[0].length)):(h.text=p,h.status=0),s(null,h)}),setImmediate(()=>this._sendCommand(r)),p},resolve,reject});u&&"function"==typeof u.catch&&u.then(resolve).catch(reject);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,r);return;case"LOGIN":this._responseActions.push(t=>{this._actionAUTH_LOGIN_USER(t,r)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(t=>{this._actionAUTHComplete(t,r)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\x00"+this._auth.credentials.user+"\x00"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\x00"+this._auth.credentials.user+"\x00/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(t=>{this._actionAUTH_CRAM_MD5(t,r)}),this._sendCommand("AUTH CRAM-MD5");return}return r(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(t,r,s){if(!r)return s(this._formatError("Empty message","EMESSAGE",!1,"API"));let p=this._isDestroyedMessage("send message");if(p)return s(this._formatError(p,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&t.size>this._maxAllowedSize)return setImmediate(()=>{s(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let u=!1,callback=function(){u||(u=!0,s(...arguments))};"function"==typeof r.on&&r.on("error",t=>callback(this._formatError(t,"ESTREAM",!1,"API")));let h=Date.now();this._setEnvelope(t,(t,s)=>{if(t){let s=new I;return"function"==typeof r.pipe?r.pipe(s):(s.write(r),s.end()),callback(t)}let p=Date.now(),u=this._createSendStream((t,r)=>t?callback(t):(s.envelopeTime=p-h,s.messageTime=Date.now()-p,s.messageSize=u.outByteCount,s.response=r,callback(null,s)));"function"==typeof r.pipe?r.pipe(u):(u.write(r),u.end())})}reset(t){this._sendCommand("RSET"),this._responseActions.push(r=>"2"!==r.charAt(0)?t(this._formatError("Could not reset session state. response="+r,"EPROTOCOL",r,"RSET")):(this._envelope=!1,t(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||3e4),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(t){let r;if(this._destroyed||!t||!t.length)return;let s=(t||"").toString("binary"),p=(this._remainder+s).split(/\r?\n/);this._remainder=p.pop();for(let t=0,s=p.length;t<s;t++){if(this._responseQueue.length&&(r=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(r.split("\n").pop()))){this._responseQueue[this._responseQueue.length-1]+="\n"+p[t];continue}this._responseQueue.push(p[t])}this._responseQueue.length&&(r=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(r.split("\n").pop()))||this._processResponse()}_onError(t,r,s,p){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._destroyed||(t=this._formatError(t,r,s,p),this.logger.error(s,t.message),this.emit("error",t),this.close())}_formatError(t,r,s,p){let u;u=/Error\]$/i.test(Object.prototype.toString.call(t))?t:Error(t),r&&"Error"!==r&&(u.code=r),s&&(u.response=s,u.message+=": "+s);let h="string"==typeof s&&Number((s.match(/^\d+/)||[])[0])||!1;return h&&(u.responseCode=h),p&&(u.command=p),u}_onClose(){let t=!1;return(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=t=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)?this._onError(Error("Connection closed unexpectedly"),"ETLS",t,"CONN"):![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed||/^[45]\d{2}\b/.test(t)?this._onError(Error("Connection closed unexpectedly"),"ECONNECTION",t,"CONN"):void this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(t){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let r=this._socket,s={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(t=>{s[t]=this.options.tls[t]}),this.servername&&!s.servername&&(s.servername=this.servername),this.upgrading=!0;try{this._socket=w.connect(s,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),r.removeListener("close",this._onSocketClose),r.removeListener("end",this._onSocketEnd),t(null,!0)))}catch(r){return t(r)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||6e5),this._socket.on("timeout",this._onSocketTimeout),r.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let t=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(t.split("\n").pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},t.replace(/\r?\n$/,"")),t.trim()||setImmediate(()=>this._processResponse());let r=this._responseActions.shift();if("function"!=typeof r)return this._onError(Error("Unexpected Response"),"EPROTOCOL",t,"CONN");r.call(this,t),setImmediate(()=>this._processResponse())}_sendCommand(t,r){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(r||t||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(t+"\r\n","utf-8"))}}_setEnvelope(t,r){let s=[],p=!1;if(this._envelope=t||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(t=>(t&&t.address||t||"").toString().trim()),!this._envelope.to.length)return r(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return r(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(p=!0);for(let t=0,s=this._envelope.to.length;t<s;t++){if(!this._envelope.to[t]||/[\r\n<>]/.test(this._envelope.to[t]))return r(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[t]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[t])&&(p=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(t){return r(this._formatError("Invalid DSN "+t.message,"EENVELOPE",!1,"API"))}this._responseActions.push(t=>{this._actionMAIL(t,r)}),p&&this._supportedExtensions.includes("SMTPUTF8")&&(s.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(s.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&s.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&s.push("RET="+U.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&s.push("ENVID="+U.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(s.length?" "+s.join(" "):""))}_setDsnEnvelope(t){let r=(t.ret||t.return||"").toString().toUpperCase()||null;if(r)switch(r){case"HDRS":case"HEADERS":r="HDRS";break;case"FULL":case"BODY":r="FULL"}if(r&&!["FULL","HDRS"].includes(r))throw Error("ret: "+JSON.stringify(r));let s=(t.envid||t.id||"").toString()||null,p=t.notify||null;if(p){"string"==typeof p&&(p=p.split(","));let t=["NEVER","SUCCESS","FAILURE","DELAY"];if((p=p.map(t=>t.trim().toUpperCase())).filter(r=>!t.includes(r)).length||p.length>1&&p.includes("NEVER"))throw Error("notify: "+JSON.stringify(p.join(",")));p=p.join(",")}let u=(t.recipient||t.orcpt||"").toString()||null;return u&&0>u.indexOf(";")&&(u="rfc822;"+u),{ret:r,envid:s,notify:p,orcpt:u}}_getDsnRcptToArgs(){let t=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&t.push("NOTIFY="+U.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&t.push("ORCPT="+U.encodeXText(this._envelope.dsn.orcpt))),t.length?" "+t.join(" "):""}_createSendStream(t){let r,s=new R;return this.options.lmtp?this._envelope.accepted.forEach((r,s)=>{let p=s===this._envelope.accepted.length-1;this._responseActions.push(s=>{this._actionLMTPStream(r,p,s,t)})}):this._responseActions.push(r=>{this._actionSMTPStream(r,t)}),s.pipe(this._socket,{end:!1}),this.options.debug&&((r=new I).on("readable",()=>{let t;for(;t=r.read();)this.logger.debug({tnx:"message"},t.toString("binary").replace(/\r?\n$/,""))}),s.pipe(r)),s.once("end",()=>{this.logger.info({tnx:"message",inByteCount:s.inByteCount,outByteCount:s.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",s.outByteCount,s.inByteCount)}),s}_actionGreeting(t){if(clearTimeout(this._greetingTimeout),"220"!==t.substr(0,3)){this._onError(Error("Invalid greeting. response="+t),"EPROTOCOL",t,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(t){if("2"!==t.charAt(0)){this._onError(Error("Invalid LHLO. response="+t),"EPROTOCOL",t,"LHLO");return}this._actionEHLO(t)}_actionEHLO(t){let r;if("421"===t.substr(0,3)){this._onError(Error("Server terminates connection. response="+t),"ECONNECTION",t,"EHLO");return}if("2"!==t.charAt(0)){if(this.options.requireTLS){this._onError(Error("EHLO failed but HELO does not support required STARTTLS. response="+t),"ECONNECTION",t,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=t.split(/\r?\n/).map(t=>t.replace(/^\d+[ -]/,"").trim()).filter(t=>t).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(t)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(t)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(t)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(t)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(t)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(t)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(t)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(t)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(t)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(t)&&this._supportedAuth.push("XOAUTH2"),(r=t.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(r[1])||0),this.emit("connect")}_actionHELO(t){if("2"!==t.charAt(0)){this._onError(Error("Invalid HELO. response="+t),"EPROTOCOL",t,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(t){if("2"!==t.charAt(0))return this.options.opportunisticTLS?(this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect")):void this._onError(Error("Error upgrading connection with STARTTLS"),"ETLS",t,"STARTTLS");this._upgradeConnection((t,r)=>{if(t){this._onError(Error("Error initiating TLS - "+(t.message||t)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),r?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(t,r){if(!/^334[ -]/.test(t)){r(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",t,"AUTH LOGIN"));return}this._responseActions.push(t=>{this._actionAUTH_LOGIN_PASS(t,r)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(t,r){let s=t.match(/^334\s+(.+)$/),p="";if(!s)return r(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",t,"AUTH CRAM-MD5"));p=s[1];let u=Buffer.from(p,"base64").toString("ascii"),h=A.createHmac("md5",this._auth.credentials.pass);h.update(u);let w=this._auth.credentials.user+" "+h.digest("hex");this._responseActions.push(t=>{this._actionAUTH_CRAM_MD5_PASS(t,r)}),this._sendCommand(Buffer.from(w).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(t,r){if(!t.match(/^235\s+/))return r(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",t,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0)}_actionAUTH_LOGIN_PASS(t,r){if(!/^334[ -]/.test(t))return r(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",t,"AUTH LOGIN"));this._responseActions.push(t=>{this._actionAUTHComplete(t,r)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(t,r,s){if(s||"function"!=typeof r||(s=r,r=!1),"334"===t.substr(0,3)){this._responseActions.push(t=>{r||"XOAUTH2"!==this._authMethod?this._actionAUTHComplete(t,!0,s):setImmediate(()=>this._handleXOauth2Token(!0,s))}),this._sendCommand("");return}if("2"!==t.charAt(0))return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),s(this._formatError("Invalid login","EAUTH",t,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,s(null,!0)}_actionMAIL(t,r){let s,p;if(2!==Number(t.charAt(0)))return s=this._usingSmtpUtf8&&/^550 /.test(t)&&/[\x80-\uFFFF]/.test(this._envelope.from)?"Internationalized mailbox name not allowed":"Mail command failed",r(this._formatError(s,"EENVELOPE",t,"MAIL FROM"));if(!this._envelope.rcptQueue.length)return r(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"));if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)p=this._envelope.rcptQueue.shift(),this._recipientQueue.push(p),this._responseActions.push(t=>{this._actionRCPT(t,r)}),this._sendCommand("RCPT TO:<"+p+">"+this._getDsnRcptToArgs());else p=this._envelope.rcptQueue.shift(),this._recipientQueue.push(p),this._responseActions.push(t=>{this._actionRCPT(t,r)}),this._sendCommand("RCPT TO:<"+p+">"+this._getDsnRcptToArgs())}_actionRCPT(t,r){let s,p,u=this._recipientQueue.shift();if(2!==Number(t.charAt(0))?(s=this._usingSmtpUtf8&&/^553 /.test(t)&&/[\x80-\uFFFF]/.test(u)?"Internationalized mailbox name not allowed":"Recipient command failed",this._envelope.rejected.push(u),(p=this._formatError(s,"EENVELOPE",t,"RCPT TO")).recipient=u,this._envelope.rejectedErrors.push(p)):this._envelope.accepted.push(u),this._envelope.rcptQueue.length||this._recipientQueue.length)this._envelope.rcptQueue.length&&(u=this._envelope.rcptQueue.shift(),this._recipientQueue.push(u),this._responseActions.push(t=>{this._actionRCPT(t,r)}),this._sendCommand("RCPT TO:<"+u+">"+this._getDsnRcptToArgs()));else{if(!(this._envelope.rejected.length<this._envelope.to.length))return(p=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",t,"RCPT TO")).rejected=this._envelope.rejected,p.rejectedErrors=this._envelope.rejectedErrors,r(p);this._responseActions.push(t=>{this._actionDATA(t,r)}),this._sendCommand("DATA")}}_actionDATA(t,r){if(!/^[23]/.test(t))return r(this._formatError("Data command failed","EENVELOPE",t,"DATA"));let s={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(s.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(s.rejectedErrors=this._envelope.rejectedErrors),r(null,s)}_actionSMTPStream(t,r){return 2!==Number(t.charAt(0))?r(this._formatError("Message failed","EMESSAGE",t,"DATA")):r(null,t)}_actionLMTPStream(t,r,s,p){let u;if(2!==Number(s.charAt(0))){(u=this._formatError("Message failed for recipient "+t,"EMESSAGE",s,"DATA")).recipient=t,this._envelope.rejected.push(t),this._envelope.rejectedErrors.push(u);for(let r=0,s=this._envelope.accepted.length;r<s;r++)this._envelope.accepted[r]===t&&this._envelope.accepted.splice(r,1)}if(r)return p(null,s)}_handleXOauth2Token(t,r){this._auth.oauth2.getToken(t,(s,p)=>{if(s)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),r(this._formatError(s,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(s=>{this._actionAUTHComplete(s,t,r)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(p),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(t){if(this._destroyed)return"Cannot "+t+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+t+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+t+" - smtp connection socket is already half-closed."}}_getHostname(){let t;try{t=E.hostname()||""}catch(r){t="localhost"}return(!t||0>t.indexOf("."))&&(t="[127.0.0.1]"),t.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(t="["+t+"]"),t}}},44531:(t,r,s)=>{"use strict";let p=s(82361),u=s(32842),h=s(65599),w=s(27404),E=s(27281),A=s(93259);t.exports=class extends p{constructor(t){let r;super(),"string"==typeof(t=t||{})&&(t={url:t});let s=t.service;"function"==typeof t.getSocket&&(this.getSocket=t.getSocket),t.url&&(r=E.parseConnectionUrl(t.url),s=s||r.service),this.options=E.assign(!1,t,r,s&&w(s)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=E.getLogger(this.options,{component:this.options.component||"smtp-pool"});let p=new h(this.options);this.name="SMTP (pool)",this.version=A.version+"[client:"+p.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(t,r){return setImmediate(()=>r(null,!1))}send(t,r){return!this._closed&&(this._queue.push({mail:t,requeueAttempts:0,callback:r}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let t;let r=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!r&&!this._queue.length)return;for(let s=r-1;s>=0;s--)this._connections[s]&&this._connections[s].available&&((t=this._connections[s]).close(),this.logger.info({tnx:"connection",cid:t.id,action:"removed"},"Connection #%s removed",t.id));if(r&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let invokeCallbacks=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let r=this._queue.shift();if(r&&"function"==typeof r.callback)try{r.callback(Error("Connection pool was closed"))}catch(r){this.logger.error({err:r,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,r.message)}setImmediate(invokeCallbacks)};setImmediate(invokeCallbacks)}_processMessages(){let t,r,s;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(r=0,s=this._connections.length;r<s;r++)if(this._connections[r].available){t=this._connections[r];break}if(!t&&this._connections.length<this.options.maxConnections&&(t=this._createConnection()),!t){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let p=t.queueEntry=this._queue.shift();p.messageId=(t.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),t.available=!1,this.logger.debug({tnx:"pool",cid:t.id,messageId:p.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",p.messageId,t.id,t.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),t.send(p.mail,(r,s)=>{if(p===t.queueEntry){try{p.callback(r,s)}catch(r){this.logger.error({err:r,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,r.message)}t.queueEntry=!1}})}_createConnection(){let t=new u(this);return t.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:t.id,action:"conection"},"Created new pool resource #%s",t.id),t.on("available",()=>{this.logger.debug({tnx:"connection",cid:t.id,action:"available"},"Connection #%s became available",t.id),this._closed?this.close():this._processMessages()}),t.once("error",r=>{if("EMAXLIMIT"!==r.code?this.logger.error({err:r,tnx:"pool",cid:t.id},"Pool Error for #%s: %s",t.id,r.message):this.logger.debug({tnx:"pool",cid:t.id,action:"maxlimit"},"Max messages limit exchausted for #%s",t.id),t.queueEntry){try{t.queueEntry.callback(r)}catch(r){this.logger.error({err:r,tnx:"callback",cid:t.id},"Callback error for #%s: %s",t.id,r.message)}t.queueEntry=!1}this._removeConnection(t),this._continueProcessing()}),t.once("close",()=>{this.logger.info({tnx:"connection",cid:t.id,action:"closed"},"Connection #%s was closed",t.id),this._removeConnection(t),t.queueEntry?setTimeout(()=>{t.queueEntry&&(this._shouldRequeuOnConnectionClose(t.queueEntry)?this._requeueEntryOnConnectionClose(t):this._failDeliveryOnConnectionClose(t)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(t),t}_shouldRequeuOnConnectionClose(t){return void 0===this.options.maxRequeues||this.options.maxRequeues<0||t.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(t){if(t.queueEntry&&t.queueEntry.callback){try{t.queueEntry.callback(Error("Reached maximum number of retries after connection was closed"))}catch(r){this.logger.error({err:r,tnx:"callback",messageId:t.queueEntry.messageId,cid:t.id},"Callback error for #%s: %s",t.id,r.message)}t.queueEntry=!1}}_requeueEntryOnConnectionClose(t){t.queueEntry.requeueAttempts=t.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:t.id,messageId:t.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",t.queueEntry.messageId,t.id,t.queueEntry.requeueAttempts),this._queue.unshift(t.queueEntry),t.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(t){let r=this._connections.indexOf(t);-1!==r&&this._connections.splice(r,1)}_checkRateLimit(t){if(!this._rateLimit.limit)return t();let r=Date.now();return this._rateLimit.counter<this._rateLimit.limit?t():(this._rateLimit.waiting.push(t),this._rateLimit.checkpoint<=r-this._rateLimit.delta)?this._clearRateLimit():void(this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(r-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=r))}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let t=this._rateLimit.waiting.shift();setImmediate(t)}}isIdle(){return this.idling}verify(t){let r;t||(r=new Promise((r,s)=>{t=E.callbackPromise(r,s)}));let s=new u(this).auth;return this.getSocket(this.options,(r,p)=>{if(r)return t(r);let u=this.options;p&&p.connection&&(this.logger.info({tnx:"proxy",remoteAddress:p.connection.remoteAddress,remotePort:p.connection.remotePort,destHost:u.host||"",destPort:u.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",p.connection.remoteAddress,p.connection.remotePort,u.host||"",u.port||""),u=E.assign(!1,u),Object.keys(p).forEach(t=>{u[t]=p[t]}));let w=new h(u),A=!1;w.once("error",r=>{if(!A)return A=!0,w.close(),t(r)}),w.once("end",()=>{if(!A)return A=!0,t(Error("Connection closed"))});let finalize=()=>{if(!A)return A=!0,w.quit(),t(null,!0)};w.connect(()=>{if(!A){if(s&&(w.allowsAuth||u.forceAuth))w.login(s,r=>{if(!A){if(r)return A=!0,w.close(),t(r);finalize()}});else if(!s&&w.allowsAuth&&u.forceAuth){let r=Error("Authentication info was not provided");return r.code="NoAuth",A=!0,w.close(),t(r)}else finalize()}})}),r}}},32842:(t,r,s)=>{"use strict";let p=s(65599),u=s(27281).assign,h=s(36015),w=s(82361);t.exports=class extends w{constructor(t){if(super(),this.pool=t,this.options=t.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let t=new h(this.options.auth,this.logger);t.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||t.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:t,method:"XOAUTH2"},t.on("token",t=>this.pool.mailer.emit("token",t)),t.on("error",t=>this.emit("error",t));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(t){this.pool.getSocket(this.options,(r,s)=>{if(r)return t(r);let h=!1,w=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:w.host||"",destPort:w.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,w.host||"",w.port||""),w=u(!1,w),Object.keys(s).forEach(t=>{w[t]=s[t]})),this.connection=new p(w),this.connection.once("error",r=>{if(this.emit("error",r),!h)return h=!0,t(r)}),this.connection.once("end",()=>{if(this.close(),h)return;h=!0;let r=setTimeout(()=>{if(h)return;let r=Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(r.code="ETLS"),t(r)},1e3);try{r.unref()}catch(t){}}),this.connection.connect(()=>{if(!h){if(!this.auth||!this.connection.allowsAuth&&!w.forceAuth)return h=!0,this._connected=!0,t(null,!0);this.connection.login(this.auth,r=>{if(!h){if(h=!0,r)return this.connection.close(),this.emit("error",r),t(r);this._connected=!0,t(null,!0)}})}})})}send(t,r){if(!this._connected)return this.connect(s=>s?r(s):this.send(t,r));let s=t.message.getEnvelope(),p=t.message.messageId(),u=[].concat(s.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:p,cid:this.id},"Sending message %s using #%s to <%s>",p,this.id,u.join(", ")),t.data.dsn&&(s.dsn=t.data.dsn),this.connection.send(s,t.message.createReadStream(),(t,u)=>{if(this.messages++,t)return this.connection.close(),this.emit("error",t),r(t);u.envelope={from:s.from,to:s.to},u.messageId=p,setImmediate(()=>{let t;this.messages>=this.options.maxMessages?((t=Error("Resource exhausted")).code="EMAXLIMIT",this.connection.close(),this.emit("error",t)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),r(null,u)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}}},44245:(t,r,s)=>{"use strict";let p=s(82361),u=s(65599),h=s(27404),w=s(27281),E=s(36015),A=s(93259);t.exports=class extends p{constructor(t){let r;super(),"string"==typeof(t=t||{})&&(t={url:t});let s=t.service;"function"==typeof t.getSocket&&(this.getSocket=t.getSocket),t.url&&(r=w.parseConnectionUrl(t.url),s=s||r.service),this.options=w.assign(!1,t,r,s&&h(s)),this.logger=w.getLogger(this.options,{component:this.options.component||"smtp-transport"});let p=new u(this.options);this.name="SMTP",this.version=A.version+"[client:"+p.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(t,r){return setImmediate(()=>r(null,!1))}getAuth(t){if(!t)return this.auth;let r=!1,s={};if(this.options.auth&&"object"==typeof this.options.auth&&Object.keys(this.options.auth).forEach(t=>{r=!0,s[t]=this.options.auth[t]}),t&&"object"==typeof t&&Object.keys(t).forEach(p=>{r=!0,s[p]=t[p]}),!r)return!1;if("OAUTH2"===(s.type||"").toString().toUpperCase()){if(!s.service&&!s.user)return!1;let t=new E(s,this.logger);return t.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||t.provisionCallback,t.on("token",t=>this.mailer.emit("token",t)),t.on("error",t=>this.emit("error",t)),{type:"OAUTH2",user:s.user,oauth2:t,method:"XOAUTH2"}}return{type:(s.type||"").toString().toUpperCase()||"LOGIN",user:s.user,credentials:{user:s.user||"",pass:s.pass,options:s.options},method:(s.method||"").trim().toUpperCase()||this.options.authMethod||!1}}send(t,r){this.getSocket(this.options,(s,p)=>{if(s)return r(s);let h=!1,E=this.options;p&&p.connection&&(this.logger.info({tnx:"proxy",remoteAddress:p.connection.remoteAddress,remotePort:p.connection.remotePort,destHost:E.host||"",destPort:E.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",p.connection.remoteAddress,p.connection.remotePort,E.host||"",E.port||""),E=w.assign(!1,E),Object.keys(p).forEach(t=>{E[t]=p[t]}));let A=new u(E);A.once("error",t=>{if(!h)return h=!0,A.close(),r(t)}),A.once("end",()=>{if(h)return;let t=setTimeout(()=>{if(h)return;h=!0;let t=Error("Unexpected socket close");A&&A._socket&&A._socket.upgrading&&(t.code="ETLS"),r(t)},1e3);try{t.unref()}catch(t){}});let sendMessage=()=>{let s=t.message.getEnvelope(),p=t.message.messageId(),u=[].concat(s.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),t.data.dsn&&(s.dsn=t.data.dsn),this.logger.info({tnx:"send",messageId:p},"Sending message %s to <%s>",p,u.join(", ")),A.send(s,t.message.createReadStream(),(t,u)=>{if(h=!0,A.close(),t)return this.logger.error({err:t,tnx:"send"},"Send error for %s: %s",p,t.message),r(t);u.envelope={from:s.from,to:s.to},u.messageId=p;try{return r(null,u)}catch(t){this.logger.error({err:t,tnx:"callback"},"Callback error for %s: %s",p,t.message)}})};A.connect(()=>{if(h)return;let s=this.getAuth(t.data.auth);s&&(A.allowsAuth||E.forceAuth)?A.login(s,t=>{if(s&&s!==this.auth&&s.oauth2&&s.oauth2.removeAllListeners(),!h){if(t)return h=!0,A.close(),r(t);sendMessage()}}):sendMessage()})})}verify(t){let r;return t||(r=new Promise((r,s)=>{t=w.callbackPromise(r,s)})),this.getSocket(this.options,(r,s)=>{if(r)return t(r);let p=this.options;s&&s.connection&&(this.logger.info({tnx:"proxy",remoteAddress:s.connection.remoteAddress,remotePort:s.connection.remotePort,destHost:p.host||"",destPort:p.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",s.connection.remoteAddress,s.connection.remotePort,p.host||"",p.port||""),p=w.assign(!1,p),Object.keys(s).forEach(t=>{p[t]=s[t]}));let h=new u(p),E=!1;h.once("error",r=>{if(!E)return E=!0,h.close(),t(r)}),h.once("end",()=>{if(!E)return E=!0,t(Error("Connection closed"))});let finalize=()=>{if(!E)return E=!0,h.quit(),t(null,!0)};h.connect(()=>{if(E)return;let r=this.getAuth({});if(r&&(h.allowsAuth||p.forceAuth))h.login(r,r=>{if(!E){if(r)return E=!0,h.close(),t(r);finalize()}});else if(!r&&h.allowsAuth&&p.forceAuth){let r=Error("Authentication info was not provided");return r.code="NoAuth",E=!0,h.close(),t(r)}else finalize()})}),r}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}}},26551:(t,r,s)=>{"use strict";let p=s(93259),u=s(27281);t.exports=class{constructor(t){t=t||{},this.options=t||{},this.name="StreamTransport",this.version=p.version,this.logger=u.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos","\r\n"].includes((t.newline||"").toString().toLowerCase())}send(t,r){t.message.keepBcc=!0;let s=t.data.envelope||t.message.getEnvelope(),p=t.message.messageId(),u=[].concat(s.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:p},"Sending message %s to <%s> using %s line breaks",p,u.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let s;try{s=t.message.createReadStream()}catch(t){return this.logger.error({err:t,tnx:"send",messageId:p},"Creating send stream failed for %s. %s",p,t.message),r(t)}if(!this.options.buffer)return s.once("error",t=>{this.logger.error({err:t,tnx:"send",messageId:p},"Failed creating message for %s. %s",p,t.message)}),r(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:p,message:s});let u=[],h=0;s.on("readable",()=>{let t;for(;null!==(t=s.read());)u.push(t),h+=t.length}),s.once("error",t=>(this.logger.error({err:t,tnx:"send",messageId:p},"Failed creating message for %s. %s",p,t.message),r(t))),s.on("end",()=>r(null,{envelope:t.data.envelope||t.message.getEnvelope(),messageId:p,message:Buffer.concat(u,h)}))})}}},27404:(t,r,s)=>{"use strict";let p=s(29493),u={};function normalizeKey(t){return t.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function normalizeService(t){let r=["domains","aliases"],s={};return Object.keys(t).forEach(p=>{0>r.indexOf(p)&&(s[p]=t[p])}),s}Object.keys(p).forEach(t=>{let r=p[t];u[normalizeKey(t)]=normalizeService(r),[].concat(r.aliases||[]).forEach(t=>{u[normalizeKey(t)]=normalizeService(r)}),[].concat(r.domains||[]).forEach(t=>{u[normalizeKey(t)]=normalizeService(r)})}),t.exports=function(t){return u[t=normalizeKey(t.split("@").pop())]||!1}},36015:(t,r,s)=>{"use strict";let p=s(12781).Stream,u=s(92024),h=s(6113),w=s(27281);t.exports=class extends p{constructor(t,r){if(super(),this.options=t||{},t&&t.serviceClient){if(!t.privateKey||!t.user){setImmediate(()=>this.emit("error",Error('Options "privateKey" and "user" are required for service account!')));return}let r=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=r||300}if(this.logger=w.getLogger({logger:r},{component:this.options.component||"OAuth2"}),this.provisionCallback="function"==typeof this.options.provisionCallback&&this.options.provisionCallback,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let t=Math.max(Number(this.options.timeout)||0,0);this.expires=t&&Date.now()+1e3*t||0}}getToken(t,r){if(!t&&this.accessToken&&(!this.expires||this.expires>Date.now()))return r(null,this.accessToken);let generateCallback=(...t)=>{t[0]?this.logger.error({err:t[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),r(...t)};this.provisionCallback?this.provisionCallback(this.options.user,!!t,(t,r,s)=>{!t&&r&&(this.accessToken=r,this.expires=s||0),generateCallback(t,r)}):this.generateToken(generateCallback)}updateToken(t,r){this.accessToken=t,r=Math.max(Number(r)||0,0),this.expires=r&&Date.now()+1e3*r||0,this.emit("token",{user:this.options.user,accessToken:t||"",expires:this.expires})}generateToken(t){let r,s;if(this.options.serviceClient){let p,u=Math.floor(Date.now()/1e3),h={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:u,exp:u+this.options.serviceRequestTimeout};try{p=this.jwtSignRS256(h)}catch(r){return t(Error("Can't generate token. Check your auth options"))}r={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:p},s={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:h}}else{if(!this.options.refreshToken)return t(Error("Can't create new access token for user"));r={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},s={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(t=>{r[t]=this.options.customParams[t],s[t]=this.options.customParams[t]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(s)),this.postRequest(this.options.accessUrl,r,this.options,(r,s)=>{let p;if(r)return t(r);try{p=JSON.parse(s.toString())}catch(r){return t(r)}if(!p||"object"!=typeof p)return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(s||"").toString()),t(Error("Invalid authentication response"));let u={};if(Object.keys(p).forEach(t=>{"access_token"!==t?u[t]=p[t]:u[t]=(p[t]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(u)),p.error){let r=p.error;return p.error_description&&(r+=": "+p.error_description),p.error_uri&&(r+=" ("+p.error_uri+")"),t(Error(r))}return p.access_token?(this.updateToken(p.access_token,p.expires_in),t(null,this.accessToken)):t(Error("No access token"))})}buildXOAuth2Token(t){let r=["user="+(this.options.user||""),"auth=Bearer "+(t||this.accessToken),"",""];return Buffer.from(r.join("\x01"),"utf-8").toString("base64")}postRequest(t,r,s,p){let h=!1,w=[],E=0,A=u(t,{method:"post",headers:s.customHeaders,body:r,allowErrorResponse:!0});A.on("readable",()=>{let t;for(;null!==(t=A.read());)w.push(t),E+=t.length}),A.once("error",t=>{if(!h)return h=!0,p(t)}),A.once("end",()=>{if(!h)return h=!0,p(null,Buffer.concat(w,E))})}toBase64URL(t){return"string"==typeof t&&(t=Buffer.from(t)),t.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(t){t=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(t)].map(t=>this.toBase64URL(t)).join(".");let r=h.createSign("RSA-SHA256").update(t).sign(this.options.privateKey);return t+"."+this.toBase64URL(r)}}},72369:(t,r,s)=>{r.OAuth=s(91158).OAuth,r.OAuthEcho=s(91158).OAuthEcho,r.OAuth2=s(21679).OAuth2},70495:t=>{"use strict";t.exports.isAnEarlyCloseHost=function(t){return t&&t.match(".*google(apis)?.com$")}},91158:(t,r,s)=>{var p=s(6113),u=s(33835),h=s(13685),w=s(95687),E=s(57310),A=s(63477),R=s(70495);r.OAuth=function(t,r,s,p,u,h,w,E,A){if(this._isEcho=!1,this._requestUrl=t,this._accessUrl=r,this._consumerKey=s,this._consumerSecret=this._encodeData(p),"RSA-SHA1"==w&&(this._privateKey=p),this._version=u,void 0===h?this._authorize_callback="oob":this._authorize_callback=h,"PLAINTEXT"!=w&&"HMAC-SHA1"!=w&&"RSA-SHA1"!=w)throw Error("Un-supported signature method: "+w);this._signatureMethod=w,this._nonceSize=E||32,this._headers=A||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},r.OAuthEcho=function(t,r,s,p,u,h,w,E){if(this._isEcho=!0,this._realm=t,this._verifyCredentials=r,this._consumerKey=s,this._consumerSecret=this._encodeData(p),"RSA-SHA1"==h&&(this._privateKey=p),this._version=u,"PLAINTEXT"!=h&&"HMAC-SHA1"!=h&&"RSA-SHA1"!=h)throw Error("Un-supported signature method: "+h);this._signatureMethod=h,this._nonceSize=w||32,this._headers=E||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},r.OAuthEcho.prototype=r.OAuth.prototype,r.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},r.OAuth.prototype._encodeData=function(t){return null==t||""==t?"":encodeURIComponent(t).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},r.OAuth.prototype._decodeData=function(t){return null!=t&&(t=t.replace(/\+/g," ")),decodeURIComponent(t)},r.OAuth.prototype._getSignature=function(t,r,s,p){var u=this._createSignatureBase(t,r,s);return this._createSignature(u,p)},r.OAuth.prototype._normalizeUrl=function(t){var r=E.parse(t,!0),s="";return r.port&&("http:"==r.protocol&&"80"!=r.port||"https:"==r.protocol&&"443"!=r.port)&&(s=":"+r.port),r.pathname&&""!=r.pathname||(r.pathname="/"),r.protocol+"//"+r.hostname+s+r.pathname},r.OAuth.prototype._isParameterNameAnOAuthParameter=function(t){var r=t.match("^oauth_");return!!r&&"oauth_"===r[0]},r.OAuth.prototype._buildAuthorizationHeaders=function(t){var r="OAuth ";this._isEcho&&(r+='realm="'+this._realm+'",');for(var s=0;s<t.length;s++)this._isParameterNameAnOAuthParameter(t[s][0])&&(r+=""+this._encodeData(t[s][0])+'="'+this._encodeData(t[s][1])+'"'+this._oauthParameterSeperator);return r.substring(0,r.length-this._oauthParameterSeperator.length)},r.OAuth.prototype._makeArrayOfArgumentsHash=function(t){var r=[];for(var s in t)if(t.hasOwnProperty(s)){var p=t[s];if(Array.isArray(p))for(var u=0;u<p.length;u++)r[r.length]=[s,p[u]];else r[r.length]=[s,p]}return r},r.OAuth.prototype._sortRequestParams=function(t){return t.sort(function(t,r){return t[0]==r[0]?t[1]<r[1]?-1:1:t[0]<r[0]?-1:1}),t},r.OAuth.prototype._normaliseRequestParams=function(t){for(var r=this._makeArrayOfArgumentsHash(t),s=0;s<r.length;s++)r[s][0]=this._encodeData(r[s][0]),r[s][1]=this._encodeData(r[s][1]);r=this._sortRequestParams(r);for(var t="",s=0;s<r.length;s++)t+=r[s][0]+"="+r[s][1],s<r.length-1&&(t+="&");return t},r.OAuth.prototype._createSignatureBase=function(t,r,s){return r=this._encodeData(this._normalizeUrl(r)),s=this._encodeData(s),t.toUpperCase()+"&"+r+"&"+s},r.OAuth.prototype._createSignature=function(t,r){if(void 0===r)var r="";else r=this._encodeData(r);var s=this._consumerSecret+"&"+r,h="";return"PLAINTEXT"==this._signatureMethod?h=s:"RSA-SHA1"==this._signatureMethod?(s=this._privateKey||"",h=p.createSign("RSA-SHA1").update(t).sign(s,"base64")):h=p.Hmac?p.createHmac("sha1",s).update(t).digest("base64"):u.HMACSHA1(s,t),h},r.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],r.OAuth.prototype._getNonce=function(t){for(var r,s=[],p=this.NONCE_CHARS,u=p.length,h=0;h<t;h++)r=Math.floor(Math.random()*u),s[h]=p[r];return s.join("")},r.OAuth.prototype._createClient=function(t,r,s,p,u,E){return(E?w:h).request({host:r,port:t,path:p,method:s,headers:u})},r.OAuth.prototype._prepareParameters=function(t,r,s,p,u){var h={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(t&&(h.oauth_token=t),this._isEcho)I=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(h),r);else{if(u)for(var w in u)u.hasOwnProperty(w)&&(h[w]=u[w]);var R=E.parse(p,!1);if(R.query){var I,U,N=A.parse(R.query);for(var w in N){var W=N[w];if("object"==typeof W)for(U in W)h[w+"["+U+"]"]=W[U];else h[w]=W}}I=this._getSignature(s,p,this._normaliseRequestParams(h),r)}var J=this._sortRequestParams(this._makeArrayOfArgumentsHash(h));return J[J.length]=["oauth_signature",I],J},r.OAuth.prototype._performSecureRequest=function(t,r,s,p,u,h,w,I){var U,N,W=this._prepareParameters(t,r,s,p,u);w||(w="application/x-www-form-urlencoded");var J=E.parse(p,!1);"http:"!=J.protocol||J.port||(J.port=80),"https:"!=J.protocol||J.port||(J.port=443);var K={},G=this._buildAuthorizationHeaders(W);for(var X in this._isEcho?K["X-Verify-Credentials-Authorization"]=G:K.Authorization=G,K.Host=J.host,this._headers)this._headers.hasOwnProperty(X)&&(K[X]=this._headers[X]);for(var X in u)this._isParameterNameAnOAuthParameter(X)&&delete u[X];("POST"==s||"PUT"==s)&&null==h&&null!=u&&(h=A.stringify(u).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),h?Buffer.isBuffer(h)?K["Content-length"]=h.length:K["Content-length"]=Buffer.byteLength(h):K["Content-length"]=0,K["Content-Type"]=w,J.pathname&&""!=J.pathname||(J.pathname="/"),U=J.query?J.pathname+"?"+J.query:J.pathname,N="https:"==J.protocol?this._createClient(J.port,J.hostname,s,U,K,!0):this._createClient(J.port,J.hostname,s,U,K);var Y=this._clientOptions;if(!I)return("POST"==s||"PUT"==s)&&null!=h&&""!=h&&N.write(h),N;var Q="",Z=this,ee=R.isAnEarlyCloseHost(J.hostname),et=!1,passBackControl=function(p){et||(et=!0,p.statusCode>=200&&p.statusCode<=299?I(null,Q,p):(301==p.statusCode||302==p.statusCode)&&Y.followRedirects&&p.headers&&p.headers.location?Z._performSecureRequest(t,r,s,p.headers.location,u,h,w,I):I({statusCode:p.statusCode,data:Q},Q,p))};N.on("response",function(t){t.setEncoding("utf8"),t.on("data",function(t){Q+=t}),t.on("end",function(){passBackControl(t)}),t.on("close",function(){ee&&passBackControl(t)})}),N.on("error",function(t){et||(et=!0,I(t))}),("POST"==s||"PUT"==s)&&null!=h&&""!=h&&N.write(h),N.end()},r.OAuth.prototype.setClientOptions=function(t){var r,s={},p=Object.prototype.hasOwnProperty;for(r in this._defaultClientOptions)p.call(t,r)?s[r]=t[r]:s[r]=this._defaultClientOptions[r];this._clientOptions=s},r.OAuth.prototype.getOAuthAccessToken=function(t,r,s,p){var u={};"function"==typeof s?p=s:u.oauth_verifier=s,this._performSecureRequest(t,r,this._clientOptions.accessTokenHttpMethod,this._accessUrl,u,null,null,function(t,r,s){if(t)p(t);else{var u=A.parse(r),h=u.oauth_token;delete u.oauth_token;var w=u.oauth_token_secret;delete u.oauth_token_secret,p(null,h,w,u)}})},r.OAuth.prototype.getProtectedResource=function(t,r,s,p,u){this._performSecureRequest(s,p,r,t,null,"",null,u)},r.OAuth.prototype.delete=function(t,r,s,p){return this._performSecureRequest(r,s,"DELETE",t,null,"",null,p)},r.OAuth.prototype.get=function(t,r,s,p){return this._performSecureRequest(r,s,"GET",t,null,"",null,p)},r.OAuth.prototype._putOrPost=function(t,r,s,p,u,h,w){var E=null;return"function"==typeof h&&(w=h,h=null),"string"==typeof u||Buffer.isBuffer(u)||(h="application/x-www-form-urlencoded",E=u,u=null),this._performSecureRequest(s,p,t,r,E,u,h,w)},r.OAuth.prototype.put=function(t,r,s,p,u,h){return this._putOrPost("PUT",t,r,s,p,u,h)},r.OAuth.prototype.post=function(t,r,s,p,u,h){return this._putOrPost("POST",t,r,s,p,u,h)},r.OAuth.prototype.getOAuthRequestToken=function(t,r){"function"==typeof t&&(r=t,t={}),this._authorize_callback&&(t.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,t,null,null,function(t,s,p){if(t)r(t);else{var u=A.parse(s),h=u.oauth_token,w=u.oauth_token_secret;delete u.oauth_token,delete u.oauth_token_secret,r(null,h,w,u)}})},r.OAuth.prototype.signUrl=function(t,r,s,p){if(void 0===p)var p="GET";for(var u=this._prepareParameters(r,s,p,t,{}),h=E.parse(t,!1),w="",A=0;A<u.length;A++)w+=u[A][0]+"="+this._encodeData(u[A][1])+"&";return w=w.substring(0,w.length-1),h.protocol+"//"+h.host+h.pathname+"?"+w},r.OAuth.prototype.authHeader=function(t,r,s,p){if(void 0===p)var p="GET";var u=this._prepareParameters(r,s,p,t,{});return this._buildAuthorizationHeaders(u)}},21679:(t,r,s)=>{var p=s(63477),u=(s(6113),s(95687)),h=s(13685),w=s(57310),E=s(70495);r.OAuth2=function(t,r,s,p,u,h){this._clientId=t,this._clientSecret=r,this._baseSite=s,this._authorizeUrl=p||"/oauth/authorize",this._accessTokenUrl=u||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=h||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},r.OAuth2.prototype.setAgent=function(t){this._agent=t},r.OAuth2.prototype.setAccessTokenName=function(t){this._accessTokenName=t},r.OAuth2.prototype.setAuthMethod=function(t){this._authMethod=t},r.OAuth2.prototype.useAuthorizationHeaderforGET=function(t){this._useAuthorizationHeaderForGET=t},r.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},r.OAuth2.prototype.buildAuthHeader=function(t){return this._authMethod+" "+t},r.OAuth2.prototype._chooseHttpLibrary=function(t){var r=u;return"https:"!=t.protocol&&(r=h),r},r.OAuth2.prototype._request=function(t,r,s,u,h,E){var A=w.parse(r,!0);"https:"!=A.protocol||A.port||(A.port=443);var R=this._chooseHttpLibrary(A),I={};for(var U in this._customHeaders)I[U]=this._customHeaders[U];if(s)for(var U in s)I[U]=s[U];I.Host=A.host,I["User-Agent"]||(I["User-Agent"]="Node-oauth"),u?Buffer.isBuffer(u)?I["Content-Length"]=u.length:I["Content-Length"]=Buffer.byteLength(u):I["Content-length"]=0,!h||"Authorization"in I||(A.query||(A.query={}),A.query[this._accessTokenName]=h);var N=p.stringify(A.query);N&&(N="?"+N);var W={host:A.hostname,port:A.port,path:A.pathname+N,method:t,headers:I};this._executeRequest(R,W,u,E)},r.OAuth2.prototype._executeRequest=function(t,r,s,p){var u=E.isAnEarlyCloseHost(r.host),h=!1;function passBackControl(t,r){h||(h=!0,t.statusCode>=200&&t.statusCode<=299||301==t.statusCode||302==t.statusCode?p(null,r,t):p({statusCode:t.statusCode,data:r}))}var w="";this._agent&&(r.agent=this._agent);var A=t.request(r);A.on("response",function(t){t.on("data",function(t){w+=t}),t.on("close",function(r){u&&passBackControl(t,w)}),t.addListener("end",function(){passBackControl(t,w)})}),A.on("error",function(t){h=!0,p(t)}),("POST"==r.method||"PUT"==r.method)&&s&&A.write(s),A.end()},r.OAuth2.prototype.getAuthorizeUrl=function(t){var t=t||{};return t.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+p.stringify(t)},r.OAuth2.prototype.getOAuthAccessToken=function(t,r,s){var r=r||{};r.client_id=this._clientId,r.client_secret=this._clientSecret;var u="refresh_token"===r.grant_type?"refresh_token":"code";r[u]=t;var h=p.stringify(r);this._request("POST",this._getAccessTokenUrl(),{"Content-Type":"application/x-www-form-urlencoded"},h,null,function(t,r,u){if(t)s(t);else{try{h=JSON.parse(r)}catch(t){h=p.parse(r)}var h,w=h.access_token,E=h.refresh_token;delete h.refresh_token,s(null,w,E,h)}})},r.OAuth2.prototype.getProtectedResource=function(t,r,s){this._request("GET",t,{},"",r,s)},r.OAuth2.prototype.get=function(t,r,s){if(this._useAuthorizationHeaderForGET){var p={Authorization:this.buildAuthHeader(r)};r=null}else p={};this._request("GET",t,p,"",r,s)}},33835:(t,r)=>{function str2rstr_utf8(t){for(var r,s,p="",u=-1;++u<t.length;)r=t.charCodeAt(u),s=u+1<t.length?t.charCodeAt(u+1):0,55296<=r&&r<=56319&&56320<=s&&s<=57343&&(r=65536+((1023&r)<<10)+(1023&s),u++),r<=127?p+=String.fromCharCode(r):r<=2047?p+=String.fromCharCode(192|r>>>6&31,128|63&r):r<=65535?p+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):r<=2097151&&(p+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return p}function rstr2binb(t){for(var r=Array(t.length>>2),s=0;s<r.length;s++)r[s]=0;for(var s=0;s<8*t.length;s+=8)r[s>>5]|=(255&t.charCodeAt(s/8))<<24-s%32;return r}function binb_sha1(t,r){t[r>>5]|=128<<24-r%32,t[(r+64>>9<<4)+15]=r;for(var s=Array(80),p=1732584193,u=-271733879,h=-1732584194,w=271733878,E=-1009589776,A=0;A<t.length;A+=16){for(var R=p,I=u,U=h,N=w,W=E,J=0;J<80;J++){J<16?s[J]=t[A+J]:s[J]=bit_rol(s[J-3]^s[J-8]^s[J-14]^s[J-16],1);var K,G,X,Y,Q,Z=safe_add(safe_add(bit_rol(p,5),(K=J,G=u,X=h,Y=w,K<20?G&X|~G&Y:K<40?G^X^Y:K<60?G&X|G&Y|X&Y:G^X^Y)),safe_add(safe_add(E,s[J]),(Q=J)<20?1518500249:Q<40?1859775393:Q<60?-1894007588:-899497514));E=w,w=h,h=bit_rol(u,30),u=p,p=Z}p=safe_add(p,R),u=safe_add(u,I),h=safe_add(h,U),w=safe_add(w,N),E=safe_add(E,W)}return[p,u,h,w,E]}function safe_add(t,r){var s=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(s>>16)<<16|65535&s}function bit_rol(t,r){return t<<r|t>>>32-r}r.HMACSHA1=function(t,r){return function(t){for(var r="",s=t.length,p=0;p<s;p+=3)for(var u=t.charCodeAt(p)<<16|(p+1<s?t.charCodeAt(p+1)<<8:0)|(p+2<s?t.charCodeAt(p+2):0),h=0;h<4;h++)8*p+6*h>8*t.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(u>>>6*(3-h)&63);return r}(function(t,r){var s=rstr2binb(t);s.length>16&&(s=binb_sha1(s,8*t.length));for(var p=Array(16),u=Array(16),h=0;h<16;h++)p[h]=909522486^s[h],u[h]=1549556828^s[h];var w=binb_sha1(p.concat(rstr2binb(r)),512+8*r.length);return function(t){for(var r="",s=0;s<32*t.length;s+=8)r+=String.fromCharCode(t[s>>5]>>>24-s%32&255);return r}(binb_sha1(u.concat(w),672))}(str2rstr_utf8(t),str2rstr_utf8(r)))}},29173:(t,r,s)=>{"use strict";var p=s(6113);function objectHash(t,r){return r=applyDefaults(t,r),function(t,r){if(void 0===(s="passthrough"!==r.algorithm?p.createHash(r.algorithm):new PassThrough).write&&(s.write=s.update,s.end=s.update),typeHasher(r,s).dispatch(t),s.update||s.end(""),s.digest)return s.digest("buffer"===r.encoding?void 0:r.encoding);var s,u=s.read();return"buffer"===r.encoding?u:u.toString(r.encoding)}(t,r)}(r=t.exports=objectHash).sha1=function(t){return objectHash(t)},r.keys=function(t){return objectHash(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(t){return objectHash(t,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(t){return objectHash(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var u=p.getHashes?p.getHashes().slice():["sha1","md5"];u.push("passthrough");var h=["buffer","hex","binary","base64"];function applyDefaults(t,r){r=r||{};var s={};if(s.algorithm=r.algorithm||"sha1",s.encoding=r.encoding||"hex",s.excludeValues=!!r.excludeValues,s.algorithm=s.algorithm.toLowerCase(),s.encoding=s.encoding.toLowerCase(),s.ignoreUnknown=!0===r.ignoreUnknown,s.respectType=!1!==r.respectType,s.respectFunctionNames=!1!==r.respectFunctionNames,s.respectFunctionProperties=!1!==r.respectFunctionProperties,s.unorderedArrays=!0===r.unorderedArrays,s.unorderedSets=!1!==r.unorderedSets,s.unorderedObjects=!1!==r.unorderedObjects,s.replacer=r.replacer||void 0,s.excludeKeys=r.excludeKeys||void 0,void 0===t)throw Error("Object argument required.");for(var p=0;p<u.length;++p)u[p].toLowerCase()===s.algorithm.toLowerCase()&&(s.algorithm=u[p]);if(-1===u.indexOf(s.algorithm))throw Error('Algorithm "'+s.algorithm+'"  not supported. supported values: '+u.join(", "));if(-1===h.indexOf(s.encoding)&&"passthrough"!==s.algorithm)throw Error('Encoding "'+s.encoding+'"  not supported. supported values: '+h.join(", "));return s}function isNativeFunction(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function typeHasher(t,r,s){s=s||[];var write=function(t){return r.update?r.update(t,"utf8"):r.write(t,"utf8")};return{dispatch:function(r){t.replacer&&(r=t.replacer(r));var s=typeof r;return null===r&&(s="null"),this["_"+s](r)},_object:function(r){var p=Object.prototype.toString.call(r),u=/\[object (.*)\]/i.exec(p);u=(u=u?u[1]:"unknown:["+p+"]").toLowerCase();var h=null;if((h=s.indexOf(r))>=0)return this.dispatch("[CIRCULAR:"+h+"]");if(s.push(r),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(r))return write("buffer:"),write(r);if("object"!==u&&"function"!==u&&"asyncfunction"!==u){if(this["_"+u])this["_"+u](r);else if(t.ignoreUnknown)return write("["+u+"]");else throw Error('Unknown object type "'+u+'"')}else{var w=Object.keys(r);t.unorderedObjects&&(w=w.sort()),!1===t.respectType||isNativeFunction(r)||w.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(w=w.filter(function(r){return!t.excludeKeys(r)})),write("object:"+w.length+":");var E=this;return w.forEach(function(s){E.dispatch(s),write(":"),t.excludeValues||E.dispatch(r[s]),write(",")})}},_array:function(r,p){p=void 0!==p?p:!1!==t.unorderedArrays;var u=this;if(write("array:"+r.length+":"),!p||r.length<=1)return r.forEach(function(t){return u.dispatch(t)});var h=[],w=r.map(function(r){var p=new PassThrough,u=s.slice();return typeHasher(t,p,u).dispatch(r),h=h.concat(u.slice(s.length)),p.read().toString()});return s=s.concat(h),w.sort(),this._array(w,!1)},_date:function(t){return write("date:"+t.toJSON())},_symbol:function(t){return write("symbol:"+t.toString())},_error:function(t){return write("error:"+t.toString())},_boolean:function(t){return write("bool:"+t.toString())},_string:function(t){write("string:"+t.length+":"),write(t.toString())},_function:function(r){write("fn:"),isNativeFunction(r)?this.dispatch("[native]"):this.dispatch(r.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(r.name)),t.respectFunctionProperties&&this._object(r)},_number:function(t){return write("number:"+t.toString())},_xml:function(t){return write("xml:"+t.toString())},_null:function(){return write("Null")},_undefined:function(){return write("Undefined")},_regexp:function(t){return write("regex:"+t.toString())},_uint8array:function(t){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return write("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return write("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return write("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return write("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return write("url:"+t.toString(),"utf8")},_map:function(r){write("map:");var s=Array.from(r);return this._array(s,!1!==t.unorderedSets)},_set:function(r){write("set:");var s=Array.from(r);return this._array(s,!1!==t.unorderedSets)},_file:function(t){return write("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(t.ignoreUnknown)return write("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return write("domwindow")},_bigint:function(t){return write("bigint:"+t.toString())},_process:function(){return write("process")},_timer:function(){return write("timer")},_pipe:function(){return write("pipe")},_tcp:function(){return write("tcp")},_udp:function(){return write("udp")},_tty:function(){return write("tty")},_statwatcher:function(){return write("statwatcher")},_securecontext:function(){return write("securecontext")},_connection:function(){return write("connection")},_zlib:function(){return write("zlib")},_context:function(){return write("context")},_nodescript:function(){return write("nodescript")},_httpparser:function(){return write("httpparser")},_dataview:function(){return write("dataview")},_signal:function(){return write("signal")},_fsevent:function(){return write("fsevent")},_tlswrap:function(){return write("tlswrap")}}}function PassThrough(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}r.writeToStream=function(t,r,s){return void 0===s&&(s=r,r={}),typeHasher(r=applyDefaults(t,r),s).dispatch(t)}},50939:(t,r,s)=>{"use strict";let p;let{strict:u}=s(39491),{createHash:h}=s(6113),{format:w}=s(73837);if(Buffer.isEncoding("base64url"))p=t=>t.toString("base64url");else{let fromBase64=t=>t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");p=t=>fromBase64(t.toString("base64"))}function generate(t,r,s){let u=(function(t,r){switch(t){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return h("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return h("sha384");case"HS512":case"RS512":case"PS512":case"ES512":case"Ed25519":return h("sha512");case"Ed448":return h("shake256",{outputLength:114});case"EdDSA":switch(r){case"Ed25519":return h("sha512");case"Ed448":return h("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}})(r,s).update(t).digest();return p(u.slice(0,u.length/2))}t.exports={validate:function(t,r,s,p,h){let E,A;if("string"!=typeof t.claim||!t.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof t.source||!t.source)throw TypeError("names.source must be a non-empty string");u("string"==typeof r&&r,`${t.claim} must be a non-empty string`),u("string"==typeof s&&s,`${t.source} must be a non-empty string`);try{E=generate(s,p,h)}catch(r){A=w("%s could not be validated (%s)",t.claim,r.message)}A=A||w("%s mismatch, expected %s, got: %s",t.claim,E,r),u.equal(E,r,A)},generate}},76398:(t,r,s)=>{"use strict";let p;let{inspect:u}=s(73837),h=s(13685),w=s(6113),{strict:E}=s(39491),A=s(63477),R=s(57310),{URL:I,URLSearchParams:U}=s(57310),N=s(92473),W=s(50939),J=s(68060),K=s(44759),G=s(26597),X=s(81772),Y=s(92102),{assertSigningAlgValuesSupport:Q,assertIssuerConfiguration:Z}=s(36245),ee=s(52542),et=s(13641),er=s(7889),ei=s(8164),{OPError:en,RPError:eo}=s(10574),ea=s(91624),{random:es}=s(29766),ec=s(3135),{CLOCK_TOLERANCE:el}=s(60577),{keystores:ep}=s(18763),ed=s(73640),eu=s(68979),{authenticatedPost:eh,resolveResponseType:ef,resolveRedirectUri:em}=s(98522),{queryKeyStore:eg}=s(37875),ev=s(67688),[ey,e_]=process.version.slice(1).split(".").map(t=>parseInt(t,10)),ex=ey>=17||16===ey&&e_>=9,eb=Symbol(),ew=Symbol(),ek=Symbol();function pickCb(t){return ee(t,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function authorizationHeaderValue(t,r="Bearer"){return`${r} ${t}`}function getSearchParams(t){let r=R.parse(t);return r.search?A.parse(r.search.substring(1)):{}}function verifyPresence(t,r,s){if(void 0===t[s])throw new eo({message:`missing required JWT property ${s}`,jwt:r})}function authorizationParams(t){let r={client_id:this.client_id,scope:"openid",response_type:ef.call(this),redirect_uri:em.call(this),...t};return Object.entries(r).forEach(([t,s])=>{null==s?delete r[t]:"claims"===t&&"object"==typeof s?r[t]=JSON.stringify(s):"resource"===t&&Array.isArray(s)?r[t]=s:"string"!=typeof s&&(r[t]=String(s))}),r}function getKeystore(t){if(!et(t)||!Array.isArray(t.keys)||t.keys.some(t=>!et(t)||!("kty"in t)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return ed.fromJWKS(t,{onlyPrivate:!0})}let BaseClient=class BaseClient{#e;#t;#r;#i;constructor(t,r,s={},p,u){if(this.#e=new Map,this.#t=t,this.#r=r,"string"!=typeof s.client_id||!s.client_id)throw TypeError("client_id is required");let h={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi1()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...this.fapi2()?{id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",token_endpoint_auth_method:void 0}:void 0,...s};if(this.fapi())switch(h.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!p)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(this.fapi2()&&(h.tls_client_certificate_bound_access_tokens&&h.dpop_bound_access_tokens||!h.tls_client_certificate_bound_access_tokens&&!h.dpop_bound_access_tokens))throw TypeError("either tls_client_certificate_bound_access_tokens or dpop_bound_access_tokens must be set to true");if(function(t,r,s){if(r.token_endpoint_auth_method||function(t,r){try{let s=t.issuer.token_endpoint_auth_methods_supported;!s.includes(r.token_endpoint_auth_method)&&s.includes("client_secret_post")&&(r.token_endpoint_auth_method="client_secret_post")}catch(t){}}(t,s),r.redirect_uri){if(r.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");s.redirect_uris=[r.redirect_uri],delete s.redirect_uri}if(r.response_type){if(r.response_types)throw TypeError("provide a response_type or response_types, not both");s.response_types=[r.response_type],delete s.response_type}}(this,s,h),Q("token",this.issuer,h),["introspection","revocation"].forEach(t=>{(function(t,r,s){if(!r[`${t}_endpoint`])return;let p=s.token_endpoint_auth_method,u=s.token_endpoint_auth_signing_alg,h=`${t}_endpoint_auth_method`,w=`${t}_endpoint_auth_signing_alg`;void 0===s[h]&&void 0===s[w]&&(void 0!==p&&(s[h]=p),void 0!==u&&(s[w]=u))})(t,this.issuer,h),Q(t,this.issuer,h)}),Object.entries(h).forEach(([t,r])=>{this.#e.set(t,r),this[t]||Object.defineProperty(this,t,{get(){return this.#e.get(t)},enumerable:!0})}),void 0!==p){let t=getKeystore.call(this,p);ep.set(this,t)}null!=u&&u.additionalAuthorizedParties&&(this.#i=eu(u.additionalAuthorizedParties)),this[el]=0}authorizationUrl(t={}){if(!et(t))throw TypeError("params must be a plain object");Z(this.issuer,"authorization_endpoint");let r=new I(this.issuer.authorization_endpoint);for(let[s,p]of Object.entries(authorizationParams.call(this,t)))if(Array.isArray(p))for(let t of(r.searchParams.delete(s),p))r.searchParams.append(s,t);else r.searchParams.set(s,p);return r.href.replace(/\+/g,"%20")}authorizationPost(t={}){if(!et(t))throw TypeError("params must be a plain object");let r=authorizationParams.call(this,t),s=Object.keys(r).map(t=>`<input type="hidden" name="${t}" value="${r[t]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${s}
</form>
</body>
</html>`}endSessionUrl(t={}){let r;Z(this.issuer,"end_session_endpoint");let{0:s,length:p}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:u=1===p?s:void 0}=t;if({id_token_hint:r,...t}=t,r instanceof ei){if(!r.id_token)throw TypeError("id_token not present in TokenSet");r=r.id_token}let h=R.parse(this.issuer.end_session_endpoint),w=X(getSearchParams(this.issuer.end_session_endpoint),t,{post_logout_redirect_uri:u,client_id:this.client_id},{id_token_hint:r});return Object.entries(w).forEach(([t,r])=>{null==r&&delete w[t]}),h.search=null,h.query=w,R.format(h)}callbackParams(t){let r=t instanceof h.IncomingMessage||t&&t.method&&t.url,s="string"==typeof t;if(!s&&!r)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!r)return pickCb(getSearchParams(t));switch(t.method){case"GET":return pickCb(getSearchParams(t.url));case"POST":if(void 0===t.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof t.body){case"object":case"string":if(Buffer.isBuffer(t.body))return pickCb(A.parse(t.body.toString("utf-8")));if("string"==typeof t.body)return pickCb(A.parse(t.body));return pickCb(t.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(t,r,s={},{exchangeBody:p,clientAssertionPayload:u,DPoP:h}={}){let w=pickCb(r);if(!s.jarm||"response"in r){if("response"in r){let t=await this.decryptJARM(w.response);w=await this.validateJARM(t)}}else throw new eo({message:"expected a JARM response",checks:s,params:w});if(this.default_max_age&&!s.max_age&&(s.max_age=this.default_max_age),w.state&&!s.state)throw TypeError("checks.state argument is missing");if(!w.state&&s.state)throw new eo({message:"state missing from the response",checks:s,params:w});if(s.state!==w.state)throw new eo({printf:["state mismatch, expected %s, got: %s",s.state,w.state],checks:s,params:w});if("iss"in w){if(Z(this.issuer,"issuer"),w.iss!==this.issuer.issuer)throw new eo({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,w.iss],params:w})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in w)&&!("response"in r))throw new eo({message:"iss missing from the response",params:w});if(w.error)throw new en(w);let E={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(s.response_type){for(let t of s.response_type.split(" "))if("none"===t){if(w.code||w.id_token||w.access_token)throw new eo({message:'unexpected params encountered for "none" response',checks:s,params:w})}else for(let r of E[t])if(!w[r])throw new eo({message:`${r} missing from response`,checks:s,params:w})}if(w.id_token){let t=new ei(w);if(await this.decryptIdToken(t),await this.validateIdToken(t,s.nonce,"authorization",s.max_age,s.state),!w.code)return t}if(w.code){let r=await this.grant({...p,grant_type:"authorization_code",code:w.code,redirect_uri:t,code_verifier:s.code_verifier},{clientAssertionPayload:u,DPoP:h});return await this.decryptIdToken(r),await this.validateIdToken(r,s.nonce,"token",s.max_age),w.session_state&&(r.session_state=w.session_state),r}return new ei(w)}async oauthCallback(t,r,s={},{exchangeBody:p,clientAssertionPayload:u,DPoP:h}={}){let w=pickCb(r);if(!s.jarm||"response"in r){if("response"in r){let t=await this.decryptJARM(w.response);w=await this.validateJARM(t)}}else throw new eo({message:"expected a JARM response",checks:s,params:w});if(w.state&&!s.state)throw TypeError("checks.state argument is missing");if(!w.state&&s.state)throw new eo({message:"state missing from the response",checks:s,params:w});if(s.state!==w.state)throw new eo({printf:["state mismatch, expected %s, got: %s",s.state,w.state],checks:s,params:w});if("iss"in w){if(Z(this.issuer,"issuer"),w.iss!==this.issuer.issuer)throw new eo({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,w.iss],params:w})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in w)&&!("response"in r))throw new eo({message:"iss missing from the response",params:w});if(w.error)throw new en(w);if("string"==typeof w.id_token&&w.id_token.length)throw new eo({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:w});delete w.id_token;let E={code:["code"],token:["access_token","token_type"]};if(s.response_type)for(let t of s.response_type.split(" ")){if("none"===t&&(w.code||w.id_token||w.access_token))throw new eo({message:'unexpected params encountered for "none" response',checks:s,params:w});if(E[t]){for(let r of E[t])if(!w[r])throw new eo({message:`${r} missing from response`,checks:s,params:w})}}if(w.code){let r=await this.grant({...p,grant_type:"authorization_code",code:w.code,redirect_uri:t,code_verifier:s.code_verifier},{clientAssertionPayload:u,DPoP:h});if("string"==typeof r.id_token&&r.id_token.length)throw new eo({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:w});return delete r.id_token,r}return new ei(w)}async decryptIdToken(t){if(!this.id_token_encrypted_response_alg)return t;let r=t;if(r instanceof ei){if(!r.id_token)throw TypeError("id_token not present in TokenSet");r=r.id_token}let s=this.id_token_encrypted_response_alg,p=this.id_token_encrypted_response_enc,u=await this.decryptJWE(r,s,p);return t instanceof ei?(t.id_token=u,t):u}async validateJWTUserinfo(t){let r=this.userinfo_signed_response_alg;return this.validateJWT(t,r,[])}async decryptJARM(t){if(!this.authorization_encrypted_response_alg)return t;let r=this.authorization_encrypted_response_alg,s=this.authorization_encrypted_response_enc;return this.decryptJWE(t,r,s)}async decryptJWTUserinfo(t){if(!this.userinfo_encrypted_response_alg)return t;let r=this.userinfo_encrypted_response_alg,s=this.userinfo_encrypted_response_enc;return this.decryptJWE(t,r,s)}async decryptJWE(t,r,s="A128CBC-HS256"){let p;let u=JSON.parse(G.decode(t.split(".")[0]));if(u.alg!==r)throw new eo({printf:["unexpected JWE alg received, expected %s, got: %s",r,u.alg],jwt:t});if(u.enc!==s)throw new eo({printf:["unexpected JWE enc received, expected %s, got: %s",s,u.enc],jwt:t});let getPlaintext=t=>new TextDecoder().decode(t.plaintext);if(r.match(/^(?:RSA|ECDH)/)){let r=await ep.get(this),s=N.decodeProtectedHeader(t);for(let u of r.all({...s,use:"enc"}))if(p=await N.compactDecrypt(t,await u.keyObject(s.alg)).then(getPlaintext,()=>{}))break}else p=await N.compactDecrypt(t,this.secretForAlg("dir"===r?s:r)).then(getPlaintext,()=>{});if(!p)throw new eo({message:"failed to decrypt JWE",jwt:t});return p}async validateIdToken(t,r,s,p,u){let h=t,w=this.id_token_signed_response_alg,E=h instanceof ei;if(E){if(!h.id_token)throw TypeError("id_token not present in TokenSet");h=h.id_token}h=String(h);let A=ea(),{protected:R,payload:I,key:U}=await this.validateJWT(h,w);if("number"==typeof p||p!==ek&&this.require_auth_time){if(!I.auth_time)throw new eo({message:"missing required JWT property auth_time",jwt:h});if("number"!=typeof I.auth_time)throw new eo({message:"JWT auth_time claim must be a JSON numeric value",jwt:h})}if("number"==typeof p&&I.auth_time+p<A-this[el])throw new eo({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",p,I.auth_time,A-this[el]],now:A,tolerance:this[el],auth_time:I.auth_time,jwt:h});if(r!==ew&&(I.nonce||void 0!==r)&&I.nonce!==r)throw new eo({printf:["nonce mismatch, expected %s, got: %s",r,I.nonce],jwt:h});if("authorization"===s){if(!I.at_hash&&t.access_token)throw new eo({message:"missing required property at_hash",jwt:h});if(!I.c_hash&&t.code)throw new eo({message:"missing required property c_hash",jwt:h});if(this.fapi1()&&!I.s_hash&&(t.state||u))throw new eo({message:"missing required property s_hash",jwt:h});if(I.s_hash){if(!u)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{W.validate({claim:"s_hash",source:"state"},I.s_hash,u,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new eo({message:t.message,jwt:h})}}}if(this.fapi()&&I.iat<A-3600)throw new eo({printf:["JWT issued too far in the past, now %i, iat %i",A,I.iat],now:A,tolerance:this[el],iat:I.iat,jwt:h});if(t.access_token&&void 0!==I.at_hash)try{W.validate({claim:"at_hash",source:"access_token"},I.at_hash,t.access_token,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new eo({message:t.message,jwt:h})}if(t.code&&void 0!==I.c_hash)try{W.validate({claim:"c_hash",source:"code"},I.c_hash,t.code,R.alg,U.jwk&&U.jwk.crv)}catch(t){throw new eo({message:t.message,jwt:h})}return t}async validateJWT(t,r,s=["iss","sub","aud","exp","iat"]){let p,u,h;let w="https://self-issued.me"===this.issuer.issuer,A=ea();try{({header:p,payload:u}=K(t,{complete:!0}))}catch(r){throw new eo({printf:["failed to decode JWT (%s: %s)",r.name,r.message],jwt:t})}if(p.alg!==r)throw new eo({printf:["unexpected JWT alg received, expected %s, got: %s",r,p.alg],jwt:t});if(w&&(s=[...s,"sub_jwk"]),s.forEach(verifyPresence.bind(void 0,u,t)),void 0!==u.iss){let r=this.issuer.issuer;if(this.#r&&(r=this.issuer.issuer.replace("{tenantid}",u.tid)),u.iss!==r)throw new eo({printf:["unexpected iss value, expected %s, got: %s",r,u.iss],jwt:t})}if(void 0!==u.iat&&"number"!=typeof u.iat)throw new eo({message:"JWT iat claim must be a JSON numeric value",jwt:t});if(void 0!==u.nbf){if("number"!=typeof u.nbf)throw new eo({message:"JWT nbf claim must be a JSON numeric value",jwt:t});if(u.nbf>A+this[el])throw new eo({printf:["JWT not active yet, now %i, nbf %i",A+this[el],u.nbf],now:A,tolerance:this[el],nbf:u.nbf,jwt:t})}if(void 0!==u.exp){if("number"!=typeof u.exp)throw new eo({message:"JWT exp claim must be a JSON numeric value",jwt:t});if(A-this[el]>=u.exp)throw new eo({printf:["JWT expired, now %i, exp %i",A-this[el],u.exp],now:A,tolerance:this[el],exp:u.exp,jwt:t})}if(void 0!==u.aud){if(Array.isArray(u.aud)){if(u.aud.length>1&&!u.azp)throw new eo({message:"missing required JWT property azp",jwt:t});if(!u.aud.includes(this.client_id))throw new eo({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,u.aud],jwt:t})}else if(u.aud!==this.client_id)throw new eo({printf:["aud mismatch, expected %s, got: %s",this.client_id,u.aud],jwt:t})}if(void 0!==u.azp){let r=this.#i;if(!(r="string"==typeof r?[this.client_id,r]:Array.isArray(r)?[this.client_id,...r]:[this.client_id]).includes(u.azp))throw new eo({printf:["azp mismatch, got: %s",u.azp],jwt:t})}if(w){try{E(et(u.sub_jwk));let t=await N.importJWK(u.sub_jwk,p.alg);E.equal(t.type,"public"),h=[{keyObject:()=>t}]}catch(r){throw new eo({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:t})}if(await N.calculateJwkThumbprint(u.sub_jwk)!==u.sub)throw new eo({message:"failed to match the subject with sub_jwk",jwt:t})}else p.alg.startsWith("HS")?h=[this.secretForAlg(p.alg)]:"none"!==p.alg&&(h=await eg.call(this.issuer,{...p,use:"sig"}));if(!h&&"none"===p.alg)return{protected:p,payload:u};for(let r of h){let s=await N.compactVerify(t,r instanceof Uint8Array?r:await r.keyObject(p.alg)).catch(()=>{});if(s)return{payload:u,protected:s.protectedHeader,key:r}}throw new eo({message:"failed to validate JWT signature",jwt:t})}async refresh(t,{exchangeBody:r,clientAssertionPayload:s,DPoP:p}={}){let u=t;if(u instanceof ei){if(!u.refresh_token)throw TypeError("refresh_token not present in TokenSet");u=u.refresh_token}let h=await this.grant({...r,grant_type:"refresh_token",refresh_token:String(u)},{clientAssertionPayload:s,DPoP:p});if(h.id_token&&(await this.decryptIdToken(h),await this.validateIdToken(h,ew,"token",ek),t instanceof ei&&t.id_token)){let r=t.claims().sub,s=h.claims().sub;if(s!==r)throw new eo({printf:["sub mismatch, expected %s, got: %s",r,s],jwt:h.id_token})}return h}async requestResource(t,r,{method:s,headers:p,body:u,DPoP:h,tokenType:w=h?"DPoP":r instanceof ei?r.token_type:"Bearer"}={},E){if(r instanceof ei){if(!r.access_token)throw TypeError("access_token not present in TokenSet");r=r.access_token}if(r){if("string"!=typeof r)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let A={headers:{Authorization:authorizationHeaderValue(r,w),...p},body:u},R=!!this.tls_client_certificate_bound_access_tokens,I=await ec.call(this,{...A,responseType:"buffer",method:s,url:t},{accessToken:r,mTLS:R,DPoP:h}),U=I.headers["www-authenticate"];return E!==eb&&U&&U.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===Y(U).error?this.requestResource(t,r,{method:s,headers:p,body:u,DPoP:h,tokenType:w}):I}async userinfo(t,{method:r="GET",via:s="header",tokenType:p,params:u,DPoP:h}={}){let w;Z(this.issuer,"userinfo_endpoint");let A={tokenType:p,method:String(r).toUpperCase(),DPoP:h};if("GET"!==A.method&&"POST"!==A.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===s&&"POST"!==A.method)throw TypeError("can only send body on POST");let R=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);R?A.headers={Accept:"application/jwt"}:A.headers={Accept:"application/json"};let N=!!this.tls_client_certificate_bound_access_tokens;N&&this.issuer.mtls_endpoint_aliases&&(w=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),w=new I(w||this.issuer.userinfo_endpoint),"body"===s&&(A.headers.Authorization=void 0,A.headers["Content-Type"]="application/x-www-form-urlencoded",A.body=new U,A.body.append("access_token",t instanceof ei?t.access_token:t)),u&&("GET"===A.method?Object.entries(u).forEach(([t,r])=>{w.searchParams.append(t,r)}):A.body?Object.entries(u).forEach(([t,r])=>{A.body.append(t,r)}):(A.body=new U,A.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(u).forEach(([t,r])=>{A.body.append(t,r)}))),A.body&&(A.body=A.body.toString());let W=await this.requestResource(w,t,A),J=er(W,{bearer:!0});if(R){if(!/^application\/jwt/.test(W.headers["content-type"]))throw new eo({message:"expected application/jwt response from the userinfo_endpoint",response:W});let t=W.body.toString(),r=await this.decryptJWTUserinfo(t);if(this.userinfo_signed_response_alg)({payload:J}=await this.validateJWTUserinfo(r));else try{J=JSON.parse(r),E(et(J))}catch(t){throw new eo({message:"failed to parse userinfo JWE payload as JSON",jwt:r})}}else try{J=JSON.parse(W.body)}catch(t){throw Object.defineProperty(t,"response",{value:W}),t}if(t instanceof ei&&t.id_token){let r=t.claims().sub;if(J.sub!==r)throw new eo({printf:["userinfo sub mismatch, expected %s, got: %s",r,J.sub],body:J,jwt:t.id_token})}return J}encryptionSecret(t){let r=t<=256?"sha256":t<=384?"sha384":t<=512&&"sha512";if(!r)throw Error("unsupported symmetric encryption key derivation");return w.createHash(r).update(this.client_secret).digest().slice(0,t/8)}secretForAlg(t){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(t)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(t)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(t,{clientAssertionPayload:r,DPoP:s}={},p){let u;Z(this.issuer,"token_endpoint");let h=await eh.call(this,"token",{form:t,responseType:"json"},{clientAssertionPayload:r,DPoP:s});try{u=er(h)}catch(u){if(p!==eb&&u instanceof en&&"use_dpop_nonce"===u.error)return this.grant(t,{clientAssertionPayload:r,DPoP:s},eb);throw u}return new ei(u)}async deviceAuthorization(t={},{exchangeBody:r,clientAssertionPayload:s,DPoP:p}={}){Z(this.issuer,"device_authorization_endpoint"),Z(this.issuer,"token_endpoint");let u=authorizationParams.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...t}),h=await eh.call(this,"device_authorization",{responseType:"json",form:u},{clientAssertionPayload:s,endpointAuthMethod:"token"}),w=er(h);return new ev({client:this,exchangeBody:r,clientAssertionPayload:s,response:w,maxAge:t.max_age,DPoP:p})}async revoke(t,r,{revokeBody:s,clientAssertionPayload:p}={}){if(Z(this.issuer,"revocation_endpoint"),void 0!==r&&"string"!=typeof r)throw TypeError("hint must be a string");let u={...s,token:t};r&&(u.token_type_hint=r);let h=await eh.call(this,"revocation",{form:u},{clientAssertionPayload:p});er(h,{body:!1})}async introspect(t,r,{introspectBody:s,clientAssertionPayload:p}={}){if(Z(this.issuer,"introspection_endpoint"),void 0!==r&&"string"!=typeof r)throw TypeError("hint must be a string");let u={...s,token:t};r&&(u.token_type_hint=r);let h=await eh.call(this,"introspection",{form:u,responseType:"json"},{clientAssertionPayload:p}),w=er(h);return w}static async register(t,r={}){let{initialAccessToken:s,jwks:p,...u}=r;if(Z(this.issuer,"registration_endpoint"),void 0!==p&&!(t.jwks||t.jwks_uri)){let r=await getKeystore.call(this,p);t.jwks=r.toJWKS()}let h=await ec.call(this,{headers:{Accept:"application/json",...s?{Authorization:authorizationHeaderValue(s)}:void 0},responseType:"json",json:t,url:this.issuer.registration_endpoint,method:"POST"}),w=er(h,{statusCode:201,bearer:!0});return new this(w,p,u)}get metadata(){return eu(Object.fromEntries(this.#e.entries()))}static async fromUri(t,r,s,p){let u=await ec.call(this,{method:"GET",url:t,responseType:"json",headers:{Authorization:authorizationHeaderValue(r),Accept:"application/json"}}),h=er(u,{bearer:!0});return new this(h,s,p)}async requestObject(t={},{sign:r=this.request_object_signing_alg||"none",encrypt:{alg:s=this.request_object_encryption_alg,enc:p=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let u,h;if(!et(t))throw TypeError("requestObject must be a plain object");let w=ea(),E={alg:r,typ:"oauth-authz-req+jwt"},A=JSON.stringify(X({},t,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:es(),iat:w,exp:w+300,...this.fapi()?{nbf:w}:void 0}));if("none"===r)u=[G.encode(JSON.stringify(E)),G.encode(A),""].join(".");else{let t=r.startsWith("HS");if(t)h=this.secretForAlg(r);else{let t=await ep.get(this);if(!t)throw TypeError(`no keystore present for client, cannot sign using alg ${r}`);if(!(h=t.get({alg:r,use:"sig"})))throw TypeError(`no key to sign with found for alg ${r}`)}u=await new N.CompactSign(new TextEncoder().encode(A)).setProtectedHeader({...E,kid:t?void 0:h.jwk.kid}).sign(t?h:await h.keyObject(r))}if(!s)return u;let R={alg:s,enc:p,cty:"oauth-authz-req+jwt"};return R.alg.match(/^(RSA|ECDH)/)?[h]=await eg.call(this.issuer,{alg:R.alg,use:"enc"},{allowMulti:!0}):h=this.secretForAlg("dir"===R.alg?R.enc:R.alg),new N.CompactEncrypt(new TextEncoder().encode(u)).setProtectedHeader({...R,kid:h instanceof Uint8Array?void 0:h.jwk.kid}).encrypt(h instanceof Uint8Array?h:await h.keyObject(R.alg))}async pushedAuthorizationRequest(t={},{clientAssertionPayload:r}={}){Z(this.issuer,"pushed_authorization_request_endpoint");let s={..."request"in t?t:authorizationParams.call(this,t),client_id:this.client_id},p=await eh.call(this,"pushed_authorization_request",{responseType:"json",form:s},{clientAssertionPayload:r,endpointAuthMethod:"token"}),u=er(p,{statusCode:201});if(!("expires_in"in u))throw new eo({message:"expected expires_in in Pushed Authorization Successful Response",response:p});if("number"!=typeof u.expires_in)throw new eo({message:"invalid expires_in value in Pushed Authorization Successful Response",response:p});if(!("request_uri"in u))throw new eo({message:"expected request_uri in Pushed Authorization Successful Response",response:p});if("string"!=typeof u.request_uri)throw new eo({message:"invalid request_uri value in Pushed Authorization Successful Response",response:p});return u}get issuer(){return this.#t}[u.custom](){return`${this.constructor.name} ${u(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return this.fapi1()||this.fapi2()}fapi1(){return"FAPI1Client"===this.constructor.name}fapi2(){return"FAPI2Client"===this.constructor.name}async validateJARM(t){let r=this.authorization_signed_response_alg,{payload:s}=await this.validateJWT(t,r,["iss","exp","aud"]);return pickCb(s)}async dpopProof(t,r,s){let u;if(!et(t))throw TypeError("payload must be a plain object");if(J(r))u=r;else if("CryptoKey"===r[Symbol.toStringTag])u=r;else if("node:crypto"===N.cryptoRuntime)u=w.createPrivateKey(r);else throw TypeError("unrecognized crypto runtime");if("private"!==u.type)throw TypeError('"DPoP" option must be a private key');let h=p.call(this,u,r);if(!h)throw TypeError("could not determine DPoP JWS Algorithm");return new N.SignJWT({ath:s?G.encode(w.createHash("sha256").update(s).digest()):void 0,...t}).setProtectedHeader({alg:h,typ:"dpop+jwt",jwk:await getJwk(u,r)}).setIssuedAt().setJti(es()).sign(u)}};function determineDPoPAlgorithmFromCryptoKey(t){switch(t.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(t.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${t.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${t.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===N.cryptoRuntime){p=function(p,w){if("CryptoKey"===w[Symbol.toStringTag])return determineDPoPAlgorithmFromCryptoKey(p);switch(p.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":return function(t,p){switch("object"==typeof p&&"object"==typeof p.key&&p.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let w=t.export({format:"der",type:"pkcs8"}),E=w[1]<128?17:18,A=w[E],R=w.slice(E+1,E+1+A);if(R.equals(r))return"ES256";if(R.equals(s))return"ES384";if(R.equals(u))return"ES512";if(R.equals(h))return"ES256K";throw TypeError("unsupported DPoP private key curve")}(p,w);case"rsa":case ex&&"rsa-pss":return function(r,s,p){if("object"==typeof s&&"jwk"===s.format&&s.key&&s.key.alg)return s.key.alg;if(Array.isArray(p)){let s=p.filter(RegExp.prototype.test.bind(t));return"rsa-pss"===r.asymmetricKeyType&&(s=s.filter(t=>t.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(t=>s.includes(t))}return"PS256"}(p,w,this.issuer.dpop_signing_alg_values_supported);default:throw TypeError("unsupported DPoP private key")}};let t=/^(?:RS|PS)(?:256|384|512)$/,r=Buffer.from([42,134,72,206,61,3,1,7]),s=Buffer.from([43,129,4,0,34]),u=Buffer.from([43,129,4,0,35]),h=Buffer.from([43,129,4,0,10])}else p=determineDPoPAlgorithmFromCryptoKey;let eE=new WeakMap;async function getJwk(t,r){if("node:crypto"===N.cryptoRuntime&&"object"==typeof r&&"object"==typeof r.key&&"jwk"===r.format)return ee(r.key,"kty","crv","x","y","e","n");if(eE.has(r))return eE.get(r);let s=ee(await N.exportJWK(t),"kty","crv","x","y","e","n");return(J(r)||"WebCryptoAPI"===N.cryptoRuntime)&&eE.set(r,s),s}t.exports=(t,r=!1)=>class extends BaseClient{constructor(...s){super(t,r,...s)}static get issuer(){return t}},t.exports.BaseClient=BaseClient},67688:(t,r,s)=>{"use strict";let{inspect:p}=s(73837),{RPError:u,OPError:h}=s(10574),w=s(91624);let DeviceFlowHandle=class DeviceFlowHandle{#n;#o;#a;#s;#c;#l;#p;#d;#u;constructor({client:t,exchangeBody:r,clientAssertionPayload:s,response:p,maxAge:h,DPoP:E}){if(["verification_uri","user_code","device_code"].forEach(t=>{if("string"!=typeof p[t]||!p[t])throw new u(`expected ${t} string to be returned by Device Authorization Response, got %j`,p[t])}),!Number.isSafeInteger(p.expires_in))throw new u("expected expires_in number to be returned by Device Authorization Response, got %j",p.expires_in);this.#l=w()+p.expires_in,this.#o=t,this.#s=E,this.#d=h,this.#c=r,this.#a=s,this.#u=p,this.#p=1e3*p.interval||5e3}abort(){this.#n=!0}async poll({signal:t}={}){let r;if(t&&t.aborted||this.#n)throw new u("polling aborted");if(this.expired())throw new u("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(t=>setTimeout(t,this.#p));try{r=await this.#o.grant({...this.#c,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#a,DPoP:this.#s})}catch(r){switch(r instanceof h&&r.error){case"slow_down":this.#p+=5e3;case"authorization_pending":return this.poll({signal:t});default:throw r}}return"id_token"in r&&(await this.#o.decryptIdToken(r),await this.#o.validateIdToken(r,void 0,"token",this.#d)),r}get device_code(){return this.#u.device_code}get user_code(){return this.#u.user_code}get verification_uri(){return this.#u.verification_uri}get verification_uri_complete(){return this.#u.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#l-w(),0])}expired(){return 0===this.expires_in}[p.custom](){return`${this.constructor.name} ${p(this.#u,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};t.exports=DeviceFlowHandle},10574:(t,r,s)=>{"use strict";let{format:p}=s(73837);t.exports={OPError:class extends Error{constructor({error_description:t,error:r,error_uri:s,session_state:p,state:u,scope:h},w){super(t?`${r} (${t})`:r),Object.assign(this,{error:r},t&&{error_description:t},s&&{error_uri:s},u&&{state:u},h&&{scope:h},p&&{session_state:p}),w&&Object.defineProperty(this,"response",{value:w}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},RPError:class extends Error{constructor(...t){if("string"==typeof t[0])super(p(...t));else{let{message:r,printf:s,response:u,...h}=t[0];s?super(p(...s)):super(r),Object.assign(this,h),u&&Object.defineProperty(this,"response",{value:u})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}}},36245:t=>{"use strict";t.exports={assertSigningAlgValuesSupport:function(t,r,s){if(!r[`${t}_endpoint`])return;let p=`${t}_endpoint_auth_method`,u=`${t}_endpoint_auth_signing_alg`,h=`${t}_endpoint_auth_signing_alg_values_supported`;if(s[p]&&s[p].endsWith("_jwt")&&!s[u]&&!r[h])throw TypeError(`${h} must be configured on the issuer if ${u} is not defined on a client`)},assertIssuerConfiguration:function(t,r){if(!t[r])throw TypeError(`${r} must be configured on the issuer`)}}},26597:t=>{"use strict";let r;if(Buffer.isEncoding("base64url"))r=(t,r="utf8")=>Buffer.from(t,r).toString("base64url");else{let fromBase64=t=>t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");r=(t,r="utf8")=>fromBase64(Buffer.from(t,r).toString("base64"))}t.exports.decode=t=>Buffer.from(t,"base64"),t.exports.encode=r},98522:(t,r,s)=>{"use strict";let p=s(92473),{RPError:u}=s(10574),{assertIssuerConfiguration:h}=s(36245),{random:w}=s(29766),E=s(91624),A=s(3135),{keystores:R}=s(18763),I=s(18038),formUrlEncode=t=>encodeURIComponent(t).replace(/%20/g,"+");async function clientAssertion(t,r){let s=this[`${t}_endpoint_auth_signing_alg`];if(s||h(this.issuer,`${t}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${t}_endpoint_auth_method`]){if(!s){let r=this.issuer[`${t}_endpoint_auth_signing_alg_values_supported`];s=Array.isArray(r)&&r.find(t=>/^HS(?:256|384|512)/.test(t))}if(!s)throw new u(`failed to determine a JWS Algorithm to use for ${this[`${t}_endpoint_auth_method`]} Client Assertion`);return new p.CompactSign(Buffer.from(JSON.stringify(r))).setProtectedHeader({alg:s}).sign(this.secretForAlg(s))}let w=await R.get(this);if(!w)throw TypeError("no client jwks provided for signing a client assertion with");if(!s){let r=this.issuer[`${t}_endpoint_auth_signing_alg_values_supported`];s=Array.isArray(r)&&r.find(t=>w.get({alg:t,use:"sig"}))}if(!s)throw new u(`failed to determine a JWS Algorithm to use for ${this[`${t}_endpoint_auth_method`]} Client Assertion`);let E=w.get({alg:s,use:"sig"});if(!E)throw new u(`no key found in client jwks to sign a client assertion with using alg ${s}`);return new p.CompactSign(Buffer.from(JSON.stringify(r))).setProtectedHeader({alg:s,kid:E.jwk&&E.jwk.kid}).sign(await E.keyObject(s))}async function authFor(t,{clientAssertionPayload:r}={}){let s=this[`${t}_endpoint_auth_method`];switch(s){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let s=E(),p=await clientAssertion.call(this,t,{iat:s,exp:s+60,jti:w(),iss:this.client_id,sub:this.client_id,aud:this.issuer.issuer,...r});return{form:{client_id:this.client_id,client_assertion:p,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let t=`${formUrlEncode(this.client_id)}:${formUrlEncode(this.client_secret)}`,r=Buffer.from(t).toString("base64");return{headers:{Authorization:`Basic ${r}`}}}default:throw TypeError(`missing, or unsupported, ${t}_endpoint_auth_method`)}}async function authenticatedPost(t,r,{clientAssertionPayload:s,endpointAuthMethod:p=t,DPoP:u}={}){let h;let w=await authFor.call(this,p,{clientAssertionPayload:s}),E=I(r,w),R=this[`${p}_endpoint_auth_method`].includes("tls_client_auth")||"token"===t&&this.tls_client_certificate_bound_access_tokens;if(R&&this.issuer.mtls_endpoint_aliases&&(h=this.issuer.mtls_endpoint_aliases[`${t}_endpoint`]),h=h||this.issuer[`${t}_endpoint`],"form"in E)for(let[t,r]of Object.entries(E.form))void 0===r&&delete E.form[t];return A.call(this,{...E,method:"POST",url:h,headers:{..."revocation"!==t?{Accept:"application/json"}:void 0,...E.headers}},{mTLS:R,DPoP:u})}t.exports={resolveResponseType:function(){let{length:t,0:r}=this.response_types;if(1===t)return r},resolveRedirectUri:function(){let{length:t,0:r}=this.redirect_uris||[];if(1===t)return r},authFor,authenticatedPost}},60577:t=>{"use strict";let r=Symbol(),s=Symbol();t.exports={CLOCK_TOLERANCE:s,HTTP_OPTIONS:r}},44759:(t,r,s)=>{"use strict";let p=s(26597);t.exports=t=>{if("string"!=typeof t||!t)throw TypeError("JWT must be a string");let{0:r,1:s,2:u,length:h}=t.split(".");if(5===h)throw TypeError("encrypted JWTs cannot be decoded");if(3!==h)throw Error("JWTs must have three components");try{return{header:JSON.parse(p.decode(r)),payload:JSON.parse(p.decode(s)),signature:u}}catch(t){throw Error("JWT is malformed")}}},68979:t=>{"use strict";t.exports=globalThis.structuredClone||(t=>JSON.parse(JSON.stringify(t)))},81772:(t,r,s)=>{"use strict";let p=s(13641);function defaults(t,r,...s){for(let u of s)if(p(u))for(let[s,h]of Object.entries(u))"__proto__"!==s&&"constructor"!==s&&(void 0===r[s]&&void 0!==h&&(r[s]=h),t&&p(r[s])&&p(h)&&defaults(!0,r[s],h));return r}t.exports=defaults.bind(void 0,!1),t.exports.deep=defaults.bind(void 0,!0)},29766:(t,r,s)=>{"use strict";let{createHash:p,randomBytes:u}=s(6113),h=s(26597),random=(t=32)=>h.encode(u(t));t.exports={random,state:random,nonce:random,codeVerifier:random,codeChallenge:t=>h.encode(p("sha256").update(t).digest())}},68060:(t,r,s)=>{"use strict";let p=s(73837),u=s(6113);t.exports=p.types.isKeyObject||(t=>t&&t instanceof u.KeyObject)},13641:t=>{"use strict";t.exports=t=>!!t&&t.constructor===Object},37875:(t,r,s)=>{"use strict";let p=s(29173),u=s(70557),{RPError:h}=s(10574),{assertIssuerConfiguration:w}=s(36245),E=s(73640),{keystores:A}=s(18763),R=s(7889),I=s(3135),U=new WeakMap,N=new WeakMap,lrus=t=>(N.has(t)||N.set(t,new u({max:100})),N.get(t));async function getKeyStore(t=!1){w(this,"jwks_uri");let r=A.get(this),s=lrus(this);return t||!r?(U.has(this)||(s.reset(),U.set(this,(async()=>{let t=await I.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{U.delete(this)}),r=R(t),p=E.fromJWKS(r,{onlyPublic:!0});return s.set("throttle",!0,6e4),A.set(this,p),p})())),U.get(this)):r}async function queryKeyStore({kid:t,kty:r,alg:s,use:u},{allowMulti:w=!1}={}){let E=lrus(this),A={kid:t,kty:r,alg:s,use:u},R=p(A,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),I=E.get(R)||E.get("throttle"),U=await getKeyStore.call(this,!I),N=U.all(A);if(delete A.use,0===N.length)throw new h({printf:["no valid key found in issuer's jwks_uri for key parameters %j",A],jwks:U});if(!w&&N.length>1&&!t)throw new h({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",A],jwks:U});return E.set(R,!0),N}t.exports.queryKeyStore=queryKeyStore,t.exports.keystore=getKeyStore},73640:(t,r,s)=>{"use strict";let p=s(92473),u=s(68979),h=s(13641),w=Symbol(),keyscore=(t,{alg:r,use:s})=>{let p=0;return r&&t.alg&&p++,s&&t.use&&p++,p};t.exports=class{#h;constructor(t,r){if(t!==w)throw Error("invalid constructor call");this.#h=r}toJWKS(){return{keys:this.map(({jwk:{d:t,p:r,q:s,dp:p,dq:u,qi:h,...w}})=>w)}}all({alg:t,kid:r,use:s}={}){if(!s||!t)throw Error();let p=function(t){switch("string"==typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}(t),u={alg:t,use:s};return this.filter(u=>{let h=!0;return void 0!==p&&u.jwk.kty!==p&&(h=!1),h&&void 0!==r&&u.jwk.kid!==r&&(h=!1),h&&void 0!==s&&void 0!==u.jwk.use&&u.jwk.use!==s&&(h=!1),h&&u.jwk.alg&&u.jwk.alg!==t?h=!1:u.algorithms.has(t)||(h=!1),h}).sort((t,r)=>keyscore(r,u)-keyscore(t,u))}get(...t){return this.all(...t)[0]}static async fromJWKS(t,{onlyPublic:r=!1,onlyPrivate:s=!1}={}){if(!h(t)||!Array.isArray(t.keys)||t.keys.some(t=>!h(t)||!("kty"in t)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let E=[];for(let h of t.keys){h=u(h);let{kty:t,kid:w,crv:A}=h,{alg:R,use:I}=h;if("string"==typeof t&&t&&(void 0===I||"sig"===I||"enc"===I)&&("string"==typeof R||void 0===R)&&("string"==typeof w||void 0===w)){if("EC"===t&&"sig"===I)switch(A){case"P-256":R="ES256";break;case"P-384":R="ES384";break;case"P-521":R="ES512"}if("secp256k1"===A&&(I="sig",R="ES256K"),"OKP"===t)switch(A){case"Ed25519":case"Ed448":I="sig",R="EdDSA";break;case"X25519":case"X448":I="enc"}if(R&&!I)switch(!0){case R.startsWith("ECDH"):case R.startsWith("RSA"):I="enc"}if(s&&("oct"===h.kty||!h.d))throw Error("jwks must only contain private keys");r&&(h.d||h.k)||E.push({jwk:{...h,alg:R,use:I},async keyObject(t){if(this[t])return this[t];let r=await p.importJWK(this.jwk,t);return this[t]=r,r},get algorithms(){return Object.defineProperty(this,"algorithms",{value:function(t,r,s,u){if(r)return new Set([r]);switch(s){case"EC":{let r=[];if(("enc"===t||void 0===t)&&(r=r.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===t||void 0===t)switch(u){case"P-256":case"P-384":r=r.concat([`ES${u.slice(-3)}`]);break;case"P-521":r=r.concat(["ES512"]);break;case"secp256k1":"node:crypto"===p.cryptoRuntime&&(r=r.concat(["ES256K"]))}return new Set(r)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let r=[];return("enc"===t||void 0===t)&&(r=r.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===p.cryptoRuntime&&(r=r.concat(["RSA1_5"]))),("sig"===t||void 0===t)&&(r=r.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(r)}default:throw Error("unreachable")}}(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(w,E)}filter(...t){return this.#h.filter(...t)}find(...t){return this.#h.find(...t)}every(...t){return this.#h.every(...t)}some(...t){return this.#h.some(...t)}map(...t){return this.#h.map(...t)}forEach(...t){return this.#h.forEach(...t)}reduce(...t){return this.#h.reduce(...t)}sort(...t){return this.#h.sort(...t)}*[Symbol.iterator](){for(let t of this.#h)yield t}}},18038:(t,r,s)=>{"use strict";let p=s(13641);t.exports=function merge(t,...r){for(let s of r)if(p(s))for(let[r,u]of Object.entries(s))"__proto__"!==r&&"constructor"!==r&&(p(t[r])&&p(u)?t[r]=merge(t[r],u):void 0!==u&&(t[r]=u));return t}},52542:t=>{"use strict";t.exports=function(t,...r){let s={};for(let p of r)void 0!==t[p]&&(s[p]=t[p]);return s}},7889:(t,r,s)=>{"use strict";let{STATUS_CODES:p}=s(13685),{format:u}=s(73837),{OPError:h}=s(10574),w=s(92102),throwAuthenticateErrors=t=>{let r=w(t.headers["www-authenticate"]);if(r.error)throw new h(r,t)},isStandardBodyError=t=>{let r=!1;try{let s;s="object"!=typeof t.body||Buffer.isBuffer(t.body)?JSON.parse(t.body):t.body,(r="string"==typeof s.error&&s.error.length)&&Object.defineProperty(t,"body",{value:s,configurable:!0})}catch(t){}return r};t.exports=function(t,{statusCode:r=200,body:s=!0,bearer:w=!1}={}){if(t.statusCode!==r){if(w&&throwAuthenticateErrors(t),isStandardBodyError(t))throw new h(t.body,t);throw new h({error:u("expected %i %s, got: %i %s",r,p[r],t.statusCode,p[t.statusCode])},t)}if(s&&!t.body)throw new h({error:u("expected %i %s with body but no body was returned",r,p[r])},t);return t.body}},3135:(t,r,s)=>{"use strict";let p;let u=s(39491),h=s(63477),w=s(13685),E=s(95687),{once:A}=s(82361),{URL:R}=s(57310),I=s(70557),U=s(87658),{RPError:N}=s(10574),W=s(52542),{deep:J}=s(81772),{HTTP_OPTIONS:K}=s(60577),G=/^[\x21\x23-\x5B\x5D-\x7E]+$/,X=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],setDefaults=(t,r)=>{p=J({},t.length?W(r,...t):r,p)};function send(t,r,s){s&&(t.removeHeader("content-type"),t.setHeader("content-type",s)),r&&(t.removeHeader("content-length"),t.setHeader("content-length",Buffer.byteLength(r)),t.write(r)),t.end()}setDefaults([],{headers:{"User-Agent":`${U.name}/${U.version} (${U.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let Y=new I({max:100});t.exports=async function(t,{accessToken:r,mTLS:s=!1,DPoP:I}={}){let U,Q,Z,ee,et,er,ei;try{U=new R(t.url),delete t.url,u(/^(https?:)$/.test(U.protocol))}catch(t){throw TypeError("only valid absolute URLs can be requested")}let en=this[K],eo=t,ea=`${U.origin}${U.pathname}`;if(I&&"dpopProof"in this&&(eo.headers=eo.headers||{},eo.headers.DPoP=await this.dpopProof({htu:`${U.origin}${U.pathname}`,htm:t.method||"GET",nonce:Y.get(ea)},I,r)),en&&(Q=W(en.call(this,U,J({},eo,p)),...X)),eo=J({},Q,eo,p),s&&!eo.pfx&&!(eo.key&&eo.cert))throw TypeError("mutual-TLS certificate and key not set");if(eo.searchParams)for(let[t,r]of Object.entries(eo.searchParams))U.searchParams.delete(t),U.searchParams.set(t,r);for(let[t,r]of({form:ee,responseType:Z,json:et,body:er,...eo}=eo,Object.entries(eo.headers||{})))void 0===r&&delete eo.headers[t];let es=("https:"===U.protocol?E.request:w.request)(U.href,eo);return(async()=>{if(et?send(es,JSON.stringify(et),"application/json"):ee?send(es,h.stringify(ee),"application/x-www-form-urlencoded"):er?send(es,er):send(es),[ei]=await Promise.race([A(es,"response"),A(es,"timeout")]),!ei)throw es.destroy(),new N(`outgoing request timed out after ${eo.timeout}ms`);let t=[];for await(let r of ei)t.push(r);if(t.length)switch(Z){case"json":Object.defineProperty(ei,"body",{get(){let r=Buffer.concat(t);try{r=JSON.parse(r)}catch(t){throw Object.defineProperty(t,"response",{value:ei}),t}finally{Object.defineProperty(ei,"body",{value:r,configurable:!0})}return r},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(ei,"body",{get(){let r=Buffer.concat(t);return Object.defineProperty(ei,"body",{value:r,configurable:!0}),r},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return ei})().catch(t=>{throw ei&&Object.defineProperty(t,"response",{value:ei}),t}).finally(()=>{let t=ei&&ei.headers["dpop-nonce"];t&&G.test(t)&&Y.set(ea,t)})},t.exports.setDefaults=setDefaults.bind(void 0,X)},91624:t=>{"use strict";t.exports=()=>Math.floor(Date.now()/1e3)},18763:t=>{"use strict";t.exports.keystores=new WeakMap},31122:t=>{"use strict";let r=/^\d+$/;t.exports=function(t){if("string"!=typeof t)throw TypeError("input must be a string");return(!function(t){if(t.includes("://"))return!0;let s=t.replace(/(\/|\?)/g,"#").split("#")[0];if(s.includes(":")){let t=s.indexOf(":"),p=s.slice(t+1);if(!r.test(p))return!0}return!1}(t)?!function(t){if(!t.includes("@"))return!1;let r=t.split("@"),s=r[r.length-1];return!(s.includes(":")||s.includes("/")||s.includes("?"))}(t)?`https://${t}`:`acct:${t}`:t).split("#")[0]}},92102:t=>{"use strict";let r=/(\w+)=("[^"]*")/g;t.exports=t=>{let s={};try{for(;null!==r.exec(t);)RegExp.$1&&RegExp.$2&&(s[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(t){}return s}},78165:(t,r,s)=>{"use strict";let p=s(3144),{OPError:u,RPError:h}=s(10574),w=s(21307),E=s(8164),{CLOCK_TOLERANCE:A,HTTP_OPTIONS:R}=s(60577),I=s(29766),{setDefaults:U}=s(3135);t.exports={Issuer:p,Strategy:w,TokenSet:E,errors:{OPError:u,RPError:h},custom:{setHttpOptionsDefaults:U,http_options:R,clock_tolerance:A},generators:I}},3144:(t,r,s)=>{"use strict";let{inspect:p}=s(73837),u=s(57310),{RPError:h}=s(10574),w=s(76398),E=s(31567),A=s(7889),R=s(31122),I=s(3135),U=s(68979),{keystore:N}=s(37875),W=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],J=Symbol(),K={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};let Issuer=class Issuer{#e;constructor(t={}){let r=t[J];delete t[J],["introspection","revocation"].forEach(r=>{t[`${r}_endpoint`]&&void 0===t[`${r}_endpoint_auth_methods_supported`]&&void 0===t[`${r}_endpoint_auth_signing_alg_values_supported`]&&(t.token_endpoint_auth_methods_supported&&(t[`${r}_endpoint_auth_methods_supported`]=t.token_endpoint_auth_methods_supported),t.token_endpoint_auth_signing_alg_values_supported&&(t[`${r}_endpoint_auth_signing_alg_values_supported`]=t.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(t).forEach(([t,r])=>{this.#e.set(t,r),this[t]||Object.defineProperty(this,t,{get(){return this.#e.get(t)},enumerable:!0})}),E.set(this.issuer,this);let s=w(this,r);Object.defineProperties(this,{Client:{value:s,enumerable:!0},FAPI1Client:{value:class extends s{},enumerable:!0},FAPI2Client:{value:class extends s{},enumerable:!0}})}get metadata(){return U(Object.fromEntries(this.#e.entries()))}static async webfinger(t){let r=R(t),{host:s}=u.parse(r),p=`https://${s}/.well-known/webfinger`,w=await I.call(this,{method:"GET",url:p,responseType:"json",searchParams:{resource:r,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}}),U=A(w),N=Array.isArray(U.links)&&U.links.find(t=>"object"==typeof t&&"http://openid.net/specs/connect/1.0/issuer"===t.rel&&t.href);if(!N)throw new h({message:"no issuer found in webfinger response",body:U});if("string"!=typeof N.href||!N.href.startsWith("https://"))throw new h({printf:["invalid issuer location %s",N.href],body:U});let W=N.href;if(E.has(W))return E.get(W);let J=await this.discover(W);if(J.issuer!==W)throw E.del(J.issuer),new h("discovered issuer mismatch, expected %s, got: %s",W,J.issuer);return J}static async discover(t){let r=function(t){let r=u.parse(t);if(r.pathname.includes("/.well-known/"))return t;{let t;return t=r.pathname.endsWith("/")?`${r.pathname}.well-known/openid-configuration`:`${r.pathname}/.well-known/openid-configuration`,u.format({...r,pathname:t})}}(t),s=await I.call(this,{method:"GET",responseType:"json",url:r,headers:{Accept:"application/json"}}),p=A(s);return new Issuer({...K,...p,[J]:!!W.find(t=>r.startsWith(t))})}async reloadJwksUri(){await N.call(this,!0)}[p.custom](){return`${this.constructor.name} ${p(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}};t.exports=Issuer},31567:(t,r,s)=>{"use strict";let p=s(70557);t.exports=new p({max:100})},21307:(t,r,s)=>{"use strict";let p=s(57310),{format:u}=s(73837),h=s(68979),{RPError:w,OPError:E}=s(10574),{BaseClient:A}=s(76398),{random:R,codeChallenge:I}=s(29766),U=s(52542),{resolveResponseType:N,resolveRedirectUri:W}=s(98522);function verified(t,r,s={}){t?this.error(t):r?this.success(r,s):this.fail(s)}function OpenIDConnectStrategy({client:t,params:r={},passReqToCallback:s=!1,sessionKey:u,usePKCE:w=!0,extras:E={}}={},R){if(!(t instanceof A))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof R)throw TypeError("verify callback must be a function");if(!t.issuer||!t.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=t,this._issuer=t.issuer,this._verify=R,this._passReqToCallback=s,this._usePKCE=w,this._key=u||`oidc:${p.parse(this._issuer.issuer).hostname}`,this._params=h(r),delete this._params.state,delete this._params.nonce,this._extras=h(E),this._params.response_type||(this._params.response_type=N.call(t)),this._params.redirect_uri||(this._params.redirect_uri=W.call(t)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let t=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(t&&t.includes("S256"))this._usePKCE="S256";else if(t&&t.includes("plain"))this._usePKCE="plain";else if(t)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=p.parse(t.issuer.issuer).hostname}OpenIDConnectStrategy.prototype.authenticate=function(t,r){(async()=>{let s=this._client;if(!t.session)throw TypeError("authentication requires session support");let p=s.callbackParams(t),h=this._key,{0:E,length:A}=Object.keys(p);if(0===A||1===A&&"iss"===E){let p={state:R(),...this._params,...r};if(!p.nonce&&p.response_type.includes("id_token")&&(p.nonce=R()),t.session[h]=U(p,"nonce","state","max_age","response_type"),this._usePKCE&&p.response_type.includes("code")){let r=R();switch(t.session[h].code_verifier=r,this._usePKCE){case"S256":p.code_challenge=I(r),p.code_challenge_method="S256";break;case"plain":p.code_challenge=r}}this.redirect(s.authorizationUrl(p));return}let N=t.session[h];if(0===Object.keys(N||{}).length)throw Error(u('did not find expected authorization request details in session, req.session["%s"] is %j',h,N));let{state:W,nonce:J,max_age:K,code_verifier:G,response_type:X}=N;try{delete t.session[h]}catch(t){}let Y={redirect_uri:this._params.redirect_uri,...r},Q=await s.callback(Y.redirect_uri,p,{state:W,nonce:J,max_age:K,code_verifier:G,response_type:X},this._extras),Z=this._passReqToCallback,ee=this._verify.length>(Z?3:2)&&s.issuer.userinfo_endpoint,et=[Q,verified.bind(this)];if(ee){if(!Q.access_token)throw new w({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:Q});let t=await s.userinfo(Q);et.splice(1,0,t)}Z&&et.unshift(t),this._verify(...et)})().catch(t=>{t instanceof E&&"server_error"!==t.error&&!t.error.startsWith("invalid")||t instanceof w?this.fail(t):this.error(t)})},t.exports=OpenIDConnectStrategy},8164:(t,r,s)=>{"use strict";let p=s(26597),u=s(91624);t.exports=class{constructor(t){Object.assign(this,t);let{constructor:r,...s}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,s)}set expires_in(t){this.expires_at=u()+Number(t)}get expires_in(){return Math.max.apply(null,[this.expires_at-u(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(p.decode(this.id_token.split(".")[1]))}}},70557:(t,r,s)=>{"use strict";let p=s(29804),u=Symbol("max"),h=Symbol("length"),w=Symbol("lengthCalculator"),E=Symbol("allowStale"),A=Symbol("maxAge"),R=Symbol("dispose"),I=Symbol("noDisposeOnSet"),U=Symbol("lruList"),N=Symbol("cache"),W=Symbol("updateAgeOnGet"),naiveLength=()=>1,get=(t,r,s)=>{let p=t[N].get(r);if(p){let r=p.value;if(isStale(t,r)){if(del(t,p),!t[E])return}else s&&(t[W]&&(p.value.now=Date.now()),t[U].unshiftNode(p));return r.value}},isStale=(t,r)=>{if(!r||!r.maxAge&&!t[A])return!1;let s=Date.now()-r.now;return r.maxAge?s>r.maxAge:t[A]&&s>t[A]},trim=t=>{if(t[h]>t[u])for(let r=t[U].tail;t[h]>t[u]&&null!==r;){let s=r.prev;del(t,r),r=s}},del=(t,r)=>{if(r){let s=r.value;t[R]&&t[R](s.key,s.value),t[h]-=s.length,t[N].delete(s.key),t[U].removeNode(r)}};let Entry=class Entry{constructor(t,r,s,p,u){this.key=t,this.value=r,this.length=s,this.now=p,this.maxAge=u||0}};let forEachStep=(t,r,s,p)=>{let u=s.value;isStale(t,u)&&(del(t,s),t[E]||(u=void 0)),u&&r.call(p,u.value,u.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw TypeError("max must be a non-negative number");this[u]=t.max||1/0;let r=t.length||naiveLength;if(this[w]="function"!=typeof r?naiveLength:r,this[E]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw TypeError("maxAge must be a number");this[A]=t.maxAge||0,this[R]=t.dispose,this[I]=t.noDisposeOnSet||!1,this[W]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw TypeError("max must be a non-negative number");this[u]=t||1/0,trim(this)}get max(){return this[u]}set allowStale(t){this[E]=!!t}get allowStale(){return this[E]}set maxAge(t){if("number"!=typeof t)throw TypeError("maxAge must be a non-negative number");this[A]=t,trim(this)}get maxAge(){return this[A]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[w]&&(this[w]=t,this[h]=0,this[U].forEach(t=>{t.length=this[w](t.value,t.key),this[h]+=t.length})),trim(this)}get lengthCalculator(){return this[w]}get length(){return this[h]}get itemCount(){return this[U].length}rforEach(t,r){r=r||this;for(let s=this[U].tail;null!==s;){let p=s.prev;forEachStep(this,t,s,r),s=p}}forEach(t,r){r=r||this;for(let s=this[U].head;null!==s;){let p=s.next;forEachStep(this,t,s,r),s=p}}keys(){return this[U].toArray().map(t=>t.key)}values(){return this[U].toArray().map(t=>t.value)}reset(){this[R]&&this[U]&&this[U].length&&this[U].forEach(t=>this[R](t.key,t.value)),this[N]=new Map,this[U]=new p,this[h]=0}dump(){return this[U].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[U]}set(t,r,s){if((s=s||this[A])&&"number"!=typeof s)throw TypeError("maxAge must be a number");let p=s?Date.now():0,E=this[w](r,t);if(this[N].has(t)){if(E>this[u])return del(this,this[N].get(t)),!1;let w=this[N].get(t),A=w.value;return this[R]&&!this[I]&&this[R](t,A.value),A.now=p,A.maxAge=s,A.value=r,this[h]+=E-A.length,A.length=E,this.get(t),trim(this),!0}let W=new Entry(t,r,E,p,s);return W.length>this[u]?(this[R]&&this[R](t,r),!1):(this[h]+=W.length,this[U].unshift(W),this[N].set(t,this[U].head),trim(this),!0)}has(t){if(!this[N].has(t))return!1;let r=this[N].get(t).value;return!isStale(this,r)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){let t=this[U].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[N].get(t))}load(t){this.reset();let r=Date.now();for(let s=t.length-1;s>=0;s--){let p=t[s],u=p.e||0;if(0===u)this.set(p.k,p.v);else{let t=u-r;t>0&&this.set(p.k,p.v,t)}}}prune(){this[N].forEach((t,r)=>get(this,r,!1))}}},30405:t=>{"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},29804:(t,r,s)=>{"use strict";function Yallist(t){var r=this;if(r instanceof Yallist||(r=new Yallist),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){r.push(t)});else if(arguments.length>0)for(var s=0,p=arguments.length;s<p;s++)r.push(arguments[s]);return r}function Node(t,r,s,p){if(!(this instanceof Node))return new Node(t,r,s,p);this.list=p,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}t.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw Error("removing node which does not belong to this list");var r=t.next,s=t.prev;return r&&(r.prev=s),s&&(s.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,r},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t,r=0,s=arguments.length;r<s;r++)t=arguments[r],this.tail=new Node(t,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},Yallist.prototype.unshift=function(){for(var t,r=0,s=arguments.length;r<s;r++)t=arguments[r],this.head=new Node(t,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,r){r=r||this;for(var s=this.head,p=0;null!==s;p++)t.call(r,s.value,p,this),s=s.next},Yallist.prototype.forEachReverse=function(t,r){r=r||this;for(var s=this.tail,p=this.length-1;null!==s;p--)t.call(r,s.value,p,this),s=s.prev},Yallist.prototype.get=function(t){for(var r=0,s=this.head;null!==s&&r<t;r++)s=s.next;if(r===t&&null!==s)return s.value},Yallist.prototype.getReverse=function(t){for(var r=0,s=this.tail;null!==s&&r<t;r++)s=s.prev;if(r===t&&null!==s)return s.value},Yallist.prototype.map=function(t,r){r=r||this;for(var s=new Yallist,p=this.head;null!==p;)s.push(t.call(r,p.value,this)),p=p.next;return s},Yallist.prototype.mapReverse=function(t,r){r=r||this;for(var s=new Yallist,p=this.tail;null!==p;)s.push(t.call(r,p.value,this)),p=p.prev;return s},Yallist.prototype.reduce=function(t,r){var s,p=this.head;if(arguments.length>1)s=r;else if(this.head)p=this.head.next,s=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var u=0;null!==p;u++)s=t(s,p.value,u),p=p.next;return s},Yallist.prototype.reduceReverse=function(t,r){var s,p=this.tail;if(arguments.length>1)s=r;else if(this.tail)p=this.tail.prev,s=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;null!==p;u--)s=t(s,p.value,u),p=p.prev;return s},Yallist.prototype.toArray=function(){for(var t=Array(this.length),r=0,s=this.head;null!==s;r++)t[r]=s.value,s=s.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=Array(this.length),r=0,s=this.tail;null!==s;r++)t[r]=s.value,s=s.prev;return t},Yallist.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Yallist;if(r<t||r<0)return s;t<0&&(t=0),r>this.length&&(r=this.length);for(var p=0,u=this.head;null!==u&&p<t;p++)u=u.next;for(;null!==u&&p<r;p++,u=u.next)s.push(u.value);return s},Yallist.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Yallist;if(r<t||r<0)return s;t<0&&(t=0),r>this.length&&(r=this.length);for(var p=this.length,u=this.tail;null!==u&&p>r;p--)u=u.prev;for(;null!==u&&p>t;p--,u=u.prev)s.push(u.value);return s},Yallist.prototype.splice=function(t,r,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var p=0,u=this.head;null!==u&&p<t;p++)u=u.next;for(var h=[],p=0;u&&p<r;p++)h.push(u.value),u=this.removeNode(u);null===u&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var p=0;p<s.length;p++)u=function(t,r,s){var p=r===t.head?new Node(s,null,r,t):new Node(s,r,r.next,t);return null===p.next&&(t.tail=p),null===p.prev&&(t.head=p),t.length++,p}(this,u,s[p]);return h},Yallist.prototype.reverse=function(){for(var t=this.head,r=this.tail,s=t;null!==s;s=s.prev){var p=s.prev;s.prev=s.next,s.next=p}return this.head=r,this.tail=t,this};try{s(30405)(Yallist)}catch(t){}},75404:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=s(36926),h=s(32693),w=s(32693),E=function(t){function AccountClient(r,s){return t.call(this,r,h.ClientOptions.AuthHeaderNames.ACCOUNT_TOKEN,s)||this}return p(AccountClient,t),AccountClient.prototype.getServers=function(t,r){return void 0===t&&(t=new w.ServerFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/servers",t,r)},AccountClient.prototype.getServer=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/servers/".concat(t),{},r)},AccountClient.prototype.createServer=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/servers",t,r)},AccountClient.prototype.editServer=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/servers/".concat(t),r,s)},AccountClient.prototype.deleteServer=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/servers/".concat(t),{},r)},AccountClient.prototype.getDomains=function(t,r){return void 0===t&&(t=new h.FilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/domains",t,r)},AccountClient.prototype.getDomain=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/domains/".concat(t),{},r)},AccountClient.prototype.createDomain=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/domains/",t,r)},AccountClient.prototype.editDomain=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/domains/".concat(t),r,s)},AccountClient.prototype.deleteDomain=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/domains/".concat(t),{},r)},AccountClient.prototype.verifyDomainDKIM=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.PUT,"/domains/".concat(t,"/verifyDKIM"),{},r)},AccountClient.prototype.verifyDomainReturnPath=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.PUT,"/domains/".concat(t,"/verifyReturnPath"),{},r)},AccountClient.prototype.verifyDomainSPF=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.POST,"/domains/".concat(t,"/verifySPF"),{},r)},AccountClient.prototype.rotateDomainDKIM=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.POST,"/domains/".concat(t,"/rotateDKIM"),{},r)},AccountClient.prototype.getSenderSignature=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/senders/".concat(t),{},r)},AccountClient.prototype.getSenderSignatures=function(t,r){return void 0===t&&(t=new h.FilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/senders",t,r)},AccountClient.prototype.createSenderSignature=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/senders/",t,r)},AccountClient.prototype.editSenderSignature=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/senders/".concat(t),r,s)},AccountClient.prototype.deleteSenderSignature=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/senders/".concat(t),{},r)},AccountClient.prototype.resendSenderSignatureConfirmation=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.POST,"/senders/".concat(t,"/resend"),{},r)},AccountClient.prototype.verifySenderSignatureSPF=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.POST,"/senders/".concat(t,"/verifySpf"),{},r)},AccountClient.prototype.requestNewDKIMForSenderSignature=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.POST,"/senders/".concat(t,"/requestNewDkim"),{},r)},AccountClient.prototype.pushTemplates=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/templates/push",t,r)},AccountClient.prototype.requestDataRemoval=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/data-removals",t,r)},AccountClient.prototype.getDataRemovalStatus=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/data-removals/".concat(t),{},r)},AccountClient}(u.default);r.default=E},36926:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=s(60312),u=s(55603),h=s(54055).version,w=function(){function BaseClient(t,r,s){this.errorHandler=new p.ErrorHandler,this.verifyToken(t),this.token=t.trim(),this.authHeader=r,this.clientVersion=h,this.httpClient=new u.AxiosHttpClient(s)}return BaseClient.prototype.setClientOptions=function(t){this.httpClient.initHttpClient(t)},BaseClient.prototype.getClientOptions=function(){return this.httpClient.clientOptions},BaseClient.prototype.processRequestWithBody=function(t,r,s,p){return this.processRequest(t,r,{},s,p)},BaseClient.prototype.processRequestWithoutBody=function(t,r,s,p){return void 0===s&&(s={}),this.processRequest(t,r,s,null,p)},BaseClient.prototype.processRequest=function(t,r,s,p,u){var h=this.processHttpRequest(t,r,s,p);return this.processCallbackRequest(h,u),h},BaseClient.prototype.processHttpRequest=function(t,r,s,p){return this.httpClient.httpRequest(t,r,s,p,this.getComposedHttpRequestHeaders()).then(function(t){return t}).catch(function(t){return Promise.reject(t)})},BaseClient.prototype.processCallbackRequest=function(t,r){r&&t.then(function(t){return r(null,t)}).catch(function(t){return r(t,null)})},BaseClient.prototype.getComposedHttpRequestHeaders=function(){var t;return(t={})[this.authHeader]=this.token,t.Accept="application/json",t["Content-Type"]="application/json",t["User-Agent"]="Postmark.JS - ".concat(this.clientVersion),t},BaseClient.prototype.verifyToken=function(t){if(!t||""===t.trim())throw this.errorHandler.buildError("A valid API token must be provided.")},BaseClient.prototype.setDefaultPaginationValues=function(t){t.count=t.count||100,t.offset=t.offset||0},BaseClient}();r.default=w},55603:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}(),__assign=function(){return(__assign=Object.assign||function(t){for(var r,s=1,p=arguments.length;s<p;s++)for(var u in r=arguments[s])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.AxiosHttpClient=void 0;var u=s(34612),h=s(32693),w=s(39630),E=function(t){function AxiosHttpClient(r){var s=t.call(this,r)||this;return s.errorHandler=new w.ErrorHandler,s}return p(AxiosHttpClient,t),AxiosHttpClient.prototype.initHttpClient=function(t){this.clientOptions=__assign(__assign({},h.HttpClient.DefaultOptions),t);var r=u.default.create({baseURL:this.getBaseHttpRequestURL(),timeout:this.getRequestTimeoutInMilliseconds(),responseType:"json",maxContentLength:1/0,maxBodyLength:1/0,validateStatus:function(t){return t>=200&&t<300}});r.interceptors.response.use(function(t){return t.data}),this.client=r},AxiosHttpClient.prototype.httpRequest=function(t,r,s,p,u){var h=this;return this.client.request({method:t,url:r,data:p,headers:u,params:s}).catch(function(t){return Promise.reject(h.transformError(t))})},AxiosHttpClient.prototype.transformError=function(t){var r=t.response;if(void 0!==r){var s=this.adjustValue(0,r.status),p=this.adjustValue(0,r.data.ErrorCode),u=this.adjustValue(t.message,r.data.Message);return this.errorHandler.buildError(u,p,s)}return void 0!==t.message?this.errorHandler.buildError(t.message):this.errorHandler.buildError(JSON.stringify(t,Object.getOwnPropertyNames(t)))},AxiosHttpClient.prototype.getRequestTimeoutInMilliseconds=function(){return 1e3*(this.clientOptions.timeout||60)},AxiosHttpClient.prototype.adjustValue=function(t,r){return void 0===r?t:r},AxiosHttpClient}(h.HttpClient);r.AxiosHttpClient=E},8486:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0});var u=s(36926),h=s(32693),w=s(32693),E=function(t){function ServerClient(r,s){return t.call(this,r,h.ClientOptions.AuthHeaderNames.SERVER_TOKEN,s)||this}return p(ServerClient,t),ServerClient.prototype.sendEmail=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/email",t,r)},ServerClient.prototype.sendEmailBatch=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/email/batch",t,r)},ServerClient.prototype.sendEmailWithTemplate=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/email/withTemplate",t,r)},ServerClient.prototype.sendEmailBatchWithTemplates=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/email/batchWithTemplates",{Messages:t},r)},ServerClient.prototype.getDeliveryStatistics=function(t){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/deliveryStats",{},t)},ServerClient.prototype.getBounces=function(t,r){return void 0===t&&(t=new w.BounceFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/bounces",t,r)},ServerClient.prototype.getBounce=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/bounces/".concat(t),{},r)},ServerClient.prototype.getBounceDump=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/bounces/".concat(t,"/dump"),{},r)},ServerClient.prototype.activateBounce=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/bounces/".concat(t,"/activate"),{},r)},ServerClient.prototype.getTemplates=function(t,r){return void 0===t&&(t=new w.TemplateFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/templates",t,r)},ServerClient.prototype.getTemplate=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/templates/".concat(t),{},r)},ServerClient.prototype.deleteTemplate=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/templates/".concat(t),{},r)},ServerClient.prototype.createTemplate=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/templates/",t,r)},ServerClient.prototype.editTemplate=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/templates/".concat(t),r,s)},ServerClient.prototype.validateTemplate=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/templates/validate",t,r)},ServerClient.prototype.getServer=function(t){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/server",{},t)},ServerClient.prototype.editServer=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/server",t,r)},ServerClient.prototype.getOutboundMessages=function(t,r){return void 0===t&&(t=new w.OutboundMessagesFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound",t,r)},ServerClient.prototype.getOutboundMessageDetails=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/".concat(t),{},r)},ServerClient.prototype.getOutboundMessageDump=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/".concat(t,"/dump"),{},r)},ServerClient.prototype.getInboundMessages=function(t,r){return void 0===t&&(t=new w.InboundMessagesFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/inbound",t,r)},ServerClient.prototype.getInboundMessageDetails=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/inbound/".concat(t,"/details"),{},r)},ServerClient.prototype.bypassBlockedInboundMessage=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.PUT,"/messages/inbound/".concat(t,"/bypass"),{},r)},ServerClient.prototype.retryInboundHookForMessage=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.PUT,"/messages/inbound/".concat(t,"/retry"),{},r)},ServerClient.prototype.getMessageOpens=function(t,r){return void 0===t&&(t=new w.OutboundMessageOpensFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/opens",t,r)},ServerClient.prototype.getMessageOpensForSingleMessage=function(t,r,s){return void 0===r&&(r=new w.OutboundMessageOpensFilteringParameters(50,0)),this.setDefaultPaginationValues(r),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/opens/".concat(t),r,s)},ServerClient.prototype.getMessageClicks=function(t,r){return void 0===t&&(t=new w.OutboundMessageClicksFilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/clicks",t,r)},ServerClient.prototype.getMessageClicksForSingleMessage=function(t,r,s){return void 0===r&&(r=new w.OutboundMessageClicksFilteringParameters),this.setDefaultPaginationValues(r),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/messages/outbound/clicks/".concat(t),r,s)},ServerClient.prototype.getOutboundOverview=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound",t,r)},ServerClient.prototype.getSentCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/sends",t,r)},ServerClient.prototype.getBounceCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/bounces",t,r)},ServerClient.prototype.getSpamComplaintsCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/spam",t,r)},ServerClient.prototype.getTrackedEmailCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/tracked",t,r)},ServerClient.prototype.getEmailOpenCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/opens",t,r)},ServerClient.prototype.getEmailOpenPlatformUsage=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/platforms",t,r)},ServerClient.prototype.getEmailOpenClientUsage=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/emailClients",t,r)},ServerClient.prototype.getEmailOpenReadTimes=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/readTimes",t,r)},ServerClient.prototype.getClickCounts=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks",t,r)},ServerClient.prototype.getClickBrowserUsage=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/browserFamilies",t,r)},ServerClient.prototype.getClickPlatformUsage=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/platforms",t,r)},ServerClient.prototype.getClickLocation=function(t,r){return void 0===t&&(t=new w.StatisticsFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/location",t,r)},ServerClient.prototype.createInboundRuleTrigger=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/triggers/inboundRules",t,r)},ServerClient.prototype.deleteInboundRuleTrigger=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/triggers/inboundRules/".concat(t),{},r)},ServerClient.prototype.getInboundRuleTriggers=function(t,r){return void 0===t&&(t=new h.FilteringParameters),this.setDefaultPaginationValues(t),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/triggers/inboundRules",t,r)},ServerClient.prototype.getWebhooks=function(t,r){return void 0===t&&(t={}),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/webhooks",t,r)},ServerClient.prototype.getWebhook=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/webhooks/".concat(t),{},r)},ServerClient.prototype.createWebhook=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/webhooks",t,r)},ServerClient.prototype.editWebhook=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PUT,"/webhooks/".concat(t),r,s)},ServerClient.prototype.deleteWebhook=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.DELETE,"/webhooks/".concat(t),{},r)},ServerClient.prototype.getMessageStreams=function(t,r){return void 0===t&&(t={}),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/message-streams",t,r)},ServerClient.prototype.getMessageStream=function(t,r){return this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/message-streams/".concat(t),{},r)},ServerClient.prototype.editMessageStream=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.PATCH,"/message-streams/".concat(t),r,s)},ServerClient.prototype.createMessageStream=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/message-streams",t,r)},ServerClient.prototype.archiveMessageStream=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/message-streams/".concat(t,"/archive"),{},r)},ServerClient.prototype.unarchiveMessageStream=function(t,r){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/message-streams/".concat(t,"/unarchive"),{},r)},ServerClient.prototype.getSuppressions=function(t,r,s){return void 0===r&&(r=new w.SuppressionFilteringParameters),this.processRequestWithoutBody(h.ClientOptions.HttpMethod.GET,"/message-streams/".concat(t,"/suppressions/dump"),r,s)},ServerClient.prototype.createSuppressions=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/message-streams/".concat(t,"/suppressions"),r,s)},ServerClient.prototype.deleteSuppressions=function(t,r,s){return this.processRequestWithBody(h.ClientOptions.HttpMethod.POST,"/message-streams/".concat(t,"/suppressions/delete"),r,s)},ServerClient}(u.default);r.default=E},60312:(t,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorHandler=void 0;var p=s(33934),u=function(){function ErrorHandler(){}return ErrorHandler.prototype.buildError=function(t,r,s){return(void 0===r&&(r=0),void 0===s&&(s=0),0===s&&0===r)?new p.PostmarkError(t):this.buildErrorByHttpStatusCode(t,r,s)},ErrorHandler.prototype.buildErrorByHttpStatusCode=function(t,r,s){switch(s){case 401:return new p.InvalidAPIKeyError(t,r,s);case 404:return new p.PostmarkError(t,r,s);case 422:return p.ApiInputError.buildSpecificError(t,r,s);case 429:return new p.RateLimitExceededError(t,r,s);case 500:return new p.InternalServerError(t,r,s);case 503:return new p.ServiceUnavailablerError(t,r,s);default:return new p.UnknownError(t,r,s)}},ErrorHandler}();r.ErrorHandler=u},33934:(t,r)=>{"use strict";var s=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.InvalidEmailRequestError=r.InactiveRecipientsError=r.ApiInputError=r.UnknownError=r.RateLimitExceededError=r.ServiceUnavailablerError=r.InternalServerError=r.InvalidAPIKeyError=r.HttpError=r.PostmarkError=void 0;var p=function(t){function PostmarkError(r,s,p){void 0===s&&(s=0),void 0===p&&(p=0);var u=t.call(this,r)||this;return u.statusCode=p,u.code=s,Object.setPrototypeOf(u,PostmarkError.prototype),u.setUpStackTrace(),u}return s(PostmarkError,t),PostmarkError.prototype.setUpStackTrace=function(){this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)},PostmarkError}(Error);r.PostmarkError=p;var u=function(t){function HttpError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,HttpError.prototype),u.setUpStackTrace(),u}return s(HttpError,t),HttpError}(p);r.HttpError=u;var h=function(t){function InvalidAPIKeyError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,InvalidAPIKeyError.prototype),u.setUpStackTrace(),u}return s(InvalidAPIKeyError,t),InvalidAPIKeyError}(u);r.InvalidAPIKeyError=h;var w=function(t){function InternalServerError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,InternalServerError.prototype),u.setUpStackTrace(),u}return s(InternalServerError,t),InternalServerError}(u);r.InternalServerError=w;var E=function(t){function ServiceUnavailablerError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,ServiceUnavailablerError.prototype),u.setUpStackTrace(),u}return s(ServiceUnavailablerError,t),ServiceUnavailablerError}(u);r.ServiceUnavailablerError=E;var A=function(t){function RateLimitExceededError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,RateLimitExceededError.prototype),u.setUpStackTrace(),u}return s(RateLimitExceededError,t),RateLimitExceededError}(u);r.RateLimitExceededError=A;var R=function(t){function UnknownError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,UnknownError.prototype),u.setUpStackTrace(),u}return s(UnknownError,t),UnknownError}(u);r.UnknownError=R;var I=function(t){function ApiInputError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,ApiInputError.prototype),u.setUpStackTrace(),u}return s(ApiInputError,t),ApiInputError.buildSpecificError=function(t,r,s){switch(r){case this.ERROR_CODES.inactiveRecipient:return new U(t,r,s);case this.ERROR_CODES.invalidEmailRequest:return new N(t,r,s);default:return new ApiInputError(t,r,s)}},ApiInputError.ERROR_CODES={inactiveRecipient:406,invalidEmailRequest:300},ApiInputError}(u);r.ApiInputError=I;var U=function(t){function InactiveRecipientsError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,InactiveRecipientsError.prototype),u.setUpStackTrace(),u.recipients=InactiveRecipientsError.parseInactiveRecipients(r),u}return s(InactiveRecipientsError,t),InactiveRecipientsError.parseInactiveRecipients=function(t){var r=[];return this.inactiveRecipientsPatterns.some(function(s){var p=t.match(s);if(null!==p)return r=p[1].split(",").map(function(t){return t.trim()});r=[]}),r},InactiveRecipientsError.inactiveRecipientsPatterns=[/Found inactive addresses: (.+?)\.? Inactive/,/these inactive addresses: (.+?)\.?$/],InactiveRecipientsError}(I);r.InactiveRecipientsError=U;var N=function(t){function InvalidEmailRequestError(r,s,p){var u=t.call(this,r,s,p)||this;return Object.setPrototypeOf(u,InvalidEmailRequestError.prototype),u.setUpStackTrace(),u}return s(InvalidEmailRequestError,t),InvalidEmailRequestError}(I);r.InvalidEmailRequestError=N},39630:(t,r,s)=>{"use strict";var p=Object.create?function(t,r,s,p){void 0===p&&(p=s),Object.defineProperty(t,p,{enumerable:!0,get:function(){return r[s]}})}:function(t,r,s,p){void 0===p&&(p=s),t[p]=r[s]},__exportStar=function(t,r){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||p(r,t,s)};Object.defineProperty(r,"__esModule",{value:!0}),__exportStar(s(60312),r),__exportStar(s(33934),r)},52574:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},49360:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.BounceFilteringParameters=r.BounceType=void 0;var u=s(3041);!function(t){t.HardBounce="HardBounce",t.Transient="Transient",t.Unsubscribe="Unsubscribe",t.Subscribe="Subscribe",t.AutoResponder="AutoResponder",t.AddressChange="AddressChange",t.DnsError="DnsError",t.SpamNotification="SpamNotification",t.OpenRelayTest="OpenRelayTest",t.Unknown="Unknown",t.SoftBounce="SoftBounce",t.VirusNotification="VirusNotification",t.ChallengeVerification="ChallengeVerification",t.BadEmailAddress="BadEmailAddress",t.SpamComplaint="SpamComplaint",t.ManuallyDeactivated="ManuallyDeactivated",t.Unconfirmed="Unconfirmed",t.Blocked="Blocked",t.SMTPApiError="SMTPApiError",t.InboundError="InboundError",t.DMARCPolicy="DMARCPolicy",t.TemplateRenderingFailed="TemplateRenderingFailed"}(r.BounceType||(r.BounceType={}));var h=function(t){function BounceFilteringParameters(r,s,p,u,h,w,E,A,R,I){void 0===r&&(r=100),void 0===s&&(s=0);var U=t.call(this,r,s)||this;return U.type=p,U.inactive=u,U.emailFilter=h,U.tag=w,U.messageID=E,U.fromDate=A,U.toDate=R,U.messageStream=I,U}return p(BounceFilteringParameters,t),BounceFilteringParameters}(u.FilteringParameters);r.BounceFilteringParameters=h},30719:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},704:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClientOptions=void 0,function(t){var r,s;t.Configuration=function(t,r,s){this.useHttps=t,this.requestHost=r,this.timeout=s},(r=t.HttpMethod||(t.HttpMethod={})).GET="GET",r.POST="POST",r.DELETE="DELETE",r.PUT="PUT",r.OPTIONS="OPTIONS",r.HEAD="HEAD",r.PATCH="PATCH",(s=t.AuthHeaderNames||(t.AuthHeaderNames={})).SERVER_TOKEN="X-Postmark-Server-Token",s.ACCOUNT_TOKEN="X-Postmark-Account-Token"}(r.ClientOptions||(r.ClientOptions={}))},21165:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},3041:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FilteringParameters=void 0,r.FilteringParameters=function(t,r){void 0===t&&(t=100),void 0===r&&(r=0),this.count=t,this.offset=r}},58399:(t,r)=>{"use strict";var __assign=function(){return(__assign=Object.assign||function(t){for(var r,s=1,p=arguments.length;s<p;s++)for(var u in r=arguments[s])Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);return t}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.HttpClient=void 0;var s=function(){function HttpClient(t){this.clientOptions=__assign(__assign({},HttpClient.DefaultOptions),t),this.initHttpClient(this.clientOptions)}return HttpClient.prototype.getBaseHttpRequestURL=function(){var t=this.clientOptions.useHttps?"https":"http";return"".concat(t,"://").concat(this.clientOptions.requestHost)},HttpClient.DefaultOptions={useHttps:!0,requestHost:"api.postmarkapp.com",timeout:180},HttpClient}();r.HttpClient=s},54514:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},31802:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DataRemovalRequest=r.DataRemovalStatusTypes=void 0,function(t){t.Pending="Pending",t.Done="Done"}(r.DataRemovalStatusTypes||(r.DataRemovalStatusTypes={})),r.DataRemovalRequest=function(t,r,s){this.RequestedBy=t,this.RequestedFor=r,this.NotifyWhenCompleted=s}},23691:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UpdateDomainRequest=r.CreateDomainRequest=void 0,r.CreateDomainRequest=function(t,r){this.Name=t,this.ReturnPathDomain=r},r.UpdateDomainRequest=function(t){this.ReturnPathDomain=t}},32693:(t,r,s)=>{"use strict";var p=Object.create?function(t,r,s,p){void 0===p&&(p=s),Object.defineProperty(t,p,{enumerable:!0,get:function(){return r[s]}})}:function(t,r,s,p){void 0===p&&(p=s),t[p]=r[s]},__exportStar=function(t,r){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||p(r,t,s)};Object.defineProperty(r,"__esModule",{value:!0}),__exportStar(s(704),r),__exportStar(s(54514),r),__exportStar(s(58399),r),__exportStar(s(30719),r),__exportStar(s(21165),r),__exportStar(s(3041),r),__exportStar(s(52574),r),__exportStar(s(49360),r),__exportStar(s(47973),r),__exportStar(s(84807),r),__exportStar(s(76330),r),__exportStar(s(77702),r),__exportStar(s(33194),r),__exportStar(s(32781),r),__exportStar(s(31410),r),__exportStar(s(29492),r),__exportStar(s(4476),r),__exportStar(s(58204),r),__exportStar(s(16272),r),__exportStar(s(23691),r),__exportStar(s(85219),r),__exportStar(s(66834),r),__exportStar(s(36893),r),__exportStar(s(10764),r),__exportStar(s(25496),r),__exportStar(s(83010),r),__exportStar(s(69162),r),__exportStar(s(70379),r),__exportStar(s(26637),r),__exportStar(s(68885),r),__exportStar(s(45507),r),__exportStar(s(94295),r),__exportStar(s(89530),r),__exportStar(s(67392),r),__exportStar(s(66834),r),__exportStar(s(58532),r),__exportStar(s(47310),r),__exportStar(s(34818),r),__exportStar(s(31802),r)},47973:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Message=void 0,r.Message=function(t,r,s,p,u,h,w,E,A,R,I,U,N,W){this.From=t,this.To=u,this.Cc=h,this.Bcc=w,this.Subject=r,this.ReplyTo=E,this.HtmlBody=s,this.TextBody=p,this.Tag=A,this.TrackOpens=R,this.TrackLinks=I,this.Headers=U,this.Attachments=N,this.Metadata=W}},84807:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Attachment=r.Header=r.ServerDeliveryTypes=r.LinkClickLocation=r.LinkTrackingOptions=void 0,function(t){t.TextOnly="TextOnly",t.HtmlOnly="HtmlOnly",t.HtmlAndText="HtmlAndText",t.None="None"}(r.LinkTrackingOptions||(r.LinkTrackingOptions={})),function(t){t.HTML="HTML",t.Text="Text"}(r.LinkClickLocation||(r.LinkClickLocation={})),function(t){t.Live="Live",t.Sandbox="Sandbox"}(r.ServerDeliveryTypes||(r.ServerDeliveryTypes={})),r.Header=function(t,r){this.Name=t,this.Value=r},r.Attachment=function(t,r,s,p,u){void 0===p&&(p=null),this.Name=t,this.Content=r,this.ContentType=s,this.ContentID=p,this.ContentLength=u}},32781:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},31410:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.OutboundMessageClicksFilteringParameters=r.OutboundMessageOpensFilteringParameters=r.OutboundMessageTrackingFilteringParameters=r.InboundMessagesFilteringParameters=r.OutboundMessagesFilteringParameters=r.InboundMessageStatus=r.OutboundMessageStatus=void 0;var u=s(3041);(function(t){t.Queued="queued",t.Sent="sent",t.Processed="processed"})(r.OutboundMessageStatus||(r.OutboundMessageStatus={})),function(t){t.Queued="queued",t.Sent="sent",t.Processed="processed",t.Blocked="blocked",t.Failed="failed",t.Scheduled="scheduled"}(r.InboundMessageStatus||(r.InboundMessageStatus={}));var h=function(t){function OutboundMessagesFilteringParameters(r,s,p,u,h,w,E,A,R,I){void 0===r&&(r=100),void 0===s&&(s=0);var U=t.call(this,r,s)||this;return U.recipient=p,U.fromEmail=u,U.tag=h,U.status=w,U.fromDate=E,U.toDate=A,U.subject=R,U.messageStream=I,U}return p(OutboundMessagesFilteringParameters,t),OutboundMessagesFilteringParameters}(u.FilteringParameters);r.OutboundMessagesFilteringParameters=h;var w=function(t){function InboundMessagesFilteringParameters(r,s,p,u,h,w,E,A,R,I){void 0===r&&(r=100),void 0===s&&(s=0);var U=t.call(this,r,s)||this;return U.status=E,U.mailboxHash=p,U.recipient=u,U.fromEmail=h,U.tag=w,U.fromDate=A,U.toDate=R,U.subject=I,U}return p(InboundMessagesFilteringParameters,t),InboundMessagesFilteringParameters}(u.FilteringParameters);r.InboundMessagesFilteringParameters=w;var E=function(t){function OutboundMessageTrackingFilteringParameters(r,s,p,u,h,w,E,A,R,I,U,N,W,J,K){void 0===r&&(r=100),void 0===s&&(s=0);var G=t.call(this,r,s)||this;return G.recipient=p,G.tag=u,G.client_name=h,G.client_company=w,G.client_family=E,G.os_name=A,G.os_family=R,G.os_company=I,G.platform=U,G.country=N,G.region=W,G.city=J,G.messageStream=K,G}return p(OutboundMessageTrackingFilteringParameters,t),OutboundMessageTrackingFilteringParameters}(u.FilteringParameters);r.OutboundMessageTrackingFilteringParameters=E;var A=function(t){function OutboundMessageOpensFilteringParameters(){return null!==t&&t.apply(this,arguments)||this}return p(OutboundMessageOpensFilteringParameters,t),OutboundMessageOpensFilteringParameters}(E);r.OutboundMessageOpensFilteringParameters=A;var R=function(t){function OutboundMessageClicksFilteringParameters(){return null!==t&&t.apply(this,arguments)||this}return p(OutboundMessageClicksFilteringParameters,t),OutboundMessageClicksFilteringParameters}(E);r.OutboundMessageClicksFilteringParameters=R},76330:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},33194:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},77702:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},85219:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CreateSignatureRequest=r.UpdateSignatureRequest=void 0,r.UpdateSignatureRequest=function(t,r,s,p){this.Name=t,this.ReplyToEmail=r,this.ReturnPathDomain=s,this.ConfirmationPersonalNote=p},r.CreateSignatureRequest=function(t,r,s,p,u){this.Name=t,this.ReplyToEmail=s,this.ReturnPathDomain=p,this.FromEmail=r,this.ConfirmationPersonalNote=u}},4476:(t,r)=>{"use strict";var s=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.CreateServerRequest=r.UpdateServerRequest=void 0;var UpdateServerRequest=function(t,r,s,p,u,h,w,E,A,R,I,U,N,W,J,K){this.Name=t,this.Color=r,this.SmtpApiActivated=s,this.RawEmailEnabled=p,this.InboundHookUrl=u,this.BounceHookUrl=h,this.OpenHookUrl=w,this.DeliveryHookUrl=E,this.ClickHookUrl=A,this.PostFirstOpenOnly=R,this.InboundSpamThreshold=I,this.InboundDomain=K,this.TrackOpens=U,this.TrackLinks=N,this.IncludeBounceContentInHook=W,this.EnableSmtpApiErrorHooks=J};r.UpdateServerRequest=UpdateServerRequest;var p=function(t){function CreateServerRequest(r,s,p,u,h,w,E,A,R,I,U,N,W,J,K,G,X){var Y=t.call(this,r,s,p,u,h,w,E,A,R,I,U,N,W,J,K,G)||this;return Y.DeliveryType=X,Y}return s(CreateServerRequest,t),CreateServerRequest}(UpdateServerRequest);r.CreateServerRequest=p},16272:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.ServerFilteringParameters=void 0;var u=function(t){function ServerFilteringParameters(r,s,p){void 0===r&&(r=100),void 0===s&&(s=0);var u=t.call(this,r,s)||this;return u.name=p,u}return p(ServerFilteringParameters,t),ServerFilteringParameters}(s(3041).FilteringParameters);r.ServerFilteringParameters=u},58204:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},36893:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},10764:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StatisticsFilteringParameters=void 0,r.StatisticsFilteringParameters=function(t,r,s,p){this.tag=t,this.fromDate=r,this.toDate=s,this.messageStream=p}},47310:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CreateMessageStreamRequest=r.UpdateMessageStreamRequest=r.UnsubscribeHandlingTypes=void 0,function(t){t.None="None",t.Postmark="Postmark",t.Custom="Custom"}(r.UnsubscribeHandlingTypes||(r.UnsubscribeHandlingTypes={})),r.UpdateMessageStreamRequest=function(t,r,s){this.Name=t,this.Description=r,this.SubscriptionManagementConfiguration=s},r.CreateMessageStreamRequest=function(t,r,s,p,u){this.Name=r,this.Description=p,this.ID=t,this.MessageStreamType=s,this.SubscriptionManagementConfiguration=u}},34818:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageStreamsFilteringParameters=void 0,r.MessageStreamsFilteringParameters=function(t,r){this.messageStreamType=t,this.includeArchivedStreams=r}},66834:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},58532:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.SuppressionFilteringParameters=r.SuppressionOrigin=r.SuppressionReason=void 0;var u=s(3041);(function(t){t.HardBounce="HardBounce",t.SpamComplaint="SpamComplaint",t.ManualSuppression="ManualSuppression"})(r.SuppressionReason||(r.SuppressionReason={})),function(t){t.Recipient="Recipient",t.Customer="Customer",t.Admin="Admin"}(r.SuppressionOrigin||(r.SuppressionOrigin={}));var h=function(t){function SuppressionFilteringParameters(r,s,p,u,h,w,E){void 0===r&&(r=100),void 0===s&&(s=0);var A=t.call(this,r,s)||this;return A.suppressionReason=p,A.origin=u,A.emailAddress=h,A.fromDate=w,A.toDate=E,A}return p(SuppressionFilteringParameters,t),SuppressionFilteringParameters}(u.FilteringParameters);r.SuppressionFilteringParameters=h},29492:(t,r,s)=>{"use strict";var p=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.TemplateFilteringParameters=r.TemplatedMessage=r.TemplatesPushRequest=r.TemplateTypes=r.TemplateValidationOptions=r.CreateTemplateRequest=r.UpdateTemplateRequest=void 0;var u=s(3041),UpdateTemplateRequest=function(t,r,s,p,u,h,w){this.Name=t,this.Subject=r,this.HtmlBody=s,this.TextBody=p,this.Alias=u,this.LayoutTemplate=w,this.TemplateType=h};r.UpdateTemplateRequest=UpdateTemplateRequest;var h=function(t){function CreateTemplateRequest(r,s,p,u,h,w,E){return t.call(this,r,s,p,u,h,w,E)||this}return p(CreateTemplateRequest,t),CreateTemplateRequest}(UpdateTemplateRequest);r.CreateTemplateRequest=h,r.TemplateValidationOptions=function(t,r,s,p,u,h,w){this.Subject=t,this.HtmlBody=r,this.TextBody=s,this.TestRenderModel=p,this.TemplateType=u,this.LayoutTemplate=h,this.InlineCssForHtmlTestRender=w},function(t){t.Standard="Standard",t.Layout="Layout"}(r.TemplateTypes||(r.TemplateTypes={})),r.TemplatesPushRequest=function(t,r,s){this.SourceServerID=t,this.DestinationServerID=r,this.PerformChanges=s},r.TemplatedMessage=function(t,r,s,p,u,h,w,E,A,R,I,U){this.From=t,this.TemplateModel=s,"number"==typeof r?this.TemplateId=r:this.TemplateAlias=r,this.To=p,this.Cc=u,this.Bcc=h,this.ReplyTo=w,this.Tag=E,this.TrackOpens=A,this.TrackLinks=R,this.Headers=I,this.Attachments=U};var w=function(t){function TemplateFilteringParameters(r,s,p,u){void 0===r&&(r=100),void 0===s&&(s=0);var h=t.call(this,r,s)||this;return h.templateType=p,h.layoutTemplate=u,h}return p(TemplateFilteringParameters,t),TemplateFilteringParameters}(u.FilteringParameters);r.TemplateFilteringParameters=w},25496:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CreateInboundRuleRequest=void 0,r.CreateInboundRuleRequest=function(t){this.Rule=t}},69162:(t,r)=>{"use strict";var s=function(){var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.CreateWebhookRequest=r.UpdateWebhookRequest=void 0;var UpdateWebhookRequest=function(t,r,s,p){this.Url=t,this.HttpAuth=s,this.HttpHeaders=p,this.Triggers=r};r.UpdateWebhookRequest=UpdateWebhookRequest;var p=function(t){function CreateWebhookRequest(r,s,p,u,h){var w=t.call(this,r,s,p,u)||this;return w.MessageStream=h,w}return s(CreateWebhookRequest,t),CreateWebhookRequest}(UpdateWebhookRequest);r.CreateWebhookRequest=p},70379:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebhookFilteringParameters=void 0,r.WebhookFilteringParameters=function(t){this.messageStream=t}},83010:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},26637:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},45507:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},68885:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},67392:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},94295:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},89530:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},43516:(t,r,s)=>{"use strict";r.KU=void 0;var p=s(75404);p.default,p.default;var u=s(8486);u.default,r.KU=u.default,s(32693),s(33934),s(32693),s(32693),s(32693),s(32693)},32302:function(t,r,s){(function(t,r){var s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,p=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,u=/[\s\n\\/='"\0<>]/,h=/^xlink:?./,w=/["&<]/;function a(t){if(!1===w.test(t+=""))return t;for(var r=0,s=0,p="",u="";s<t.length;s++){switch(t.charCodeAt(s)){case 34:u="&quot;";break;case 38:u="&amp;";break;case 60:u="&lt;";break;default:continue}s!==r&&(p+=t.slice(r,s)),p+=u,r=s+1}return s!==r&&(p+=t.slice(r,s)),p}var l=function(t,r){return String(t).replace(/(\n+)/g,"$1"+(r||"	"))},f=function(t,r,s){return String(t).length>(r||40)||!s&&-1!==String(t).indexOf("\n")||-1!==String(t).indexOf("<")},E={},A=/([A-Z])/g;function c(t){var r="";for(var p in t){var u=t[p];null!=u&&""!==u&&(r&&(r+=" "),r+="-"==p[0]?p:E[p]||(E[p]=p.replace(A,"-$1").toLowerCase()),r="number"==typeof u&&!1===s.test(p)?r+": "+u+"px;":r+": "+u+";")}return r||void 0}function _(t,r){return Array.isArray(r)?r.reduce(_,t):null!=r&&!1!==r&&t.push(r),t}function d(){this.__d=!0}function v(t,r){return{__v:t,context:r,props:t.props,setState:d,forceUpdate:d,__d:!0,__h:[]}}function g(t,r){var s=t.contextType,p=s&&r[s.__c];return null!=s?p?p.props.value:s.__:r}var R=[],I={shallow:!0};k.render=k;var b=function(t,r){return k(t,r,I)},U=[];function k(t,s,w){s=s||{};var E=r.options.__s;r.options.__s=!0;var A,I=r.h(r.Fragment,null);return I.__k=[t],A=w&&(w.pretty||w.voidElements||w.sortAttributes||w.shallow||w.allAttributes||w.xml||w.attributeHook)?function y(t,s,w,E,A,I){if(null==t||"boolean"==typeof t)return"";if("object"!=typeof t)return"function"==typeof t?"":a(t);var U=w.pretty,N=U&&"string"==typeof U?U:"	";if(Array.isArray(t)){for(var W="",J=0;J<t.length;J++)U&&J>0&&(W+="\n"),W+=y(t[J],s,w,E,A,I);return W}if(void 0!==t.constructor)return"";var K,G=t.type,X=t.props,Y=!1;if("function"==typeof G){if(Y=!0,!w.shallow||!E&&!1!==w.renderRootComponent){if(G===r.Fragment){var Q=[];return _(Q,t.props.children),y(Q,s,w,!1!==w.shallowHighOrder,A,I)}var Z,ee=t.__c=v(t,s);r.options.__b&&r.options.__b(t);var et=r.options.__r;if(G.prototype&&"function"==typeof G.prototype.render){var er=g(G,s);(ee=t.__c=new G(X,er)).__v=t,ee._dirty=ee.__d=!0,ee.props=X,null==ee.state&&(ee.state={}),null==ee._nextState&&null==ee.__s&&(ee._nextState=ee.__s=ee.state),ee.context=er,G.getDerivedStateFromProps?ee.state=Object.assign({},ee.state,G.getDerivedStateFromProps(ee.props,ee.state)):ee.componentWillMount&&(ee.componentWillMount(),ee.state=ee._nextState!==ee.state?ee._nextState:ee.__s!==ee.state?ee.__s:ee.state),et&&et(t),Z=ee.render(ee.props,ee.state,ee.context)}else for(var ei=g(G,s),en=0;ee.__d&&en++<25;)ee.__d=!1,et&&et(t),Z=G.call(t.__c,X,ei);return ee.getChildContext&&(s=Object.assign({},s,ee.getChildContext())),r.options.diffed&&r.options.diffed(t),y(Z,s,w,!1!==w.shallowHighOrder,A,I)}G=(K=G).displayName||K!==Function&&K.name||function(t){var r=(Function.prototype.toString.call(t).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!r){for(var s=-1,p=R.length;p--;)if(R[p]===t){s=p;break}s<0&&(s=R.push(t)-1),r="UnnamedComponent"+s}return r}(K)}var eo,ea,es="<"+G;if(X){var ec=Object.keys(X);w&&!0===w.sortAttributes&&ec.sort();for(var el=0;el<ec.length;el++){var ep=ec[el],ed=X[ep];if("children"!==ep){if(!u.test(ep)&&(w&&w.allAttributes||"key"!==ep&&"ref"!==ep&&"__self"!==ep&&"__source"!==ep)){if("defaultValue"===ep)ep="value";else if("defaultChecked"===ep)ep="checked";else if("defaultSelected"===ep)ep="selected";else if("className"===ep){if(void 0!==X.class)continue;ep="class"}else A&&h.test(ep)&&(ep=ep.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===ep){if(X.for)continue;ep="for"}"style"===ep&&ed&&"object"==typeof ed&&(ed=c(ed)),"a"===ep[0]&&"r"===ep[1]&&"boolean"==typeof ed&&(ed=String(ed));var eu=w.attributeHook&&w.attributeHook(ep,ed,s,w,Y);if(eu||""===eu)es+=eu;else if("dangerouslySetInnerHTML"===ep)ea=ed&&ed.__html;else if("textarea"===G&&"value"===ep)eo=ed;else if((ed||0===ed||""===ed)&&"function"!=typeof ed){if(!(!0!==ed&&""!==ed||(ed=ep,w&&w.xml))){es=es+" "+ep;continue}if("value"===ep){if("select"===G){I=ed;continue}"option"===G&&I==ed&&void 0===X.selected&&(es+=" selected")}es=es+" "+ep+'="'+a(ed)+'"'}}}else eo=ed}}if(U){var eh=es.replace(/\n\s*/," ");eh===es||~eh.indexOf("\n")?U&&~es.indexOf("\n")&&(es+="\n"):es=eh}if(es+=">",u.test(G))throw Error(G+" is not a valid HTML tag name in "+es);var ef,em=p.test(G)||w.voidElements&&w.voidElements.test(G),eg=[];if(ea)U&&f(ea)&&(ea="\n"+N+l(ea,N)),es+=ea;else if(null!=eo&&_(ef=[],eo).length){for(var ev=U&&~es.indexOf("\n"),ey=!1,e_=0;e_<ef.length;e_++){var ex=ef[e_];if(null!=ex&&!1!==ex){var eb=y(ex,s,w,!0,"svg"===G||"foreignObject"!==G&&A,I);if(U&&!ev&&f(eb)&&(ev=!0),eb){if(U){var ew=eb.length>0&&"<"!=eb[0];ey&&ew?eg[eg.length-1]+=eb:eg.push(eb),ey=ew}else eg.push(eb)}}}if(U&&ev)for(var ek=eg.length;ek--;)eg[ek]="\n"+N+l(eg[ek],N)}if(eg.length||ea)es+=eg.join("");else if(w&&w.xml)return es.substring(0,es.length-1)+" />";return!em||ef||ea?(U&&~es.indexOf("\n")&&(es+="\n"),es=es+"</"+G+">"):es=es.replace(/>$/," />"),es}(t,s,w):function F(t,s,w,E,A){if(null==t||!0===t||!1===t||""===t)return"";if("object"!=typeof t)return"function"==typeof t?"":a(t);if(N(t)){var R="";A.__k=t;for(var I=0;I<t.length;I++)R+=F(t[I],s,w,E,A),t[I]=S(t[I]);return R}if(void 0!==t.constructor)return"";t.__=A,r.options.__b&&r.options.__b(t);var U=t.type,J=t.props;if("function"==typeof U){if(U===r.Fragment)Z=J.children;else{Z=U.prototype&&"function"==typeof U.prototype.render?(K=s,X=g(G=t.type,K),Y=new G(t.props,X),t.__c=Y,Y.__v=t,Y.__d=!0,Y.props=t.props,null==Y.state&&(Y.state={}),null==Y.__s&&(Y.__s=Y.state),Y.context=X,G.getDerivedStateFromProps?Y.state=W({},Y.state,G.getDerivedStateFromProps(Y.props,Y.state)):Y.componentWillMount&&(Y.componentWillMount(),Y.state=Y.__s!==Y.state?Y.__s:Y.state),(Q=r.options.__r)&&Q(t),Y.render(Y.props,Y.state,Y.context)):function(t,s){var p,u=v(t,s),h=g(t.type,s);t.__c=u;for(var w=r.options.__r,E=0;u.__d&&E++<25;)u.__d=!1,w&&w(t),p=t.type.call(u,t.props,h);return p}(t,s);var K,G,X,Y,Q,Z,ee=t.__c;ee.getChildContext&&(s=W({},s,ee.getChildContext()))}var et=F(Z=null!=Z&&Z.type===r.Fragment&&null==Z.key?Z.props.children:Z,s,w,E,t);return r.options.diffed&&r.options.diffed(t),t.__=void 0,r.options.unmount&&r.options.unmount(t),et}var er,ei,en="<";if(en+=U,J)for(var eo in er=J.children,J){var ea,es,ec,el=J[eo];if(!("key"===eo||"ref"===eo||"__self"===eo||"__source"===eo||"children"===eo||"className"===eo&&"class"in J||"htmlFor"===eo&&"for"in J||u.test(eo))){if(es=eo="className"===(ea=eo)?"class":"htmlFor"===ea?"for":"defaultValue"===ea?"value":"defaultChecked"===ea?"checked":"defaultSelected"===ea?"selected":w&&h.test(ea)?ea.toLowerCase().replace(/^xlink:?/,"xlink:"):ea,ec=el,el="style"===es&&null!=ec&&"object"==typeof ec?c(ec):"a"===es[0]&&"r"===es[1]&&"boolean"==typeof ec?String(ec):ec,"dangerouslySetInnerHTML"===eo)ei=el&&el.__html;else if("textarea"===U&&"value"===eo)er=el;else if((el||0===el||""===el)&&"function"!=typeof el){if(!0===el||""===el){el=eo,en=en+" "+eo;continue}if("value"===eo){if("select"===U){E=el;continue}"option"!==U||E!=el||"selected"in J||(en+=" selected")}en=en+" "+eo+'="'+a(el)+'"'}}}var ep=en;if(en+=">",u.test(U))throw Error(U+" is not a valid HTML tag name in "+en);var ed="",eu=!1;if(ei)ed+=ei,eu=!0;else if("string"==typeof er)ed+=a(er),eu=!0;else if(N(er)){t.__k=er;for(var eh=0;eh<er.length;eh++){var ef=er[eh];if(er[eh]=S(ef),null!=ef&&!1!==ef){var em=F(ef,s,"svg"===U||"foreignObject"!==U&&w,E,t);em&&(ed+=em,eu=!0)}}}else if(null!=er&&!1!==er&&!0!==er){t.__k=[S(er)];var eg=F(er,s,"svg"===U||"foreignObject"!==U&&w,E,t);eg&&(ed+=eg,eu=!0)}if(r.options.diffed&&r.options.diffed(t),t.__=void 0,r.options.unmount&&r.options.unmount(t),eu)en+=ed;else if(p.test(U))return ep+" />";return en+"</"+U+">"}(t,s,!1,void 0,I),r.options.__c&&r.options.__c(t,U),r.options.__s=E,U.length=0,A}function S(t){return null==t||"boolean"==typeof t?null:"string"==typeof t||"number"==typeof t||"bigint"==typeof t?r.h(null,null,t):t}var N=Array.isArray,W=Object.assign;k.shallowRender=b,t.default=k,t.render=k,t.renderToStaticMarkup=k,t.renderToString=k,t.shallowRender=b})(r,s(22838))},54412:(t,r,s)=>{"use strict";t.exports=s(32302).default},22838:(t,r)=>{var s,p,u,h,w,E,A,R,I,U,N,W,J={},K=[],G=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,X=Array.isArray;function d(t,r){for(var s in r)t[s]=r[s];return t}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function _(t,r,p){var u,h,w,E={};for(w in r)"key"==w?u=r[w]:"ref"==w?h=r[w]:E[w]=r[w];if(arguments.length>2&&(E.children=arguments.length>3?s.call(arguments,2):p),"function"==typeof t&&null!=t.defaultProps)for(w in t.defaultProps)void 0===E[w]&&(E[w]=t.defaultProps[w]);return x(t,E,u,h,null)}function x(t,r,s,h,w){var E={type:t,props:r,key:s,ref:h,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==w?++u:w,__i:-1,__u:0};return null==w&&null!=p.vnode&&p.vnode(E),E}function m(t){return t.children}function b(t,r){this.props=t,this.context=r}function k(t,r){if(null==r)return t.__?k(t.__,t.__i+1):null;for(var s;r<t.__k.length;r++)if(null!=(s=t.__k[r])&&null!=s.__e)return s.__e;return"function"==typeof t.type?k(t):null}function M(t){(!t.__d&&(t.__d=!0)&&h.push(t)&&!$.__r++||w!=p.debounceRendering)&&((w=p.debounceRendering)||E)($)}function $(){for(var t,r,s,u,w,E,R=1;h.length;)h.length>R&&h.sort(A),t=h.shift(),R=h.length,t.__d&&(r=void 0,u=(s=t.__v).__e,w=[],E=[],t.__P&&((r=d({},s)).__v=s.__v+1,p.vnode&&p.vnode(r),j(t.__P,r,s,t.__n,t.__P.namespaceURI,32&s.__u?[u]:null,w,null==u?k(s):u,!!(32&s.__u),E),r.__v=s.__v,r.__.__k[r.__i]=r,O(w,r,E),r.__e!=u&&function S(t){var r,s;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(s=t.__k[r])&&null!=s.__e){t.__e=t.__c.base=s.__e;break}return S(t)}}(r)));$.__r=0}function C(t,r,s,u,h,w,E,A,R,I,U){var N,W,G,Y,Q,Z,ee,et=u&&u.__k||K,er=r.length;for(R=function(t,r,s,u,h){var w,E,A,R,I,U=s.length,N=U,W=0;for(t.__k=Array(h),w=0;w<h;w++)null!=(E=r[w])&&"boolean"!=typeof E&&"function"!=typeof E?(R=w+W,(E=t.__k[w]="string"==typeof E||"number"==typeof E||"bigint"==typeof E||E.constructor==String?x(null,E,null,null,null):X(E)?x(m,{children:E},null,null,null):null==E.constructor&&E.__b>0?x(E.type,E.props,E.key,E.ref?E.ref:null,E.__v):E).__=t,E.__b=t.__b+1,A=null,-1!=(I=E.__i=function(t,r,s,p){var u,h,w,E=t.key,A=t.type,R=r[s],I=null!=R&&0==(2&R.__u);if(null===R&&null==t.key||I&&E==R.key&&A==R.type)return s;if(p>(I?1:0)){for(u=s-1,h=s+1;u>=0||h<r.length;)if(null!=(R=r[w=u>=0?u--:h++])&&0==(2&R.__u)&&E==R.key&&A==R.type)return w}return -1}(E,s,R,N))&&(N--,(A=s[I])&&(A.__u|=2)),null==A||null==A.__v?(-1==I&&(h>U?W--:h<U&&W++),"function"!=typeof E.type&&(E.__u|=4)):I!=R&&(I==R-1?W--:I==R+1?W++:(I>R?W--:W++,E.__u|=4))):t.__k[w]=null;if(N)for(w=0;w<U;w++)null!=(A=s[w])&&0==(2&A.__u)&&(A.__e==u&&(u=k(A)),function q(t,r,s){var u,h;if(p.unmount&&p.unmount(t),(u=t.ref)&&(u.current&&u.current!=t.__e||V(u,null,r)),null!=(u=t.__c)){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(t){p.__e(t,r)}u.base=u.__P=null}if(u=t.__k)for(h=0;h<u.length;h++)u[h]&&q(u[h],r,s||"function"!=typeof t.type);s||g(t.__e),t.__c=t.__=t.__e=void 0}(A,A));return u}(s,r,et,R,er),N=0;N<er;N++)null!=(G=s.__k[N])&&(W=-1==G.__i?J:et[G.__i]||J,G.__i=N,Z=j(t,G,W,h,w,E,A,R,I,U),Y=G.__e,G.ref&&W.ref!=G.ref&&(W.ref&&V(W.ref,null,G),U.push(G.ref,G.__c||Y,G)),null==Q&&null!=Y&&(Q=Y),(ee=!!(4&G.__u))||W.__k===G.__k?R=function P(t,r,s,p){var u,h;if("function"==typeof t.type){for(u=t.__k,h=0;u&&h<u.length;h++)u[h]&&(u[h].__=t,r=P(u[h],r,s,p));return r}t.__e!=r&&(p&&(r&&t.type&&!r.parentNode&&(r=k(t)),s.insertBefore(t.__e,r||null)),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8==r.nodeType);return r}(G,R,t,ee):"function"==typeof G.type&&void 0!==Z?R=Z:Y&&(R=Y.nextSibling),G.__u&=-7);return s.__e=Q,R}function H(t,r,s){"-"==r[0]?t.setProperty(r,null==s?"":s):t[r]=null==s?"":"number"!=typeof s||G.test(r)?s:s+"px"}function L(t,r,s,p,u){var h,w;e:if("style"==r){if("string"==typeof s)t.style.cssText=s;else{if("string"==typeof p&&(t.style.cssText=p=""),p)for(r in p)s&&r in s||H(t.style,r,"");if(s)for(r in s)p&&s[r]==p[r]||H(t.style,r,s[r])}}else if("o"==r[0]&&"n"==r[1])h=r!=(r=r.replace(R,"$1")),r=(w=r.toLowerCase())in t||"onFocusOut"==r||"onFocusIn"==r?w.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+h]=s,s?p?s.t=p.t:(s.t=I,t.addEventListener(r,h?N:U,h)):t.removeEventListener(r,h?N:U,h);else{if("http://www.w3.org/2000/svg"==u)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=r&&"height"!=r&&"href"!=r&&"list"!=r&&"form"!=r&&"tabIndex"!=r&&"download"!=r&&"rowSpan"!=r&&"colSpan"!=r&&"role"!=r&&"popover"!=r&&r in t)try{t[r]=null==s?"":s;break e}catch(t){}"function"==typeof s||(null==s||!1===s&&"-"!=r[4]?t.removeAttribute(r):t.setAttribute(r,"popover"==r&&1==s?"":s))}}function T(t){return function(r){if(this.l){var s=this.l[r.type+t];if(null==r.u)r.u=I++;else if(r.u<s.t)return;return s(p.event?p.event(r):r)}}}function j(t,r,u,h,w,E,A,R,I,U){var N,W,K,G,Y,Q,Z,ee,et,er,ei,en,eo,ea,es,ec,el,ep=r.type;if(null!=r.constructor)return null;128&u.__u&&(I=!!(32&u.__u),E=[R=r.__e=u.__e]),(N=p.__b)&&N(r);e:if("function"==typeof ep)try{if(ee=r.props,et="prototype"in ep&&ep.prototype.render,er=(N=ep.contextType)&&h[N.__c],ei=N?er?er.props.value:N.__:h,u.__c?Z=(W=r.__c=u.__c).__=W.__E:(et?r.__c=W=new ep(ee,ei):(r.__c=W=new b(ee,ei),W.constructor=ep,W.render=B),er&&er.sub(W),W.props=ee,W.state||(W.state={}),W.context=ei,W.__n=h,K=W.__d=!0,W.__h=[],W._sb=[]),et&&null==W.__s&&(W.__s=W.state),et&&null!=ep.getDerivedStateFromProps&&(W.__s==W.state&&(W.__s=d({},W.__s)),d(W.__s,ep.getDerivedStateFromProps(ee,W.__s))),G=W.props,Y=W.state,W.__v=r,K)et&&null==ep.getDerivedStateFromProps&&null!=W.componentWillMount&&W.componentWillMount(),et&&null!=W.componentDidMount&&W.__h.push(W.componentDidMount);else{if(et&&null==ep.getDerivedStateFromProps&&ee!==G&&null!=W.componentWillReceiveProps&&W.componentWillReceiveProps(ee,ei),!W.__e&&null!=W.shouldComponentUpdate&&!1===W.shouldComponentUpdate(ee,W.__s,ei)||r.__v==u.__v){for(r.__v!=u.__v&&(W.props=ee,W.state=W.__s,W.__d=!1),r.__e=u.__e,r.__k=u.__k,r.__k.some(function(t){t&&(t.__=r)}),en=0;en<W._sb.length;en++)W.__h.push(W._sb[en]);W._sb=[],W.__h.length&&A.push(W);break e}null!=W.componentWillUpdate&&W.componentWillUpdate(ee,W.__s,ei),et&&null!=W.componentDidUpdate&&W.__h.push(function(){W.componentDidUpdate(G,Y,Q)})}if(W.context=ei,W.props=ee,W.__P=t,W.__e=!1,eo=p.__r,ea=0,et){for(W.state=W.__s,W.__d=!1,eo&&eo(r),N=W.render(W.props,W.state,W.context),es=0;es<W._sb.length;es++)W.__h.push(W._sb[es]);W._sb=[]}else do W.__d=!1,eo&&eo(r),N=W.render(W.props,W.state,W.context),W.state=W.__s;while(W.__d&&++ea<25);W.state=W.__s,null!=W.getChildContext&&(h=d(d({},h),W.getChildContext())),et&&!K&&null!=W.getSnapshotBeforeUpdate&&(Q=W.getSnapshotBeforeUpdate(G,Y)),ec=N,null!=N&&N.type===m&&null==N.key&&(ec=function z(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:X(t)?t.map(z):d({},t)}(N.props.children)),R=C(t,X(ec)?ec:[ec],r,u,h,w,E,A,R,I,U),W.base=r.__e,r.__u&=-161,W.__h.length&&A.push(W),Z&&(W.__E=W.__=null)}catch(t){if(r.__v=null,I||null!=E){if(t.then){for(r.__u|=I?160:128;R&&8==R.nodeType&&R.nextSibling;)R=R.nextSibling;E[E.indexOf(R)]=null,r.__e=R}else{for(el=E.length;el--;)g(E[el]);F(r)}}else r.__e=u.__e,r.__k=u.__k,t.then||F(r);p.__e(t,r,u)}else null==E&&r.__v==u.__v?(r.__k=u.__k,r.__e=u.__e):R=r.__e=function(t,r,u,h,w,E,A,R,I){var U,N,W,K,G,Y,Q,Z=u.props,ee=r.props,et=r.type;if("svg"==et?w="http://www.w3.org/2000/svg":"math"==et?w="http://www.w3.org/1998/Math/MathML":w||(w="http://www.w3.org/1999/xhtml"),null!=E){for(U=0;U<E.length;U++)if((G=E[U])&&"setAttribute"in G==!!et&&(et?G.localName==et:3==G.nodeType)){t=G,E[U]=null;break}}if(null==t){if(null==et)return document.createTextNode(ee);t=document.createElementNS(w,et,ee.is&&ee),R&&(p.__m&&p.__m(r,E),R=!1),E=null}if(null==et)Z===ee||R&&t.data==ee||(t.data=ee);else{if(E=E&&s.call(t.childNodes),Z=u.props||J,!R&&null!=E)for(Z={},U=0;U<t.attributes.length;U++)Z[(G=t.attributes[U]).name]=G.value;for(U in Z)if(G=Z[U],"children"==U);else if("dangerouslySetInnerHTML"==U)W=G;else if(!(U in ee)){if("value"==U&&"defaultValue"in ee||"checked"==U&&"defaultChecked"in ee)continue;L(t,U,null,G,w)}for(U in ee)G=ee[U],"children"==U?K=G:"dangerouslySetInnerHTML"==U?N=G:"value"==U?Y=G:"checked"==U?Q=G:R&&"function"!=typeof G||Z[U]===G||L(t,U,G,Z[U],w);if(N)R||W&&(N.__html==W.__html||N.__html==t.innerHTML)||(t.innerHTML=N.__html),r.__k=[];else if(W&&(t.innerHTML=""),C("template"==r.type?t.content:t,X(K)?K:[K],r,u,h,"foreignObject"==et?"http://www.w3.org/1999/xhtml":w,E,A,E?E[0]:u.__k&&k(u,0),R,I),null!=E)for(U=E.length;U--;)g(E[U]);R||(U="value","progress"==et&&null==Y?t.removeAttribute("value"):null==Y||Y===t[U]&&("progress"!=et||Y)&&("option"!=et||Y==Z[U])||L(t,U,Y,Z[U],w),U="checked",null!=Q&&Q!=t[U]&&L(t,U,Q,Z[U],w))}return t}(u.__e,r,u,h,w,E,A,I,U);return(N=p.diffed)&&N(r),128&r.__u?void 0:R}function F(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(F)}function O(t,r,s){for(var u=0;u<s.length;u++)V(s[u],s[++u],s[++u]);p.__c&&p.__c(r,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(t){t.call(r)})}catch(t){p.__e(t,r.__v)}})}function V(t,r,s){try{if("function"==typeof t){var u="function"==typeof t.__u;u&&t.__u(),u&&null==r||(t.__u=t(r))}else t.current=r}catch(t){p.__e(t,s)}}function B(t,r,s){return this.constructor(t,s)}function D(t,r,u){var h,w,E,A;r==document&&(r=document.documentElement),p.__&&p.__(t,r),w=(h="function"==typeof u)?null:u&&u.__k||r.__k,E=[],A=[],j(r,t=(!h&&u||r).__k=_(m,null,[t]),w||J,J,r.namespaceURI,!h&&u?[u]:w?null:r.firstChild?s.call(r.childNodes):null,E,!h&&u?u:w?w.__e:r.firstChild,h,A),O(E,t,A)}s=K.slice,p={__e:function(t,r,s,p){for(var u,h,w;r=r.__;)if((u=r.__c)&&!u.__)try{if((h=u.constructor)&&null!=h.getDerivedStateFromError&&(u.setState(h.getDerivedStateFromError(t)),w=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(t,p||{}),w=u.__d),w)return u.__E=u}catch(r){t=r}throw t}},u=0,b.prototype.setState=function(t,r){var s;s=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},s),this.props)),t&&d(s,t),null!=t&&this.__v&&(r&&this._sb.push(r),M(this))},b.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),M(this))},b.prototype.render=m,h=[],E="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,A=function(t,r){return t.__v.__b-r.__v.__b},$.__r=0,R=/(PointerCapture)$|Capture$/i,I=0,U=T(!1),N=T(!0),W=0,r.Component=b,r.Fragment=m,r.cloneElement=function(t,r,p){var u,h,w,E,A=d({},t.props);for(w in t.type&&t.type.defaultProps&&(E=t.type.defaultProps),r)"key"==w?u=r[w]:"ref"==w?h=r[w]:A[w]=void 0===r[w]&&null!=E?E[w]:r[w];return arguments.length>2&&(A.children=arguments.length>3?s.call(arguments,2):p),x(t.type,A,u||t.key,h||t.ref,null)},r.createContext=function(t){function l(t){var r,s;return this.getChildContext||(r=new Set,(s={})[l.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(t){this.props.value!=t.value&&r.forEach(function(t){t.__e=!0,M(t)})},this.sub=function(t){r.add(t);var s=t.componentWillUnmount;t.componentWillUnmount=function(){r&&r.delete(t),s&&s.call(t)}}),t.children}return l.__c="__cC"+W++,l.__=t,l.Provider=l.__l=(l.Consumer=function(t,r){return t.children(r)}).contextType=l,l},r.createElement=_,r.createRef=function(){return{current:null}},r.h=_,r.hydrate=function n(t,r){D(t,r,n)},r.isValidElement=function(t){return null!=t&&null==t.constructor},r.options=p,r.render=D,r.toChildArray=function n(t,r){return r=r||[],null==t||"boolean"==typeof t||(X(t)?t.some(function(t){n(t,r)}):r.push(t)),r}},56421:(t,r,s)=>{"use strict";let p;let u=s(22037),h=s(76224),w=s(70145),{env:E}=process;function translateLevel(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function supportsColor(t,r){if(0===p)return 0;if(w("color=16m")||w("color=full")||w("color=truecolor"))return 3;if(w("color=256"))return 2;if(t&&!r&&void 0===p)return 0;let s=p||0;if("dumb"===E.TERM)return s;if("win32"===process.platform){let t=u.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in E)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(t=>t in E)||"codeship"===E.CI_NAME?1:s;if("TEAMCITY_VERSION"in E)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(E.TEAMCITY_VERSION)?1:0;if("truecolor"===E.COLORTERM)return 3;if("TERM_PROGRAM"in E){let t=parseInt((E.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(E.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(E.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(E.TERM)||"COLORTERM"in E?1:s}w("no-color")||w("no-colors")||w("color=false")||w("color=never")?p=0:(w("color")||w("colors")||w("color=true")||w("color=always"))&&(p=1),"FORCE_COLOR"in E&&(p="true"===E.FORCE_COLOR?1:"false"===E.FORCE_COLOR?0:0===E.FORCE_COLOR.length?1:Math.min(parseInt(E.FORCE_COLOR,10),3)),t.exports={supportsColor:function(t){let r=supportsColor(t,t&&t.isTTY);return translateLevel(r)},stdout:translateLevel(supportsColor(!0,h.isatty(1))),stderr:translateLevel(supportsColor(!0,h.isatty(2)))}},62903:(t,r,s)=>{"use strict";let p,u;s.r(r),s.d(r,{NIL:()=>X,parse:()=>esm_node_parse,stringify:()=>esm_node_stringify,v1:()=>esm_node_v1,v3:()=>J,v4:()=>esm_node_v4,v5:()=>G,validate:()=>esm_node_validate,version:()=>esm_node_version});var h=s(6113),w=s.n(h);let E=new Uint8Array(256),A=E.length;function rng(){return A>E.length-16&&(w().randomFillSync(E),A=0),E.slice(A,A+=16)}let R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,esm_node_validate=function(t){return"string"==typeof t&&R.test(t)},I=[];for(let t=0;t<256;++t)I.push((t+256).toString(16).substr(1));let esm_node_stringify=function(t,r=0){let s=(I[t[r+0]]+I[t[r+1]]+I[t[r+2]]+I[t[r+3]]+"-"+I[t[r+4]]+I[t[r+5]]+"-"+I[t[r+6]]+I[t[r+7]]+"-"+I[t[r+8]]+I[t[r+9]]+"-"+I[t[r+10]]+I[t[r+11]]+I[t[r+12]]+I[t[r+13]]+I[t[r+14]]+I[t[r+15]]).toLowerCase();if(!esm_node_validate(s))throw TypeError("Stringified UUID is invalid");return s},U=0,N=0,esm_node_v1=function(t,r,s){let h=r&&s||0,w=r||Array(16),E=(t=t||{}).node||p,A=void 0!==t.clockseq?t.clockseq:u;if(null==E||null==A){let r=t.random||(t.rng||rng)();null==E&&(E=p=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==A&&(A=u=(r[6]<<8|r[7])&16383)}let R=void 0!==t.msecs?t.msecs:Date.now(),I=void 0!==t.nsecs?t.nsecs:N+1,W=R-U+(I-N)/1e4;if(W<0&&void 0===t.clockseq&&(A=A+1&16383),(W<0||R>U)&&void 0===t.nsecs&&(I=0),I>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");U=R,N=I,u=A,R+=122192928e5;let J=((268435455&R)*1e4+I)%4294967296;w[h++]=J>>>24&255,w[h++]=J>>>16&255,w[h++]=J>>>8&255,w[h++]=255&J;let K=R/4294967296*1e4&268435455;w[h++]=K>>>8&255,w[h++]=255&K,w[h++]=K>>>24&15|16,w[h++]=K>>>16&255,w[h++]=A>>>8|128,w[h++]=255&A;for(let t=0;t<6;++t)w[h+t]=E[t];return r||esm_node_stringify(w)},esm_node_parse=function(t){let r;if(!esm_node_validate(t))throw TypeError("Invalid UUID");let s=new Uint8Array(16);return s[0]=(r=parseInt(t.slice(0,8),16))>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r,s[4]=(r=parseInt(t.slice(9,13),16))>>>8,s[5]=255&r,s[6]=(r=parseInt(t.slice(14,18),16))>>>8,s[7]=255&r,s[8]=(r=parseInt(t.slice(19,23),16))>>>8,s[9]=255&r,s[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255,s[11]=r/4294967296&255,s[12]=r>>>24&255,s[13]=r>>>16&255,s[14]=r>>>8&255,s[15]=255&r,s};function v35(t,r,s){function generateUUID(t,p,u,h){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));let r=[];for(let s=0;s<t.length;++s)r.push(t.charCodeAt(s));return r}(t)),"string"==typeof p&&(p=esm_node_parse(p)),16!==p.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let w=new Uint8Array(16+t.length);if(w.set(p),w.set(t,p.length),(w=s(w))[6]=15&w[6]|r,w[8]=63&w[8]|128,u){h=h||0;for(let t=0;t<16;++t)u[h+t]=w[t];return u}return esm_node_stringify(w)}try{generateUUID.name=t}catch(t){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}let W=v35("v3",48,function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),w().createHash("md5").update(t).digest()}),J=W,esm_node_v4=function(t,r,s){t=t||{};let p=t.random||(t.rng||rng)();if(p[6]=15&p[6]|64,p[8]=63&p[8]|128,r){s=s||0;for(let t=0;t<16;++t)r[s+t]=p[t];return r}return esm_node_stringify(p)},K=v35("v5",80,function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),w().createHash("sha1").update(t).digest()}),G=K,X="00000000-0000-0000-0000-000000000000",esm_node_version=function(t){if(!esm_node_validate(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},28016:t=>{"use strict";t.exports=function(t,r){this.v=t,this.k=r},t.exports.__esModule=!0,t.exports.default=t.exports},57384:t=>{"use strict";t.exports=function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},48824:t=>{"use strict";function asyncGeneratorStep(t,r,s,p,u,h,w){try{var E=t[h](w),A=E.value}catch(t){return void s(t)}E.done?r(A):Promise.resolve(A).then(p,u)}t.exports=function(t){return function(){var r=this,s=arguments;return new Promise(function(p,u){var h=t.apply(r,s);function _next(t){asyncGeneratorStep(h,p,u,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(h,p,u,_next,_throw,"throw",t)}_next(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},36707:t=>{"use strict";t.exports=function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},89250:(t,r,s)=>{"use strict";var p=s(15501),u=s(4474);t.exports=function(t,r,s){if(p())return Reflect.construct.apply(null,arguments);var h=[null];h.push.apply(h,r);var w=new(t.bind.apply(t,h));return s&&u(w,s.prototype),w},t.exports.__esModule=!0,t.exports.default=t.exports},91390:(t,r,s)=>{"use strict";var p=s(54987);function _defineProperties(t,r){for(var s=0;s<r.length;s++){var u=r[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,p(u.key),u)}}t.exports=function(t,r,s){return r&&_defineProperties(t.prototype,r),s&&_defineProperties(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},92174:(t,r,s)=>{"use strict";var p=s(54987);t.exports=function(t,r,s){return(r=p(r))in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t},t.exports.__esModule=!0,t.exports.default=t.exports},14432:t=>{"use strict";function _extends(){return t.exports=_extends=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var p in s)({}).hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,_extends.apply(null,arguments)}t.exports=_extends,t.exports.__esModule=!0,t.exports.default=t.exports},51327:t=>{"use strict";function _getPrototypeOf(r){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,_getPrototypeOf(r)}t.exports=_getPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},52603:(t,r,s)=>{"use strict";var p=s(4474);t.exports=function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p(t,r)},t.exports.__esModule=!0,t.exports.default=t.exports},2049:t=>{"use strict";t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},55357:t=>{"use strict";t.exports=function(t){try{return -1!==Function.toString.call(t).indexOf("[native code]")}catch(r){return"function"==typeof t}},t.exports.__esModule=!0,t.exports.default=t.exports},15501:t=>{"use strict";function _isNativeReflectConstruct(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(t.exports=_isNativeReflectConstruct=function(){return!!r},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_isNativeReflectConstruct,t.exports.__esModule=!0,t.exports.default=t.exports},17257:(t,r,s)=>{"use strict";var p=s(44493).default,u=s(57384);t.exports=function(t,r){if(r&&("object"==p(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return u(t)},t.exports.__esModule=!0,t.exports.default=t.exports},75881:(t,r,s)=>{"use strict";var p=s(23667);function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,s,u="function"==typeof Symbol?Symbol:{},h=u.iterator||"@@iterator",w=u.toStringTag||"@@toStringTag";function i(t,u,h,w){var A=Object.create((u&&u.prototype instanceof Generator?u:Generator).prototype);return p(A,"_invoke",function(t,p,u){var h,w,A,R=0,I=u||[],U=!1,N={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(t,s){return h=t,w=0,A=r,N.n=s,E}};function d(t,p){for(w=t,A=p,s=0;!U&&R&&!u&&s<I.length;s++){var u,h=I[s],W=N.p,J=h[2];t>3?(u=J===p)&&(A=h[(w=h[4])?5:(w=3,3)],h[4]=h[5]=r):h[0]<=W&&((u=t<2&&W<h[1])?(w=0,N.v=p,N.n=h[1]):W<J&&(u=t<3||h[0]>p||p>J)&&(h[4]=t,h[5]=p,N.n=J,w=0))}if(u||t>1)return E;throw U=!0,p}return function(u,I,W){if(R>1)throw TypeError("Generator is already running");for(U&&1===I&&d(I,W),w=I,A=W;(s=w<2?r:A)||!U;){h||(w?w<3?(w>1&&(N.n=-1),d(w,A)):N.n=A:N.v=A);try{if(R=2,h){if(w||(u="next"),s=h[u]){if(!(s=s.call(h,A)))throw TypeError("iterator result is not an object");if(!s.done)return s;A=s.value,w<2&&(w=0)}else 1===w&&(s=h.return)&&s.call(h),w<2&&(A=TypeError("The iterator does not provide a '"+u+"' method"),w=1);h=r}else if((s=(U=N.n<0)?A:t.call(p,N))!==E)break}catch(t){h=r,w=1,A=t}finally{R=1}}return{value:s,done:U}}}(t,h,w),!0),A}var E={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}s=Object.getPrototypeOf;var A=[][h]?s(s([][h]())):(p(s={},h,function(){return this}),s),R=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(A);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,p(t,w,"GeneratorFunction")),t.prototype=Object.create(R),t}return GeneratorFunction.prototype=GeneratorFunctionPrototype,p(R,"constructor",GeneratorFunctionPrototype),p(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",p(GeneratorFunctionPrototype,w,"GeneratorFunction"),p(R),p(R,w,"Generator"),p(R,h,function(){return this}),p(R,"toString",function(){return"[object Generator]"}),(t.exports=_regenerator=function(){return{w:i,m:f}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_regenerator,t.exports.__esModule=!0,t.exports.default=t.exports},62414:(t,r,s)=>{"use strict";var p=s(26008);t.exports=function(t,r,s,u,h){var w=p(t,r,s,u,h);return w.next().then(function(t){return t.done?t.value:w.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},26008:(t,r,s)=>{"use strict";var p=s(75881),u=s(81267);t.exports=function(t,r,s,h,w){return new u(p().w(t,r,s,h),w||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},81267:(t,r,s)=>{"use strict";var p=s(28016),u=s(23667);t.exports=function AsyncIterator(t,r){var s;this.next||(u(AsyncIterator.prototype),u(AsyncIterator.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),u(this,"_invoke",function(u,h,w){function f(){return new r(function(s,h){(function n(s,u,h,w){try{var E=t[s](u),A=E.value;return A instanceof p?r.resolve(A.v).then(function(t){n("next",t,h,w)},function(t){n("throw",t,h,w)}):r.resolve(A).then(function(t){E.value=t,h(E)},function(t){return n("throw",t,h,w)})}catch(t){w(t)}})(u,w,s,h)})}return s=s?s.then(f,f):f()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},23667:t=>{"use strict";function _regeneratorDefine(r,s,p,u){var h=Object.defineProperty;try{h({},"",{})}catch(t){h=0}t.exports=_regeneratorDefine=function(t,r,s,p){function o(r,s){_regeneratorDefine(t,r,function(t){return this._invoke(r,s,t)})}r?h?h(t,r,{value:s,enumerable:!p,configurable:!p,writable:!p}):t[r]=s:(o("next",0),o("throw",1),o("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,_regeneratorDefine(r,s,p,u)}t.exports=_regeneratorDefine,t.exports.__esModule=!0,t.exports.default=t.exports},71012:t=>{"use strict";t.exports=function(t){var r=Object(t),s=[];for(var p in r)s.unshift(p);return function e(){for(;s.length;)if((p=s.pop())in r)return e.value=p,e.done=!1,e;return e.done=!0,e}},t.exports.__esModule=!0,t.exports.default=t.exports},86601:(t,r,s)=>{"use strict";var p=s(28016),u=s(75881),h=s(62414),w=s(26008),E=s(81267),A=s(71012),R=s(97038);function _regeneratorRuntime(){var r=u(),s=r.m(_regeneratorRuntime),I=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function n(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===I||"GeneratorFunction"===(r.displayName||r.name))}var U={throw:1,return:2,break:3,continue:3};function a(t){var r,s;return function(p){r||(r={stop:function(){return s(p.a,2)},catch:function(){return p.v},abrupt:function(t,r){return s(p.a,U[t],r)},delegateYield:function(t,u,h){return r.resultName=u,s(p.d,R(t),h)},finish:function(t){return s(p.f,t)}},s=function(t,s,u){p.p=r.prev,p.n=r.next;try{return t(s,u)}finally{r.next=p.n}}),r.resultName&&(r[r.resultName]=p.v,r.resultName=void 0),r.sent=p.v,r.next=p.n;try{return t.call(this,r)}finally{p.p=r.prev,p.n=r.next}}}return(t.exports=_regeneratorRuntime=function(){return{wrap:function(t,s,p,u){return r.w(a(t),s,p,u&&u.reverse())},isGeneratorFunction:n,mark:r.m,awrap:function(t,r){return new p(t,r)},AsyncIterator:E,async:function(t,r,s,p,u){return(n(r)?w:h)(a(t),r,s,p,u)},keys:A,values:R}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=_regeneratorRuntime,t.exports.__esModule=!0,t.exports.default=t.exports},97038:(t,r,s)=>{"use strict";var p=s(44493).default;t.exports=function(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}}}throw TypeError(p(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},4474:t=>{"use strict";function _setPrototypeOf(r,s){return t.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},t.exports.__esModule=!0,t.exports.default=t.exports,_setPrototypeOf(r,s)}t.exports=_setPrototypeOf,t.exports.__esModule=!0,t.exports.default=t.exports},14171:(t,r,s)=>{"use strict";var p=s(44493).default;t.exports=function(t,r){if("object"!=p(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var u=s.call(t,r||"default");if("object"!=p(u))return u;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},54987:(t,r,s)=>{"use strict";var p=s(44493).default,u=s(14171);t.exports=function(t){var r=u(t,"string");return"symbol"==p(r)?r:r+""},t.exports.__esModule=!0,t.exports.default=t.exports},44493:t=>{"use strict";function _typeof(r){return t.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,_typeof(r)}t.exports=_typeof,t.exports.__esModule=!0,t.exports.default=t.exports},49903:(t,r,s)=>{"use strict";var p=s(51327),u=s(4474),h=s(55357),w=s(89250);function _wrapNativeSuper(r){var s="function"==typeof Map?new Map:void 0;return t.exports=_wrapNativeSuper=function(t){if(null===t||!h(t))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(t))return s.get(t);s.set(t,Wrapper)}function Wrapper(){return w(t,arguments,p(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),u(Wrapper,t)},t.exports.__esModule=!0,t.exports.default=t.exports,_wrapNativeSuper(r)}t.exports=_wrapNativeSuper,t.exports.__esModule=!0,t.exports.default=t.exports},21264:(t,r,s)=>{"use strict";var p=s(86601)();t.exports=p;try{regeneratorRuntime=p}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},29493:t=>{"use strict";t.exports=JSON.parse('{"126":{"host":"smtp.126.com","port":465,"secure":true},"163":{"host":"smtp.163.com","port":465,"secure":true},"1und1":{"host":"smtp.1und1.de","port":465,"secure":true,"authMethod":"LOGIN"},"Aliyun":{"domains":["aliyun.com"],"host":"smtp.aliyun.com","port":465,"secure":true},"AOL":{"domains":["aol.com"],"host":"smtp.aol.com","port":587},"Bluewin":{"host":"smtpauths.bluewin.ch","domains":["bluewin.ch"],"port":465},"DebugMail":{"host":"debugmail.io","port":25},"DynectEmail":{"aliases":["Dynect"],"host":"smtp.dynect.net","port":25},"Ethereal":{"aliases":["ethereal.email"],"host":"smtp.ethereal.email","port":587},"FastMail":{"domains":["fastmail.fm"],"host":"smtp.fastmail.com","port":465,"secure":true},"Forward Email":{"aliases":["FE","ForwardEmail"],"domains":["forwardemail.net"],"host":"smtp.forwardemail.net","port":465,"secure":true},"Feishu Mail":{"aliases":["Feishu","FeishuMail"],"domains":["www.feishu.cn"],"host":"smtp.feishu.cn","port":465,"secure":true},"GandiMail":{"aliases":["Gandi","Gandi Mail"],"host":"mail.gandi.net","port":587},"Gmail":{"aliases":["Google Mail"],"domains":["gmail.com","googlemail.com"],"host":"smtp.gmail.com","port":465,"secure":true},"Godaddy":{"host":"smtpout.secureserver.net","port":25},"GodaddyAsia":{"host":"smtp.asia.secureserver.net","port":25},"GodaddyEurope":{"host":"smtp.europe.secureserver.net","port":25},"hot.ee":{"host":"mail.hot.ee"},"Hotmail":{"aliases":["Outlook","Outlook.com","Hotmail.com"],"domains":["hotmail.com","outlook.com"],"host":"smtp-mail.outlook.com","port":587},"iCloud":{"aliases":["Me","Mac"],"domains":["me.com","mac.com"],"host":"smtp.mail.me.com","port":587},"Infomaniak":{"host":"mail.infomaniak.com","domains":["ik.me","ikmail.com","etik.com"],"port":587},"Loopia":{"host":"mailcluster.loopia.se","port":465},"mail.ee":{"host":"smtp.mail.ee"},"Mail.ru":{"host":"smtp.mail.ru","port":465,"secure":true},"Mailcatch.app":{"host":"sandbox-smtp.mailcatch.app","port":2525},"Maildev":{"port":1025,"ignoreTLS":true},"Mailgun":{"host":"smtp.mailgun.org","port":465,"secure":true},"Mailjet":{"host":"in.mailjet.com","port":587},"Mailosaur":{"host":"mailosaur.io","port":25},"Mailtrap":{"host":"live.smtp.mailtrap.io","port":587},"Mandrill":{"host":"smtp.mandrillapp.com","port":587},"Naver":{"host":"smtp.naver.com","port":587},"One":{"host":"send.one.com","port":465,"secure":true},"OpenMailBox":{"aliases":["OMB","openmailbox.org"],"host":"smtp.openmailbox.org","port":465,"secure":true},"Outlook365":{"host":"smtp.office365.com","port":587,"secure":false},"OhMySMTP":{"host":"smtp.ohmysmtp.com","port":587,"secure":false},"Postmark":{"aliases":["PostmarkApp"],"host":"smtp.postmarkapp.com","port":2525},"Proton":{"aliases":["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],"domains":["proton.me","protonmail.com","pm.me","protonmail.ch"],"host":"smtp.protonmail.ch","port":587,"requireTLS":true},"qiye.aliyun":{"host":"smtp.mxhichina.com","port":"465","secure":true},"QQ":{"domains":["qq.com"],"host":"smtp.qq.com","port":465,"secure":true},"QQex":{"aliases":["QQ Enterprise"],"domains":["exmail.qq.com"],"host":"smtp.exmail.qq.com","port":465,"secure":true},"SendCloud":{"host":"smtp.sendcloud.net","port":2525},"SendGrid":{"host":"smtp.sendgrid.net","port":587},"SendinBlue":{"aliases":["Brevo"],"host":"smtp-relay.brevo.com","port":587},"SendPulse":{"host":"smtp-pulse.com","port":465,"secure":true},"SES":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-EAST-1":{"host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-WEST-2":{"host":"email-smtp.us-west-2.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-1":{"host":"email-smtp.eu-west-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTH-1":{"host":"email-smtp.ap-south-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-1":{"host":"email-smtp.ap-northeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-2":{"host":"email-smtp.ap-northeast-2.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-3":{"host":"email-smtp.ap-northeast-3.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-1":{"host":"email-smtp.ap-southeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-2":{"host":"email-smtp.ap-southeast-2.amazonaws.com","port":465,"secure":true},"Seznam":{"aliases":["Seznam Email"],"domains":["seznam.cz","email.cz","post.cz","spoluzaci.cz"],"host":"smtp.seznam.cz","port":465,"secure":true},"Sparkpost":{"aliases":["SparkPost","SparkPost Mail"],"domains":["sparkpost.com"],"host":"smtp.sparkpostmail.com","port":587,"secure":false},"Tipimail":{"host":"smtp.tipimail.com","port":587},"Yahoo":{"domains":["yahoo.com"],"host":"smtp.mail.yahoo.com","port":465,"secure":true},"Yandex":{"domains":["yandex.ru"],"host":"smtp.yandex.ru","port":465,"secure":true},"Zoho":{"host":"smtp.zoho.com","port":465,"secure":true,"authMethod":"LOGIN"}}')},93259:t=>{"use strict";t.exports=JSON.parse('{"name":"nodemailer","version":"6.10.1","description":"Easy as cake e-mail sending from your Node.js applications","main":"lib/nodemailer.js","scripts":{"test":"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","lint":"eslint .","update":"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},"repository":{"type":"git","url":"https://github.com/nodemailer/nodemailer.git"},"keywords":["Nodemailer"],"author":"Andris Reinman","license":"MIT-0","bugs":{"url":"https://github.com/nodemailer/nodemailer/issues"},"homepage":"https://nodemailer.com/","devDependencies":{"@aws-sdk/client-ses":"3.731.1","bunyan":"1.8.15","c8":"10.1.3","eslint":"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0","libbase64":"1.3.0","libmime":"5.3.6","libqp":"2.1.1","nodemailer-ntlm-auth":"1.0.4","proxy":"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},"engines":{"node":">=6.0.0"}}')},87658:t=>{"use strict";t.exports=JSON.parse('{"name":"openid-client","version":"5.7.1","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/openid-client","repository":"panva/openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.106","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.5.0","mocha":"^10.7.3","nock":"^13.5.5","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')},54055:t=>{"use strict";t.exports=JSON.parse('{"name":"postmark","description":"Official Node.js client library for the Postmark HTTP API - https://www.postmarkapp.com","license":"MIT","tags":["email","utility","postmark","sending","transactional"],"version":"3.11.0","author":"Igor Balos","contributors":["Igor Balos","Andrew Theken","Aaron Blum","Aleksey Aleksandrov","Alex Shepard","Antony Jones","Ben Burwell","Ben Williamson","Chris Williams","Jakub Borys","Mark Nguyen","Matt","Matthew Blackshaw","Matthew Conlen","Ryan Kirkman","Scott Anderson","Sebastien Chopin","Theophane RUPIN","codesplicer","francescoRubini"],"main":"./dist/index.js","types":"./dist/index.d.ts","directories":{"lib":"./dist/index.js"},"scripts":{"compile":"rm -r -f ./dist && node_modules/.bin/tsc","test":"node_modules/mocha/bin/mocha --timeout 30000 --retries 1 -r ts-node/register test/**/*test.ts","unittest":"node_modules/mocha/bin/mocha --timeout 30000 --retries 1 -r ts-node/register test/unit/**/*test.ts","watchtests":"node_modules/.bin/mocha --timeout 30000 --retries 1 -r ts-node/register -R list -w --recursive -G test/**/*test.ts","lint":"tslint -c tslint.json \'src/**/*.ts\'","lintfix":"tslint -c tslint.json \'src/**/*.ts\' --fix","compile-docs":"echo \'Generating docs...\' && mkdir -p ./docs && rm -r ./docs && node_modules/.bin/typedoc --options typedoc.json && git add -A ./docs && echo \'Generated docs!\'"},"homepage":"http://ActiveCampaign.github.io/postmark.js","repository":{"type":"git","url":"https://github.com/ActiveCampaign/postmark.js.git"},"bugs":{"url":"https://github.com/ActiveCampaign/postmark.js/issues"},"precommit":["compile","lint","test","compile-docs"],"devDependencies":{"@types/chai":"4.3.1","@types/mocha":"^5.2.5","@types/dotenv":"^4.0.3","@types/node":"^4.0.29","@types/sinon":"^7.5.0","chai":"4.3.1","mocha":"5.2.0","dotenv":"^4.0.0","sinon":"^7.5.0","pre-commit":"1.2.2","ts-node":"^7.0.1","tslint":"^6.1.3","typedoc":"^0.22.11","typescript":"4.5.5"},"dependencies":{"axios":"^0.25.0"}}')}};